{"version":3,"sources":["catalog.js","registration.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC1LA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elix_education.js","sourcesContent":["(function ($) {\r\n    /**\r\n     * Creates jQuery plugin for education module catalog\r\n     * @returns DxEduCatalog\r\n     */\r\n    $.fn.DxEduCatalog = function () {\r\n        return this.each(function () {\r\n            if ($(this).data('dx_is_init') == 1) {\r\n                return;\r\n            }\r\n\r\n            this.catalog = new $.DxEduCatalog($(this));\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Class for education module catalog\r\n     * @type DxCryptoField \r\n     */\r\n    $.DxEduCatalog = function (domObject) {\r\n        /**\r\n         * Field's DOM object which is related to this class\r\n         */\r\n        this.domObject = domObject;\r\n\r\n        // Initializes class\r\n        this.init();\r\n    };\r\n\r\n    /**\r\n     * Initializes component\r\n     * @returns {undefined}\r\n     */\r\n    $.extend($.DxEduCatalog.prototype, {\r\n        /**\r\n         * Initializes field\r\n         * @returns {undefined}\r\n         */\r\n        init: function () {\r\n            var self = this;\r\n\r\n            if (self.domObject.data('dx_is_init') == 1) {\r\n                return;\r\n            }\r\n\r\n            self.domObject.data('dx_is_init', 1);\r\n\r\n            show_page_splash(1);\r\n\r\n            // Opens chat window\r\n            self.domObject.find('.dx-edu-catalog-btn-filter-detailed').on('click', function () {\r\n                self.onClickToogleAdvancedFilter(self);\r\n            });\r\n\r\n            self.domObject.find('select').multiselect({\r\n                buttonWidth: '100%'\r\n            });\r\n\r\n            self.domObject.find('.dx-edu-datetime-field').daterangepicker({\r\n                locale: {\r\n                    \"separator\": \" - \",\r\n                    \"applyLabel\": Lang.get('date_range.btn_set'),\r\n                    \"cancelLabel\": Lang.get('date_range.btn_cancel'),\r\n                    \"fromLabel\": Lang.get('date_range.lbl_from'),\r\n                    \"toLabel\": Lang.get('date_range.lbl_to'),\r\n                    \"customRangeLabel\": Lang.get('date_range.lbl_interval'),\r\n                    \"daysOfWeek\": [\r\n                        Lang.get('date_range.d_7'),\r\n                        Lang.get('date_range.d_1'),\r\n                        Lang.get('date_range.d_2'),\r\n                        Lang.get('date_range.d_3'),\r\n                        Lang.get('date_range.d_4'),\r\n                        Lang.get('date_range.d_5'),\r\n                        Lang.get('date_range.d_6')\r\n                    ],\r\n                    \"monthNames\": [Lang.get('date_range.m_jan'), Lang.get('date_range.m_feb'), Lang.get('date_range.m_mar'), Lang.get('date_range.m_apr'), Lang.get('date_range.m_may'), Lang.get('date_range.m_jun'), Lang.get('date_range.m_jul'), Lang.get('date_range.m_aug'), Lang.get('date_range.m_sep'), Lang.get('date_range.m_oct'), Lang.get('date_range.m_nov'), Lang.get('date_range.m_dec')],\r\n                    \"firstDay\": 1\r\n                },\r\n                \"showDropdowns\": true,\r\n                \"linkedCalendars\": false\r\n            });\r\n\r\n            self.domObject.find('.dx-edu-datetime-field').each(function(){\r\n                $(this).val('');\r\n            });\r\n\r\n            self.domObject.find('.dx-edu-time-field').timepicker({\r\n                template: 'dropdown',\r\n                autoclose: true,\r\n                minuteStep: 10,\r\n                defaultTime: '',\r\n                showSeconds: false,\r\n                showMeridian: false,\r\n                showInputs: true\r\n            });\r\n\r\n            self.domObject.find('.dx-edu-catalog-btn-search').on('click', function () {\r\n                self.search(self);\r\n            });\r\n\r\n            self.domObject.find('.dx-edu-catalog-btn-filter-clear').on('click',function () {\r\n                self.clearFilter(self);\r\n            })\r\n\r\n            self.search(self);\r\n        },\r\n        clearFilter: function (self) {\r\n            self.domObject.find('.dx-edu-catalog-filter-text').val('');\r\n            self.domObject.find('.dx-edu-catalog-filter-tag').multiselect('deselectAll', false);\r\n            self.domObject.find('.dx-edu-catalog-filter-program').multiselect('deselectAll', false);\r\n            self.domObject.find('.dx-edu-catalog-filter-module').multiselect('deselectAll', false);\r\n            self.domObject.find('.dx-edu-catalog-filter-teacher').multiselect('deselectAll', false);\r\n            self.domObject.find('.dx-edu-catalog-filter-tag').multiselect('refresh');\r\n            self.domObject.find('.dx-edu-catalog-filter-program').multiselect('refresh');\r\n            self.domObject.find('.dx-edu-catalog-filter-module').multiselect('refresh');\r\n            self.domObject.find('.dx-edu-catalog-filter-teacher').multiselect('refresh');\r\n            self.domObject.find('.dx-edu-catalog-filter-date').val('');\r\n            self.domObject.find('.dx-edu-catalog-filter-time_from').val('');\r\n            self.domObject.find('.dx-edu-catalog-filter-time_to').val('');\r\n            self.domObject.find('.dx-edu-catalog-filter-only_free').bootstrapSwitch('state', false);\r\n            self.domObject.find('.dx-edu-catalog-filter-show_full').bootstrapSwitch('state', true);\r\n        },\r\n        /**\r\n         * Shows or hides advanced filter\r\n         */\r\n        onClickToogleAdvancedFilter: function (self) {\r\n            var icon = self.domObject.find('.dx-edu-catalog-btn-filter-detailed').find('.fa');\r\n\r\n            icon.each(function () {\r\n                if ($(this)) {\r\n                    $(this).toggleClass('fa-caret-down fa-caret-up');\r\n                } else {\r\n                    $(this).toggleClass('fa-caret-up fa-caret-down');\r\n                }\r\n            });\r\n        },\r\n        search: function (self) {\r\n            show_page_splash(1);\r\n\r\n            var datePicker = self.domObject.find('.dx-edu-catalog-filter-date').data('daterangepicker');\r\n            var datePickerIsEmpty = self.domObject.find('.dx-edu-catalog-filter-date').val() == '';\r\n\r\n            var data = {\r\n                text: self.domObject.find('.dx-edu-catalog-filter-text').val(),\r\n                tag: self.domObject.find('.dx-edu-catalog-filter-tag').val(),\r\n                program: self.domObject.find('.dx-edu-catalog-filter-program').val(),\r\n                module: self.domObject.find('.dx-edu-catalog-filter-module').val(),\r\n                teacher: self.domObject.find('.dx-edu-catalog-filter-teacher').val(),\r\n                date_from: datePickerIsEmpty ? '' : datePicker.startDate.format('YYYY-MM-DD'),\r\n                date_to: datePickerIsEmpty ? '' : datePicker.endDate.format('YYYY-MM-DD'),\r\n                time_from: self.domObject.find('.dx-edu-catalog-filter-time_from').val(),\r\n                time_to: self.domObject.find('.dx-edu-catalog-filter-time_to').val(),\r\n                only_free: self.domObject.find('.dx-edu-catalog-filter-only_free').bootstrapSwitch('state') ? 1 : 0,\r\n                show_full: self.domObject.find('.dx-edu-catalog-filter-show_full').bootstrapSwitch('state') ? 1 : 0,\r\n            };\r\n\r\n            $.ajax({\r\n                url: DX_CORE.site_url + 'edu/catalog/search',\r\n                data: data,\r\n                type: \"get\",\r\n                success: function (res) {\r\n                    hide_page_splash(1);\r\n\r\n                    if (res && res.success && res.success == 1) {\r\n                        self.domObject.find('.dx-edu-catalog-body').html(res.html);\r\n                    } else if (res && res.msg) {\r\n                        notify_err(res.msg);\r\n                    } else {\r\n                        notify_err(\"Kļūda ielādējot datus\");\r\n                    }\r\n                },\r\n                error: function (err) {\r\n                    hide_page_splash(1);\r\n\r\n                    notify_err(\"Kļūda ielādējot datus\");\r\n                }\r\n            });\r\n        }\r\n    });\r\n})(jQuery);\r\n\r\n// ajaxComplete ready\r\n$(document).ready(function () {\r\n    // Initializes window\r\n    $('.dx-edu-catalog-page').DxEduCatalog();\r\n});\r\n","(function ($) {\r\n    /**\r\n     * Creates jQuery plugin for education course registration\r\n     * @returns DxEduRegistration\r\n     */\r\n    $.fn.DxEduRegistration = function () {\r\n        return this.each(function () {\r\n            if ($(this).data('dx_is_init') == 1) {\r\n                return;\r\n            }\r\n\r\n            this.registration = new $.DxEduRegistration($(this));\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Class for education course registration\r\n     * @type DxCryptoField \r\n     */\r\n    $.DxEduRegistration = function (domObject) {\r\n        /**\r\n         * Field's DOM object which is related to this class\r\n         */\r\n        this.domObject = domObject;\r\n\r\n        this.groupOptionStack = [];\r\n\r\n        this.basket = [];\r\n\r\n        // Initializes class\r\n        this.init();\r\n    };\r\n\r\n    /**\r\n     * Initializes component\r\n     * @returns {undefined}\r\n     */\r\n    $.extend($.DxEduRegistration.prototype, {\r\n        /**\r\n         * Initializes field\r\n         * @returns {undefined}\r\n         */\r\n        init: function () {\r\n            var self = this;\r\n\r\n            if (self.domObject.data('dx_is_init') == 1) {\r\n                return;\r\n            }\r\n\r\n            self.domObject.data('dx_is_init', 1);\r\n\r\n            show_page_splash(1);\r\n\r\n            self.domObject.find('.dx-edu-reg-btn-add-group').click(function () {\r\n                $('.dx-edu-modal-group-select-course').val($(\".dx-edu-modal-group-select-course option:first\").val());\r\n                $('#dx-edu-modal-group').data('group_id', 0);\r\n                $('#dx-edu-modal-group').modal('show');\r\n            });\r\n\r\n            $('.dx-edu-modal-group-select-course').on('change', function () {\r\n                self.loadGroupsBySubject(self, this.value);\r\n            });\r\n\r\n            self.initGroupModalGroupSelect(self);\r\n            $('.dx-edu-modal-group-select-course').change();\r\n\r\n            $('.dx-edu-modal-group-accept').click(function () {\r\n                self.saveGroup(self);\r\n            });\r\n\r\n            $('.dx-edu-modal-group-decline').click(function () {\r\n                self.closeGroupModal(self);\r\n            });\r\n\r\n            $('.dx-edu-modal-participant-accept').click(function () {\r\n                self.saveParticipant(self);\r\n            });\r\n\r\n            $('.dx-edu-modal-participant-decline').click(function () {\r\n                self.closeParticipantModal(self);\r\n            });\r\n\r\n            $('.dx-edu-reg-btn-save').click(function () {\r\n                self.saveAll(self);\r\n            });\r\n\r\n            /* self.domObject.find('.dx-edu-datetime-field').each(function(){\r\n                 $(this).val('');\r\n             });\r\n \r\n             self.domObject.find('.dx-edu-catalog-btn-search').on('click', function () {\r\n                 self.search(self);\r\n             });*/\r\n\r\n            hide_page_splash(1);\r\n        },\r\n        saveAll: function (self) {\r\n            show_page_splash(1);\r\n\r\n            var data = {\r\n                type: $('.dx-edu-reg-invoice-type').val(),\r\n                address: $('.dx-edu-reg-invoice-address').val(),\r\n                regnr: $('.dx-edu-reg-invoice-regnr').val(),\r\n                bank: $('.dx-edu-reg-invoice-bank').val(),\r\n                swift: $('.dx-edu-reg-invoice-swift').val(),\r\n                account: $('.dx-edu-reg-invoice-account').val(),\r\n                groups: self.basket\r\n            }\r\n\r\n            return false;\r\n\r\n           /* $.ajax({\r\n                url: DX_CORE.site_url + 'edu/registration/save',\r\n                type: \"post\",\r\n                data: data,\r\n                success: function (res) {\r\n                    hide_page_splash(1);\r\n\r\n                    if (res && res.success && res.success == 1) {\r\n                        self.loadGroupPanel(self, res);\r\n                    } else if (res && res.msg) {\r\n                        notify_err(res.msg);\r\n                    } else {\r\n                        notify_err(\"Kļūda saglabājot pieteikumu\");\r\n                    }\r\n                },\r\n                error: function (err) {\r\n                    hide_page_splash(1);\r\n\r\n                    notify_err(\"Kļūda saglabājot pieteikumu\");\r\n                }\r\n            });*/\r\n        },\r\n        saveGroup: function (self) {\r\n            var subjectId = $('.dx-edu-modal-group-select-course').val();\r\n            var groupId = $('.dx-edu-modal-group-select-group').val();\r\n\r\n            if (groupId == 0) {\r\n                notify_err(\"Nav izvēlēta grupa, kurai pieteikt dalībniekus\");\r\n                return;\r\n            }\r\n\r\n            var oldGroupId = $('#dx-edu-modal-group').data('group_id');\r\n\r\n            if (oldGroupId == 0 || oldGroupId != groupId) {\r\n                if (oldGroupId != groupId) {\r\n                    delete self.basket[oldGroupId];\r\n                }\r\n\r\n                self.basket[groupId] = {\r\n                    subject_id: subjectId,\r\n                    group_id: groupId\r\n                };\r\n\r\n                $.ajax({\r\n                    url: DX_CORE.site_url + 'edu/registration/group/' + groupId,\r\n                    type: \"get\",\r\n                    success: function (res) {\r\n                        hide_page_splash(1);\r\n\r\n                        if (res && res.success && res.success == 1) {\r\n                            self.loadGroupPanel(self, res);\r\n\r\n                            $('#dx-edu-modal-group').modal('hide');\r\n                        } else if (res && res.msg) {\r\n                            notify_err(res.msg);\r\n                        } else {\r\n                            notify_err(\"Kļūda ielādējot datus\");\r\n                        }\r\n                    },\r\n                    error: function (err) {\r\n                        hide_page_splash(1);\r\n\r\n                        notify_err(\"Kļūda ielādējot datus\");\r\n                    }\r\n                });\r\n            } else {\r\n                $('#dx-edu-modal-group').modal('hide');\r\n            }\r\n        },\r\n        saveParticipant: function (self) {\r\n            var is_coordinator = $('.dx-edu-reg-is-coordinator').bootstrapSwitch('state');\r\n\r\n            var data;\r\n\r\n            if (is_coordinator) {\r\n                data = {\r\n                    employee_id: 0\r\n                };\r\n            } else {\r\n                data = {\r\n                    name: $('.dx-edu-modal-participant-input-name').val(),\r\n                    lastname: $('.dx-edu-modal-participant-input-lastname').val(),\r\n                    job: $('.dx-edu-modal-participant-input-job').val(),\r\n                    position: $('.dx-edu-modal-participant-input-position').val(),\r\n                    telephone: $('.dx-edu-modal-participant-input-telephone').val(),\r\n                    email: $('.dx-edu-modal-participant-input-email').val()\r\n                };\r\n            }\r\n\r\n            var participantId = $('#dx-edu-modal-participant').data('participant_id');\r\n            var groupId = $('#dx-edu-modal-participant').data('group_id');\r\n            var groupTemplate = $('#dx-edu-modal-participant').data('group_template');\r\n\r\n            if (participantId == -1) {\r\n                if (typeof self.basket[groupId].participants === 'undefined') {\r\n                    self.basket[groupId].participants = [];\r\n                }\r\n\r\n                if (is_coordinator) {\r\n\r\n                } else {\r\n                    data.participant_id = self.basket[groupId].participants.length;\r\n                    self.basket[groupId].participants.push(data);\r\n                    participantId = data.participant_id;\r\n                }\r\n\r\n                // Enables save button for form\r\n                $('.dx-edu-reg-label-save').hide();\r\n                $('.dx-edu-reg-btn-save').removeClass('disabled');\r\n            } else {\r\n                data.participant_id = participantId;\r\n                self.basket[groupId].participants[participantId] = data;\r\n            }\r\n\r\n            self.loadParticipantPanel(self, data, participantId, groupId, groupTemplate);\r\n\r\n            $('#dx-edu-modal-participant').modal('hide');\r\n        },\r\n        editParticipant: function (self, template, groupId, participantId) {\r\n            var data = self.basket[groupId].participants[participantId];\r\n\r\n            $('.dx-edu-modal-participant-input-name').val(data.name);\r\n            $('.dx-edu-modal-participant-input-lastname').val(data.lastname);\r\n            $('.dx-edu-modal-participant-input-job').val(data.job);\r\n            $('.dx-edu-modal-participant-input-position').val(data.position);\r\n            $('.dx-edu-modal-participant-input-telephone').val(data.telephone);\r\n            $('.dx-edu-modal-participant-input-email').val(data.email);\r\n\r\n            $('#dx-edu-modal-participant').data('participant_id', data.participant_id);\r\n            $('#dx-edu-modal-participant').data('group_id', data.group_id);\r\n            $('#dx-edu-modal-participant').data('template', template);\r\n\r\n            $('#dx-edu-modal-participant').modal('show');\r\n        },\r\n        editGroup: function (self, template) {\r\n            var data = self.basket[template.data('group_id')];\r\n\r\n            $('.dx-edu-modal-group-select-course').val(data.subject_id);\r\n            $('.dx-edu-modal-group-select-course').change();\r\n            $('.dx-edu-modal-group-select-group').val(data.group_id);\r\n\r\n            $('#dx-edu-modal-group').data('group_id', data.group_id);\r\n            $('#dx-edu-modal-group').data('template', template);\r\n\r\n            $('#dx-edu-modal-group').modal('show');\r\n        },\r\n        deleteGroup: function (self, template) {\r\n            delete self.basket[template.data('group_id')];\r\n\r\n            template.remove();\r\n\r\n            if ($('.dx-edu-reg-group-container').find('dx-edu-reg-group-panel').length <= 0) {\r\n                $('.dx-edu-reg-group-container').find('.dx-edu-reg-group-panel-empty').show();\r\n\r\n                $('.dx-edu-reg-label-save').show();\r\n                $('.dx-edu-reg-btn-save').addClass('disabled');\r\n            }\r\n        },\r\n        deleteParticipant: function (self, template, groupId, participantId, groupTemplate) {\r\n            delete self.basket[groupId].participants[participantId];\r\n\r\n            template.remove();\r\n\r\n            if (groupTemplate.find('.dx-edu-reg-participant-panel').length <= 0) {\r\n                groupTemplate.find('.dx-edu-reg-participants-panel-empty').show();\r\n            }\r\n\r\n            if ($('.dx-edu-reg-participant-panel').length <= 1) {\r\n                $('.dx-edu-reg-label-save').show();\r\n                $('.dx-edu-reg-btn-save').addClass('disabled');\r\n            }\r\n        },\r\n        addParticipant: function (self, groupTemplate, groupId) {\r\n            var is_coordinator = $('.dx-edu-reg-is-coordinator').bootstrapSwitch('state');\r\n\r\n            self.closeParticipantModal();\r\n\r\n            if (is_coordinator) {\r\n                $('.dx-edu-modal-participant-regular').hide();\r\n                $('.dx-edu-modal-participant-organization').show();\r\n            } else {\r\n                $('.dx-edu-modal-participant-organization').hide();\r\n                $('.dx-edu-modal-participant-regular').show();\r\n            }\r\n\r\n            $('#dx-edu-modal-participant').data('participant_id', -1);\r\n            $('#dx-edu-modal-participant').data('group_id', groupId);\r\n            $('#dx-edu-modal-participant').data('group_template', groupTemplate);\r\n            $('#dx-edu-modal-participant').modal('show');\r\n        },\r\n        loadParticipantPanel: function (self, data, participantId, groupId, groupTemplate) {\r\n            if ($('#dx-edu-modal-participant').data('participant_id') == -1) {\r\n                var $template = $($('#dx-edu-reg-participant-panel-temp').html());\r\n\r\n                $template.find('.dx-edu-reg-btn-edit-participant').on('click', function () {\r\n                    self.editParticipant(self, $template, groupId, participantId);\r\n                });\r\n\r\n                $template.find('.dx-edu-reg-btn-del-participant').on('click', function () {\r\n                    self.deleteParticipant(self, $template, groupId, participantId, groupTemplate);\r\n                });\r\n\r\n                groupTemplate.find('.dx-edu-reg-group-participants').append($template);\r\n            } else {\r\n                var $template = $('#dx-edu-modal-participant').data('template');\r\n            }\r\n\r\n            $template.data('participant_id', participantId);\r\n            $template.data('group_id', groupId);\r\n\r\n            $template.find('.dx-edu-reg-participant').html(data.name + ' ' + data.lastname + ' (' + data.email + ')');\r\n\r\n            groupTemplate.find('.dx-edu-reg-participants-panel-empty').hide();\r\n        },\r\n        loadGroupPanel: function (self, res) {\r\n            if ($('#dx-edu-modal-group').data('group_id') == 0) {\r\n                var $template = $($('#dx-edu-reg-group-panel-temp').html());\r\n\r\n                $template.find('.dx-edu-reg-btn-edit-group').on('click', function () {\r\n                    self.editGroup(self, $template);\r\n                });\r\n\r\n                $template.find('.dx-edu-reg-btn-del-group').on('click', function () {\r\n                    self.deleteGroup(self, $template);\r\n                });\r\n\r\n                $template.find('.dx-edu-reg-btn-add-participant').on('click', function () {\r\n                    self.addParticipant(self, $template, res.group.id);\r\n                });\r\n\r\n                $('.dx-edu-reg-group-container').append($template);\r\n            } else {\r\n                var $template = $('#dx-edu-modal-group').data('template');\r\n            }\r\n\r\n            $template.data('group_id', res.group.id);\r\n\r\n            $template.find('.dx-edu-reg-group-title').html(res.group.title);\r\n            $template.find('.dx-edu-reg-group-desc').html(res.group.subject.title);\r\n\r\n            if (res.group_start) {\r\n                $template.find('.dx-edu-reg-group-date').html(res.group_start);\r\n\r\n                if (res.group_start != res.group_end) {\r\n                    $template.find('.dx-edu-reg-group-date').append(' - ' + res.group_end);\r\n                }\r\n            } else {\r\n                $template.find('.dx-edu-reg-group-date').html('');\r\n            }\r\n\r\n            $('.dx-edu-reg-group-container').find('.dx-edu-reg-group-panel-empty').hide();\r\n        },\r\n        closeGroupModal: function (self) {\r\n            $('.dx-edu-modal-group-select-course').val($(\".dx-edu-modal-group-select-course option:first\").val());\r\n        },\r\n        closeParticipantModal: function (self) {\r\n            $('.dx-edu-modal-participant-input-name').val('');\r\n            $('.dx-edu-modal-participant-input-lastname').val('');\r\n            $('.dx-edu-modal-participant-input-job').val('');\r\n            $('.dx-edu-modal-participant-input-position').val('');\r\n            $('.dx-edu-modal-participant-input-telephone').val('');\r\n            $('.dx-edu-modal-participant-input-email').val('');\r\n        },\r\n        /**\r\n         * Initializes group select box in group modal window\r\n         */\r\n        initGroupModalGroupSelect: function (self) {\r\n            var options = $('.dx-edu-modal-group-select-group option');\r\n\r\n            for (var i = 0; i < options.length; i++) {\r\n                var subject_id = $(options[i]).data('subject-id');\r\n\r\n                if (!(subject_id in self.groupOptionStack)) {\r\n                    self.groupOptionStack[subject_id] = [];\r\n                }\r\n\r\n                self.groupOptionStack[subject_id].push(options[i]);\r\n                $(options[i]).remove();\r\n            }\r\n        },\r\n        /**\r\n         * Loads groups in group modal\r\n         */\r\n        loadGroupsBySubject: function (self, value) {\r\n            var groupSelect = $('.dx-edu-modal-group-select-group');\r\n            var options = groupSelect.find('option').remove();\r\n\r\n            if (value in self.groupOptionStack) {\r\n                var groupOptions = self.groupOptionStack[value];\r\n\r\n                for (var i = 0; i < groupOptions.length; i++) {\r\n                    groupSelect.append(groupOptions[i]);\r\n                }\r\n            } else {\r\n                groupSelect.append('<option value=\"0\">Kursam nav pieejamu grupu</option>');\r\n            }\r\n        }\r\n    });\r\n})(jQuery);\r\n\r\n// ajaxComplete ready\r\n$(document).ready(function () {\r\n    // Initializes chat window\r\n    $('.dx-edu-registration-page').DxEduRegistration();\r\n});\r\n"]}