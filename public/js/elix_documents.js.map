{"version":3,"sources":["documents.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elix_documents.js","sourcesContent":["/**\n * Lotus Notes dokumentu meklēšanas lapas JavaScript funkcionalitāte\n * \n * @type _L4.Anonym$0|Function\n */\nvar PageDocuments = function()\n{\n    /**\n     * Meklēšanas rīku HTML formas elements\n     * \n     * @type Object\n     */\n    var form_elem = null;\n\n    /**\n     * Lotus Notes dokumentu meklēšanas bloka HTML elements\n     * \n     * @type type\n     */\n    var page_elem = null;\n\n    /**\n     * Parāda vai paslēpj saiti \"Notīrīt kritērijus\" atkarībā ir vai nav norādīts vismaz viens kritērijs\n     * \n     * @returns {undefined}\n     */\n    var clearLinkShowHide = function() {\n        if (\n                getElementVal(page_elem, 'select[name=source_id]', 0) > 0 ||\n                getElementVal(page_elem, 'select[name=kind_id]', 0) > 0 ||\n                getElementVal(page_elem, 'input[name=criteria]', \"\") ||\n                getElementVal(page_elem, 'input[name=pick_date_from]', \"\") ||\n                getElementVal(page_elem, 'input[name=pick_date_to]', \"\")\n                )\n        {\n            page_elem.find(\".dx-clear-link\").show();\n        }\n        else\n        {\n            page_elem.find(\".dx-clear-link\").hide();\n        }\n    };\n\n    /**\n     * Notīra meklēšanas kritēriju lauku vērtības\n     * \n     * @returns {undefined}\n     */\n    var clearFields = function() {\n\n        form_elem.find('input[name=pick_date_from]').val('');\n        form_elem.find('input[name=pick_date_to]').val('');\n        form_elem.find('input[name=criteria]').val('');\n\n        form_elem.find('select[name=source_id]').val(0);\n        form_elem.find('select[name=kind_id]').val(0);\n        \n        form_elem.find('#defaultrange input').val('');\n    };\n\n    /**\n     * Nodrošina saites \"Notīrīt\" funkcionalitāti - dzēš formas lauku vērtības\n     *\n     * @returns {undefined}\n     */\n    var handleLinkClear = function() {\n        page_elem.find(\".dx-clear-link\").click(function() {\n            clearFields();\n            clearLinkShowHide();\n        });\n    };\n\n    /**\n     * Inicializē vērtību notīrīšanas saites parādīšanu/paslēpšanu, mainoties formas lauku vērtībām\n     * \n     * @returns {undefined}\n     */\n    var handleValueChange = function() {\n        form_elem.find(\"input\").keyup(function() {\n            clearLinkShowHide();\n        });\n\n        form_elem.find(\"select\").change(function() {\n            clearLinkShowHide();\n        });\n    };\n\n    /**\n     * Nodrošina dokumentu formas atvēršanu\n     * \n     * @returns {undefined}\n     */\n    var handleDocLinks = function() {\n        $(\"a.dx-lotus-btn\").click(function() {\n            view_list_item(\"form\", $(this).attr('item_id'), $(this).attr('list_id'), 0, 0, \"\", \"\");            \n        });\n    };\n    \n    /**\n     * Inicializē meklēšnas rīku parādīšanu pie lapas ielādes - parāda, ja bija meklēšanas pēc kāda no redzamajiem formas laukiem\n     * \n     * @returns {undefined}\n     */\n    var initSearchTools = function()\n    {\n        if (\n                getElementVal(page_elem, 'select[name=source_id]', 0) > 0 ||\n                getElementVal(page_elem, 'select[name=kind_id]', 0) > 0 ||\n                getElementVal(page_elem, 'input[name=pick_date_from]', \"\") ||\n                getElementVal(page_elem, 'input[name=pick_date_to]', \"\")\n                )\n        {\n            SearchTools.showHideTools();\n        }\n    };\n\n    /**\n     * Inicializē datuma intervāla uzstādīšanas komponenti\n     * \n     * @returns {undefined}\n     */\n    var initDateRange = function() {\n        var arr_date_param = {\n            range_id: \"defaultrange\",\n            el_date_from: \"pick_date_from\",\n            el_date_to: \"pick_date_to\",\n            page_selector: \".dx-documents-page\",\n            form_selector: \".search-tools-form\",\n            arr_ranges: {}\n        };\n        \n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_today')] = [moment(), moment()];\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_yesterday')] = [moment().subtract('days', 1), moment().subtract('days', 1)];\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_7')] = [moment().subtract('days', 6), moment()];\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_thism')] = [moment().startOf('month'), moment().endOf('month')];\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_prevm')] = [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')];\n        \n        DateRange.init(arr_date_param, clearLinkShowHide);\n    }\n\n    /**\n     * Inicializē dokumentu JavaScript funkcionalitāti\n     * \n     * @returns {undefined}\n     */\n    var initPage = function() {\n\n        page_elem = $(\".dx-documents-page\");\n\n        form_elem = page_elem.find('.search-tools-form');\n\n        SearchTools.init(clearLinkShowHide, clearFields);\n\n        handleValueChange();\n        handleLinkClear();\n\n        clearLinkShowHide();\n        initSearchTools();\n\n        initDateRange();\n        \n        handleDocLinks();\n    };\n\n    return {\n        init: function() {\n            initPage();\n        }\n    };\n}();\n\n$(document).ready(function() {\n    PageDocuments.init();\n});"]}