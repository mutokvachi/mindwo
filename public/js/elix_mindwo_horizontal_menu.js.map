{"version":3,"sources":["horizontal_menu.js","horizontal_form_ui.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3UA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elix_mindwo_horizontal_menu.js","sourcesContent":["/**\r\n * JavaScript logic for horizontal menu UI\r\n *\r\n * @type _L4.Anonym$0|Function\r\n */\r\nvar HMenuUI = function()\r\n{\r\n\t/**\r\n\t * Izceļ aktivizēto izvēlni (jo cache glabājas sākotnējais izcēlums - to noņemam)\r\n\t *\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar setActiveMenu = function()\r\n\t{\r\n\t\t$(\".dx-main-menu li\").removeClass(\"active\");\r\n\t\t\r\n\t\tvar active_item = $('.dx-main-menu li a[href=\"' + window.location.href + '\"]');\r\n\t\t\r\n\t\tif(active_item.length == 0)\r\n\t\t{\r\n\t\t\treturn; // nav ielādēta lapa no menu\r\n\t\t}\r\n\t\t\r\n\t\tif(parseInt(active_item.attr(\"data-level\")) == 0)\r\n\t\t{\r\n\t\t\tactive_item.parent().addClass(\"active\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsetActiveParentMenu(parseInt(active_item.attr(\"data-level\")), active_item.parent());\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Rekursīvi aktivizē menu elementa vecākos elementus līdz pašam pirmajam līmenim\r\n\t * @param {integer} level Līmenis\r\n\t * @param {object} elem Menu elements\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar setActiveParentMenu = function(level, elem)\r\n\t{\r\n\t\tif(level == 0)\r\n\t\t{\r\n\t\t\telem.addClass(\"active\");\r\n\t\t\treturn;\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\tsetActiveParentMenu(level - 1, elem.parent().parent());\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Repositionate page content and employees search pane\r\n\t *\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar setContentMargin = function()\r\n\t{\r\n\t\tvar menu_w = $(\".dx-top-menu\").outerWidth() - $(\"#dx-search-box-top-li\").outerWidth() - 40;\r\n\t\t$(\".dx-main-menu\").css(\"max-width\", menu_w + \"px\");\r\n\t\t\r\n\t\tvar height = $(\".dx-top-menu\").offset().top + $(\".dx-top-menu\").outerHeight() + \"px\";\r\n\t\t$(\".dx-employees-quick\").css(\"top\", height, \"important\");\r\n\t\t\r\n\t};\r\n\t\r\n\t/**\r\n\t * Hide images not loaded\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar hideErrorImages = function()\r\n\t{\r\n\t\t$(\"img\").error(function()\r\n\t\t{\r\n\t\t\t$(this).hide();\r\n\t\t\tsetContentMargin();\r\n\t\t});\r\n\t};\r\n\t\r\n\tvar positionDIVs = function()\r\n\t{\r\n\t\tvar top = $(window).scrollTop();\r\n\t\tif(top > 50 && $(window).width() >= 768)\r\n\t\t{\r\n\t\t\t$(\".dx-top-menu\").removeClass(\"dx-nonfixed-top\").addClass(\"navbar-fixed-top\");\r\n\t\t\t$(\".dx-page-container\").css('margin-top', '50px');\r\n\t\t\t\t\t\t\r\n\t\t\tvar height = $(\".dx-top-menu\").outerHeight() + \"px\";\r\n\t\t\t$(\".dx-employees-quick\").css(\"top\", height, \"important\");\r\n\t\t}\r\n\t\telse\r\n\t\t{\r\n\t\t\t$(\".dx-top-menu\").removeClass(\"navbar-fixed-top\").addClass(\"dx-nonfixed-top\");\r\n\t\t\t$(\".dx-page-container\").css('margin-top', '0px');\r\n\t\t\t\t\t\t\r\n\t\t\tvar height = ($(\".dx-top-menu\").offset().top + $(\".dx-top-menu\").outerHeight() - top) + \"px\";\r\n\t\t\t$(\".dx-employees-quick\").css(\"top\", height, \"important\");\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Stick menu on scrolling\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar handleScroll = function()\r\n\t{\r\n\t\t$(document).scroll(function()\r\n\t\t{\r\n\t\t\tpositionDIVs();\r\n\t\t});\r\n\t};\r\n\t\r\n\t/**\r\n\t * Make navigation behave correctly on mobiles.\r\n\t */\r\n\tvar handleTapEvent = function()\r\n\t{\r\n\t\t// select all dropdown toggles under the top level\r\n\t\t$('.dx-main-menu .dropdown-submenu > a.dropdown-toggle').each(function()\r\n\t\t{\r\n\t\t\t$(this).click(function(e)\r\n\t\t\t{\r\n\t\t\t\tif($(window).width() < 768)\r\n\t\t\t\t{\r\n\t\t\t\t\te.stopPropagation();\r\n\t\t\t\t\t\r\n\t\t\t\t\t// select the ul element next to the toggle (submenu itself)\r\n\t\t\t\t\tvar submenu = $(this).next();\r\n\t\t\t\t\t\r\n\t\t\t\t\tif(submenu.is(':visible'))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// hide submenu and all open sub-submenus of it\r\n\t\t\t\t\t\tsubmenu.add('.dropdown-menu', submenu).attr('style', '');\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t// hide already open submenus at the same level\r\n\t\t\t\t\t\t$(this).parent().siblings('.dropdown-submenu').find('.dropdown-menu:visible').attr('style', '');\r\n\t\t\t\t\t\tsubmenu.show();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\t// close open submenus when closing a top-level menu\r\n\t\t$('.dx-main-menu > li > a.dropdown-toggle').click(function()\r\n\t\t{\r\n\t\t\tif($(window).width() < 768)\r\n\t\t\t{\r\n\t\t\t\t// if user is closing menu, then hide submenus of it\r\n\t\t\t\tif($(this).attr('aria-expanded') == 'true')\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).next().find('.dropdown-menu:visible').attr('style', '');\r\n\t\t\t\t}\r\n\t\t\t\t// if user opens another menu, hide submenus of an already open menu\r\n\t\t\t\telse\r\n\t\t\t\t{\r\n\t\t\t\t\t$(this).parent().siblings('.open').find('.dropdown-submenu .dropdown-menu:visible').attr('style', '');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t$('.dx-main-menu').on('click', '.dropdown-submenu > a.dropdown-toggle', function(e)\r\n\t\t{\r\n\t\t\tif($(window).width() >= 768)\r\n\t\t\t{\r\n\t\t\t\te.stopPropagation();\r\n\t\t\t\t$(this).trigger('mouseenter');\r\n\t\t\t}\r\n\t\t});\r\n\t};\r\n\t\r\n\tvar hideSubmenus = function()\r\n\t{\r\n\t\tif($(window).width() > 768)\r\n\t\t{\r\n\t\t\t$('.dx-main-menu .dropdown-submenu .dropdown-menu:visible').attr('style', '');\r\n\t\t}\r\n\t};\r\n\t\r\n\tvar menu_ul = $('#navbar > ul');\r\n\tvar more_li = menu_ul.children('#more-items-wrap');\r\n\tvar more_ul = more_li.children('#more-items');\r\n\tvar more_li_width;\r\n\tvar widths = [];\r\n\t\r\n\t/**\r\n\t * Implementation of 'tabdrop' behavior for main navigation. When it is not enough place for all menu items,\r\n\t * display 'More' menu item, and move there all items that don't fit width of a container, and vice versa.\r\n\t */\r\n\tvar emulateTabdrop = function()\r\n\t{\r\n\t\t// extra small screen - remove 'more' item for collapsed menu to work\r\n\t\tif($(window).width() <= 768)\r\n\t\t{\r\n\t\t\tif(more_ul.children().length)\r\n\t\t\t{\r\n\t\t\t\tmore_ul.children().insertBefore(more_li).removeClass('dropdown-submenu');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tmore_li.hide();\r\n\t\t\t\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\t// small, medium and large screens\r\n\t\telse\r\n\t\t{\r\n\t\t\t// calculate widths\r\n\t\t\tif(!more_li_width)\r\n\t\t\t{\r\n\t\t\t\t// make sure that 'More' item is visible\r\n\t\t\t\tmore_li.show();\r\n\t\t\t\tmore_li_width = more_li.outerWidth();\r\n\t\t\t\t\r\n\t\t\t\t// calculate widths of all menu items except 'More' item\r\n\t\t\t\twidths = [];\r\n\t\t\t\tmenu_ul.children('li:not(:last-child)').each(function()\r\n\t\t\t\t{\r\n\t\t\t\t\twidths.push($(this).outerWidth());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// wdith of a container\r\n\t\tvar width = menu_ul.parent().innerWidth() - more_li_width;\r\n\t\tvar items = menu_ul.children('li:not(:last-child)');\r\n\t\tvar count = items.length;\r\n\t\t\r\n\t\t// sum of widths of all menu items\r\n\t\tvar items_width = 0;\r\n\t\t\r\n\t\tfor(var i = 0; i < count; i++)\r\n\t\t{\r\n\t\t\titems_width += widths[i];\r\n\t\t}\r\n\t\t\r\n\t\t// not all items are visible - hide redundant items\r\n\t\tif(items_width > width)\r\n\t\t{\r\n\t\t\tmore_li.show();\r\n\t\t\t\r\n\t\t\t// place redundant items under the 'More' item\r\n\t\t\twhile(items_width > width)\r\n\t\t\t{\r\n\t\t\t\tvar current = $(items[count - 1]);\r\n\t\t\t\titems_width -= widths[count - 1];\r\n\t\t\t\tcount--;\r\n\t\t\t\tcurrent = current.prependTo(more_ul);\r\n\t\t\t\t// if the moved item has child nodes, add class dropdown-submenu (mandatory)\r\n\t\t\t\tif(current.children('ul').length)\r\n\t\t\t\t{\r\n\t\t\t\t\tcurrent.addClass('dropdown-submenu');\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// all items are visible - get them out of the 'More' item and place back to the root level of the main menu\r\n\t\telse if(items_width < width)\r\n\t\t{\r\n\t\t\twhile(true)\r\n\t\t\t{\r\n\t\t\t\tif(count == widths.length)\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif(items_width + widths[count] >= width)\r\n\t\t\t\t{\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tvar current = more_ul.children().first();\r\n\t\t\t\titems_width += widths[count];\r\n\t\t\t\tcount++;\r\n\t\t\t\tcurrent.removeClass('dropdown-submenu').insertBefore(more_li);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tif(more_ul.children().length)\r\n\t\t{\r\n\t\t\tmore_li.is(':visible') || more_li.show();\r\n\t\t}\r\n\t\t\r\n\t\telse\r\n\t\t{\r\n\t\t\tmore_li.is(':hidden') || more_li.hide();\r\n\t\t}\r\n\t};\r\n\t\r\n\t/**\r\n\t * Inits horizontal menu page UI\r\n\t *\r\n\t * @returns {undefined}\r\n\t */\r\n\tvar initUI = function()\r\n\t{\r\n\t\t//hideErrorImages();\r\n\t\tsetActiveMenu();\r\n\t\t\r\n\t\tif((typeof dx_is_cssonly === 'undefined') || !dx_is_cssonly)\r\n\t\t{\r\n\t\t\tsetContentMargin();\r\n\t\t\tPageMain.addResizeCallback(setContentMargin);\r\n\t\t}\r\n\t\t\r\n\t\thandleScroll();\r\n\t\thandleTapEvent();\r\n\t\t\r\n\t\tPageMain.addResizeCallback(positionDIVs);\r\n\t\tPageMain.addResizeCallback(hideSubmenus);\r\n\t\t\r\n\t\tif((typeof dx_is_cssonly !== 'undefined') && dx_is_cssonly)\r\n\t\t{\r\n\t\t\temulateTabdrop();\r\n\t\t\tPageMain.addResizeCallback(emulateTabdrop);\r\n\t\t}\r\n\t};\r\n\t\r\n\treturn {\r\n\t\tinit: function()\r\n\t\t{\r\n\t\t\tinitUI();\r\n\t\t}\r\n\t};\r\n}();\r\n\r\n$(document).ready(function()\r\n{\r\n    HMenuUI.init();\r\n});","/**\r\n * JavaScript logic for horizontal menu forms UI\r\n * \r\n * @type _L4.Anonym$0|Function\r\n */\r\nvar HFormUI = function()\r\n{ \r\n    var handleFormClose = function(grid_id) {\r\n        $(\".dx-form-fullscreen-frame .dx-form-close-btn\").click(function() {\r\n            $(\"#td_form_data\").html(\"\");\r\n            $(\"#td_data\").show();\r\n            stop_executing(grid_id);\r\n        });\r\n    };\r\n    \r\n    /**\r\n     * Inits horizontal menu page UI\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var initUI = function(grid_id) {       \r\n       handleFormClose(grid_id);\r\n    };\r\n\r\n    return {\r\n        init: function(grid_id) {\r\n            initUI(grid_id);\r\n        }\r\n    };\r\n}();"]}