var SearchTop=function(){var e="",t="Nav atrasts neviens atbilstošs ieraksts.",i="Lūdzu, ievadiet vismaz trīs burtus, un tiks veikta dinamiskā darbinieku meklēšana.",n="Darbinieki",a="Meklē....",s=0,r=1,o=$("#quick-search-status"),c=function(){var e=$("#search_criteria").val().trim();if(""==e)return $(".dx-employees-quick-results").html(""),void o.html(i);if(e.length<3)return $(".dx-employees-quick-results").html(""),void o.html(i);var n="criteria="+e,s="ajax/employees";$(".dx-employees-quick-results").html(""),o.html(a);var r=new FormAjaxRequestIE9(s,"","",n);r.progress_info="",r.callback=function(e){e.html.indexOf("employee-list")!==-1?($(".dx-employees-quick-results").html(e.html),EmployeesLinks.init($("#dx-top-search-div").find(".employee-list"),l),o.html("")):o.html(t)},r.doRequest()},l=function(){$("#search_criteria").val("")},u=function(){$("#top_search a").each(function(){$(this).click(function(t){$("#search_title").html($(this).text()),$("#searchType").val($(this).text()),e=$(this).text(),$("#search_criteria").focus()})})},d=function(){$("#search_btn").click(function(){show_page_splash()})},p=function(){$("body").toggleClass("page-quick-sidebar-open"),s=0,$(".dx-employees-quick-results").html(""),o.html(i)},f=function(){$("#search_criteria").on("keyup",function(t){e==n?0==s&&1==r&&($("body").toggleClass("page-quick-sidebar-open"),s=1,""!=$("#search_criteria").val().trim()&&c()):1==s&&p()})},h=function(){$("a.close-quick-sidebar").click(function(){1==s&&($("body").toggleClass("page-quick-sidebar-open"),s=0)})},m=function(){$("#search_criteria").keyup(function(){s&&c()})},_=function(){$("#search_criteria").bind("paste",function(){e==n&&setTimeout(function(){c()},100)})},k=function(){var e=760;0==$("#employee_quick_css").length&&$("head").append('<style type="text/css" id="employee_quick_css"></style>');var t=$("#employee_quick_css");t.html(".page-quick-sidebar-wrapper{width:"+e+"px; right: -"+e+"px;}"),$.isFunction($.fn.slimScroll)&&($(".dx-employees-quick .slimScrollDiv").length&&$(".dx-employees-quick-results").slimScroll({destroy:!0}),$(".dx-employees-quick-results").slimScroll({height:$(".dx-employees-quick").height()+"px",position:"left",color:"#f1f4f7"}))},v=function(){if($(document).width()>990){if(r)return;var e=$("#dx-search-box-in-page").html();$("#dx-search-box-in-page").html(""),$("#dx-search-box-top-li").html(e),r=1,x()}else{if(!r)return;var e=$("#dx-top-search-form").parent().html();$("#dx-top-search-form").remove(),$("#dx-search-box-in-page").html(e),r=0,x(),1==s&&p()}},x=function(){u(),d(),k(),f(),h(),m(),_()},g=function(){var e=$("#dx-top-search-div");t=e.attr("trans_nothing_found"),i=e.attr("trans_default_info"),n=e.attr("trans_employees"),a=e.attr("trans_searching")},y=function(){g(),x();var t=$("#dx-top-search-div");$("#searchType").val(t.attr("trans_default")),e=t.attr("trans_default"),v(),PageMain.addResizeCallback(k),PageMain.addResizeCallback(v)};return{init:function(){y()}}}();$(document).ready(function(){$("[autofocus]:not(:focus)").eq(0).focus(),SearchTop.init()});var UserLinks=function(){var e=null,t=function(){var t=new FormData;t.append("pass_old",e.find("input[name='pass_old']").val()),t.append("pass_new1",e.find("input[name='pass_new1']").val()),t.append("pass_new2",e.find("input[name='pass_new2']").val());var i="/ajax/change_password",n=new FormAjaxRequest(i,"","",t);n.progress_info=DX_CORE.trans_data_processing,n.callback=function(e){notify_info(DX_CORE.trans_data_saved)},n.doRequest()},i=function(){e.validator({errors:{auto:"Nav norādīta vērtība!"},feedback:{success:"glyphicon-ok",error:"glyphicon-alert"}})},n=function(){$("a.dx-user-change-passw-link").click(function(){get_popup_item_by_id(0,"ajax/form_password",DX_CORE.trans_passw_form_title)})},a=function(){e.find(".dx-user-change-passw-btn").click(function(){t()})},s=function(){$.isFunction($.fn.validator)?i():$.getScript(getBaseUrl()+"plugins/validator/validator.js",i)},r=function(){n()},o=function(){0!=$(".dx-user-change-passw-form[dx_block_init='0']").length&&(e=$(".dx-user-change-passw-form"),a(),s(),e.attr("dx_block_init",1),setTimeout(function(){e.find("input[name='pass_old']").focus()},500))};return{init:function(){r()},initPasswForm:function(){o()}}}();$(document).ready(function(){UserLinks.init()}),$(document).ajaxComplete(function(e,t,i){UserLinks.initPasswForm()});