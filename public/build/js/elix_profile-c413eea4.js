!function(e){e.fn.FreeForm=function(t){var i=e.extend({},e.fn.FreeForm.defaults,t);return this.each(function(){new e.FreeForm(this,i)})},e.fn.FreeForm.defaults={editBtnSelector:".dx-edit-general",saveBtnSelector:".dx-save-general",cancelBtnSelector:".dx-cancel-general",names:[]},e.FreeForm=function(t,i){e.data(t,"FreeForm",this);var o=this;this.root=e(t),this.options=i,this.fields=e("[data-name]",this.root).filter(function(){if(0==o.options.names.length||o.options.names.indexOf(e(this).data("name"))!=-1)return!0}),this.originalData={},this.editButton=e(this.options.editBtnSelector,this.root),this.saveButton=e(this.options.saveBtnSelector,this.root),this.cancelButton=e(this.options.cancelBtnSelector,this.root),this.editButton.click(function(){o.edit()}),this.saveButton.click(function(){o.save()}),this.cancelButton.click(function(){o.cancel()})},e.extend(e.FreeForm.prototype,{edit:function(){var t=this,i={model:this.root.data("model"),item_id:this.root.data("item_id"),list_id:this.root.data("list_id"),fields:[]};this.fields.each(function(){t.originalData[e(this).data("name")]=e(this).html(),i.fields.push({name:e(this).data("name"),display:e(this).data("display")?e(this).data("display"):"raw"})}),show_page_splash(1),e.ajax({type:"POST",url:DX_CORE.site_url+"freeform/"+i.item_id+"/edit",dataType:"json",data:i,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);t.editButton.hide(),t.saveButton.show(),t.cancelButton.show();for(var o=0;o<i.fields.length;o++){var n=i.fields[o].name,a=i.fields[o].input,r=e('[data-name="'+n+'"]',t.root);r.length&&r.html(a)}hide_page_splash(1)},error:function(e,t,i){console.log(t),console.log(e),console.log(i)}})},save:function(){var t=this,i={},o=process_data_fields(this.root.attr("id"));o.append("model",this.root.data("model")),o.append("item_id",this.root.data("item_id")),o.append("list_id",this.root.data("list_id")),o.append("edit_form_id",this.root.data("form_id")),this.fields.each(function(){i[e(this).data("name")]={display:e(this).data("display")?e(this).data("display"):"raw"}}),o.append("field_metadata",JSON.stringify(i)),show_page_splash(1),e.ajax({type:"POST",url:DX_CORE.site_url+"freeform/"+this.root.data("item_id")+"?_method=PUT",dataType:"json",processData:!1,contentType:!1,data:o,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);t.editButton.show(),t.saveButton.hide(),t.cancelButton.hide();for(var o=0;o<i.fields.length;o++){var n=i.fields[o].name,a=i.fields[o].html,r=e('[data-name="'+n+'"]',t.root);r.length&&r.html(a)}hide_page_splash(1)},error:function(e,t,i){console.log(t),console.log(e),console.log(i)}})},cancel:function(){var t=this;this.editButton.show(),this.saveButton.hide(),this.cancelButton.hide(),this.fields.each(function(){e(this).html(t.originalData[e(this).data("name")])})}})}(jQuery),function(e){e.fn.InlineForm=function(t){var i=e.extend({},e.fn.InlineForm.defaults,t);return this.each(function(){new e.InlineForm(this,i)})},e.fn.InlineForm.defaults={beforeSave:null,afterSave:null,empl_search_page_url:"/search"},e.InlineForm=function(t,i){e.data(t,"InlineForm",this);var o=this;this.options=i,this.root=e(t),this.tabs=e(".tab-pane",this.root).not(".dx-grid-tab-pane"),this.fields=e("[data-name]",this.root),this.fieldNames=[],this.fields.each(function(){o.fieldNames.push(e(this).data("name"))}),this.originalTabs={},this.originalFields={},this.editButton=e(".dx-edit-profile",this.root),this.saveButton=e(".dx-save-profile",this.root),this.cancelButton=e(".dx-cancel-profile",this.root),this.deleteButton=e(".dx-delete-profile",this.root),this.requests={},this.onRequestSuccess=[],this.onRequestFailed=[],this.editButton.click(function(){o.edit()}),this.saveButton.click(function(){o.save()}),this.cancelButton.click(function(){o.cancel()}),this.deleteButton.click(function(){o.destroy()})},e.extend(e.InlineForm.prototype,{initRequest:function(e){this.requests={total:e,succeeded:0,failed:0},this.onRequestSuccess=[],this.onRequestFailed=[]},setRequestStatus:function(e){if(e?this.requests.succeeded++:this.requests.failed++,this.requests.total===this.requests.succeeded+this.requests.failed){if(0===this.requests.failed)for(var t=0;t<this.onRequestSuccess.length;t++)this.onRequestSuccess[t].func(this.onRequestSuccess[t].args);else for(var t=0;t<this.onRequestFailed.length;t++)this.onRequestFailed[t].func(this.onRequestFailed[t].args);hide_page_splash(1)}},storeOriginalData:function(){var t=this;this.fields=e("[data-name]",this.root),this.tabs.each(function(){t.originalTabs[e(this).data("tabTitle")]=e(this).html()}),this.fields.each(function(){t.originalFields[e(this).data("name")]=e(this).html()})},edit:function(){var t=this,i={list_id:this.root.data("list_id"),tab_list:[],field_list:this.fieldNames};this.storeOriginalData(),show_page_splash(1),e.ajax({type:"POST",url:DX_CORE.site_url+"inlineform/"+this.root.data("item_id")+"/edit",dataType:"json",data:i,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);t.editButton.hide();for(var o=e(e.parseHTML("<div>"+i.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=e(o[n]),r=e('[data-tab-title="'+a.data("tabTitle")+'"]',t.root);r.length&&r.html(a.html())}for(var s in i.fields)e('[data-name="'+s+'"]').html(i.fields[s]);1==t.root.data("has_users_documents_access")&&window.DxEmpPersDocs.toggleDisable(!1),hide_page_splash(1),e(".dx-stick-footer").show()},error:function(e,t,i){console.log(t),console.log(e),hide_page_splash(1)}})},save:function(t){var i=this;if(!t||!t.encryptionFinished||0==t.encryptionFinished){var o=e("input.dx-crypto-field,textarea.dx-crypto-field,input.dx-crypto-field-file",this.root);return t&&void 0!=t||(t={}),void window.DxCrypto.encryptFields(o,t,function(e){i.save(e)})}var n=process_data_fields(this.root.attr("id"));n.append("item_id",this.root.data("item_id")),n.append("list_id",this.root.data("list_id")),n.append("edit_form_id",this.root.data("form_id")),n.append("redirect_url",this.root.data("redirect_url")),n.append("field_list",JSON.stringify(this.fieldNames));var a=DX_CORE.site_url+"inlineform";"create"!=this.root.data("mode")&&(a+="/"+this.root.data("item_id")+"?_method=PUT"),show_page_splash(1),e.ajax({type:"POST",url:a,dataType:"json",processData:!1,contentType:!1,data:n,success:function(t){if("undefined"!=typeof t.success&&0==t.success)return notify_err(t.error),void hide_page_splash(1);if("create"==i.root.data("mode"))return void(1==i.root.data("has_users_documents_access")?(window.DxEmpPersDocs.userId=t.item_id,window.DxEmpPersDocs.onClickSaveDocs(function(){hide_page_splash(1),e(".dx-stick-footer").hide(),window.location=t.redirect})):(hide_page_splash(1),e(".dx-stick-footer").hide(),window.location=t.redirect));if(1==i.root.data("has_users_documents_access"))window.DxEmpPersDocs.onClickSaveDocs(function(){window.DxEmpPersDocs.toggleDisable(!0),i.editButton.show();for(var o=e(e.parseHTML("<div>"+t.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=e(o[n]),r=e('[data-tab-title="'+a.data("tabTitle")+'"]',i.root);r.length&&r.html(a.html())}i.options.afterSave&&i.options.afterSave(),hide_page_splash(1),e(".dx-stick-footer").hide()});else{i.editButton.show();for(var o=e(e.parseHTML("<div>"+t.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=e(o[n]),r=e('[data-tab-title="'+a.data("tabTitle")+'"]',i.root);r.length&&r.html(a.html())}for(var s in t.fields)e('[data-name="'+s+'"]').html(t.fields[s]);i.options.afterSave&&i.options.afterSave(),hide_page_splash(1),e(".dx-stick-footer").hide()}},error:function(e,t,i){console.log(e),console.log(i)}})},cancel:function(){if("create"==this.root.data("mode"))return show_page_splash(1),void(window.location=this.options.empl_search_page_url);var t=this;show_page_splash(1),e.ajax({type:"GET",url:DX_CORE.site_url+"form/unlock_item/"+e(".dx-employee-profile").data("list_id")+"/"+e(".dx-employee-profile").data("item_id"),dataType:"json",success:function(i){t.editButton.show();for(var o in t.originalTabs)t.tabs.filter('[data-tab-title="'+o+'"]').html(t.originalTabs[o]);for(var n in t.originalFields)t.fields.filter('[data-name="'+n+'"]').html(t.originalFields[n]);e(".dx-stick-footer").hide(),1==t.root.data("has_users_documents_access")&&window.DxEmpPersDocs.cancelEditMode(),hide_page_splash(1)}})},destroy:function(){if(confirm(Lang.get("frame.confirm_delete"))){var t={edit_form_id:this.root.data("form_id"),item_id:this.root.data("item_id")};show_page_splash(1),e.ajax({type:"POST",url:DX_CORE.site_url+"inlineform/"+this.root.data("item_id")+"?_method=DELETE",dataType:"json",data:t,success:function(e){return"undefined"!=typeof e.success&&0==e.success?(notify_err(e.error),void hide_page_splash(1)):void window.history.back()},error:function(e,t,i){console.log(t),console.log(e),hide_page_splash(1)}})}}})}(jQuery),window.DxEmpPersDocs=window.DxEmpPersDocs||{rowCount:0,userId:0,dateFormat:"",locale:"en",empDocListId:0,empDocFldId:0,isInit:!1,viewClone:"",callbackOnInitiSuccess:function(e){},callbackOnSaveSuccess:function(e){},callbackOnError:function(e){},init:function(e){e?window.DxEmpPersDocs.callbackOnInitiSuccess=e:window.DxEmpPersDocs.callbackOnInitiSuccess=function(){},window.DxEmpPersDocs.userId=""==$("#dx-emp-pers-docs-panel").attr("data-user-id")?0:$("#dx-emp-pers-docs-panel").attr("data-user-id"),window.DxEmpPersDocs.dateFormat=$("#dx-emp-pers-docs-panel").attr("data-date-format"),window.DxEmpPersDocs.locale=$("#dx-emp-pers-docs-panel").attr("data-locale"),window.DxEmpPersDocs.empDocListId=$("#dx-emp-pers-docs-panel").attr("data-emp-docs-list-id"),window.DxEmpPersDocs.empDocFldId=$("#dx-emp-pers-docs-panel").attr("data-emp-docs-fld-id"),$("#dx-emp-pers-docs-country").change(window.DxEmpPersDocs.onChangeCountry),window.DxEmpPersDocs.loadEmployeeData()},enterEditMode:function(){window.DxEmpPersDocs.viewClone=$("#dx-emp-pers-docs-panel").clone(!0,!0)},cancelEditMode:function(){$("#dx-emp-pers-docs-panel").replaceWith(window.DxEmpPersDocs.viewClone),window.DxEmpPersDocs.viewClone=null,window.DxEmpPersDocs.toggleDisable(!0)},loadEmployeeData:function(){$.ajax({url:"/employee/personal_docs/get/employee_docs/"+window.DxEmpPersDocs.userId,type:"get",success:window.DxEmpPersDocs.onSuccessLoadEmployeeData,error:window.DxEmpPersDocs.onAjaxError})},onSuccessLoadEmployeeData:function(e){if(""!=e)for(var t=JSON.parse(e),i=0;i<t.length;i++)window.DxEmpPersDocs.createNewDocRow(!1,t[i]);$("#dx-emp-pers-docs-country").trigger("change")},createNewDocRow:function(e,t){var i=$($("#dx-emp-pers-docs-new-row").html());i=e?window.DxEmpPersDocs.setDocTypeValue(i,t):window.DxEmpPersDocs.setValues(i,t),e?$("#dx-emp-pers-docs-table").append(i):$("#dx-emp-pers-docs-table-history").append(i),window.DxEmpPersDocs.bindDocRowEvenets(i),window.DxEmpPersDocs.rowCount++},initValidToDatePicker:function(e,t){var i=e.find(".dx-emp-pers-docs-validto-input");return i.attr("id","dx-emp-pers-docs-validto-input-"+window.DxEmpPersDocs.rowCount),i.val(t),i.datetimepicker({lang:window.DxEmpPersDocs.locale,format:window.DxEmpPersDocs.dateFormat,timepicker:0,dayOfWeekStart:1,closeOnDateSelect:!0}),e.find(".dx-emp-pers-docs-validto-input-calc").click({picker_num:window.DxEmpPersDocs.rowCount},function(e){jQuery("#dx-emp-pers-docs-validto-input-"+e.data.picker_num).datetimepicker("show")}),e},setDocTypeValue:function(e,t){return e=window.DxEmpPersDocs.initValidToDatePicker(e,""),e.attr("id","dx-emp-pers-docs-row-"+t.id),e.find(".dx-emp-pers-docs-type-input").val(t.id),e.find(".dx-emp-pers-docs-type-label").html(t.name),e},setValues:function(e,t){return e=window.DxEmpPersDocs.initValidToDatePicker(e,t.valid_to),e.attr("id","dx-emp-pers-docs-row-"+t.doc_id),e.find(".dx-emp-pers-docs-id-input").val(t.id),e.find(".dx-emp-pers-docs-type-input").val(t.doc_id),e.find(".dx-emp-pers-docs-type-label").html(t.personal_document.name),e.find(".dx-emp-pers-docs-docnr-input").val(t.doc_nr),e.find(".dx-emp-pers-docs-publisher-input").val(t.publisher),window.DxEmpPersDocs.setFileValue(e,t.id,t.file_name),e},setFileValue:function(e,t,i){if(i&&null!=i){var o="<a href='JavaScript: download_file("+t+" , "+window.DxEmpPersDocs.empDocListId+", "+window.DxEmpPersDocs.empDocFldId+");'>"+i+"</a>";e.find(".dx-emp-pers-docs-file-input-download").html(o),e.find(".dx-emp-pers-docs-file-input-isset").val(1)}},clearDocRow:function(e){var t=$(e.target).parents(".dx-emp-pers-docs-row");t.find(".dx-emp-pers-docs-id-input").val(0),t.find(".dx-emp-pers-docs-docnr-input").val(""),t.find(".dx-emp-pers-docs-validto-input").val(""),t.find(".dx-emp-pers-docs-publisher-input").val(""),t.find(".dx-emp-pers-docs-file-input-remove-btn").trigger("click")},getDataForSave:function(){for(var e=$("#dx-emp-pers-docs-table .dx-emp-pers-docs-row"),t={user_id:window.DxEmpPersDocs.userId,rows:[]},i=new FormData,o=0;o<e.length;o++){var n=$(e[o]),a={};a.id=n.find(".dx-emp-pers-docs-id-input").val(),a.document_type=n.find(".dx-emp-pers-docs-type-input").val(),a.publisher=n.find(".dx-emp-pers-docs-publisher-input").val(),a.valid_to=n.find(".dx-emp-pers-docs-validto-input").val(),a.doc_nr=n.find(".dx-emp-pers-docs-docnr-input").val(),a.file_remove=""===$.trim(n.find(".dx-emp-pers-docs-file-input-download").html());var r=n.find(".dx-emp-pers-docs-file-input-file").prop("files")[0];i.append("file"+o,r),t.rows.push(a)}return i.append("doc_country_id",$("#dx-emp-pers-docs-country").val()),i.append("data",JSON.stringify(t)),i},bindDocRowEvenets:function(e){e.find(".dx-emp-pers-docs-clear-btn").click(window.DxEmpPersDocs.clearDocRow)},onChangeCountry:function(e){var t=$(e.target).val();$.ajax({url:DX_CORE.site_url+"employee/personal_docs/get/docs_by_country/"+t,type:"get",success:window.DxEmpPersDocs.onSuccessChangeCountry,error:window.DxEmpPersDocs.onAjaxError})},onSuccessChangeCountry:function(e){var t=JSON.parse(e);window.DxEmpPersDocs.drawRows(t),window.DxEmpPersDocs.finishInit()},drawRows:function(e){$("#dx-emp-pers-docs-table").contents().appendTo("#dx-emp-pers-docs-table-history");for(var t=0;t<e.length;t++){var i=e[t],o=$("#dx-emp-pers-docs-row-"+i.id);o.length>0?o.appendTo("#dx-emp-pers-docs-table"):window.DxEmpPersDocs.createNewDocRow(!0,i)}$("#dx-emp-pers-docs-table").find("[data-tooltip-title]").each(function(e,t){$(t).attr("title",$(t).data("tooltip-title")),$(t).tooltip()})},finishInit:function(){window.DxEmpPersDocs.isInit||(window.DxEmpPersDocs.isInit=!0,0==window.DxEmpPersDocs.userId?window.DxEmpPersDocs.toggleDisable(!1):window.DxEmpPersDocs.toggleDisable(!0),window.DxEmpPersDocs.callbackOnInitiSuccess())},onClickSaveDocs:function(e,t){e?window.DxEmpPersDocs.callbackOnSaveSuccess=e:window.DxEmpPersDocs.callbackOnSaveSuccess=function(){},t?window.DxEmpPersDocs.callbackOnError=t:window.DxEmpPersDocs.callbackOnError=function(){};var i=window.DxEmpPersDocs.getDataForSave();$.ajax({url:DX_CORE.site_url+"employee/personal_docs/save",data:i,type:"post",processData:!1,dataType:"json",contentType:!1,success:window.DxEmpPersDocs.onSuccessSave,error:window.DxEmpPersDocs.onAjaxError})},onSuccessSave:function(e){for(var t=0;t<e.length;t++){var i=e[t],o=$("#dx-emp-pers-docs-row-"+i.doc_id);o.length>0&&(o.find(".dx-emp-pers-docs-id-input").val(i.id),o.find(".dx-emp-pers-docs-file-input-remove-btn").trigger("click"),window.DxEmpPersDocs.setFileValue(o,i.id,i.file_name))}$("#dx-emp-pers-docs-table-history").empty(),window.DxEmpPersDocs.callbackOnSaveSuccess()},onAjaxError:function(e){window.DxEmpPersDocs.finishInit(),window.DxEmpPersDocs.callbackOnError()},toggleDisable:function(e){e||window.DxEmpPersDocs.enterEditMode();for(var t=$("#dx-emp-pers-docs-table .dx-emp-pers-docs-row"),i=0;i<t.length;i++){var o=$(t[i]);o.find(".dx-emp-pers-docs-publisher-input").prop("disabled",e),o.find(".dx-emp-pers-docs-validto-input").prop("disabled",e),o.find(".dx-emp-pers-docs-validto-input-calc").prop("disabled",e),o.find(".dx-emp-pers-docs-docnr-input").prop("disabled",e),e?(o.find(".dx-emp-pers-docs-file-input-set-btn").hide(),o.find(".dx-emp-pers-docs-file-input-file").prop("files")[0]&&o.find(".dx-emp-pers-docs-file-input-remove-btn").hide(),o.find(".dx-emp-pers-docs-clear-btn").hide()):(o.find(".dx-emp-pers-docs-validto-input").datetimepicker("destroy"),o.find(".dx-emp-pers-docs-validto-input").datetimepicker({lang:window.DxEmpPersDocs.locale,format:window.DxEmpPersDocs.dateFormat,timepicker:0,dayOfWeekStart:1,closeOnDateSelect:!0}),o.find(".dx-emp-pers-docs-file-input-set-btn").show(),o.find(".dx-emp-pers-docs-file-input-file").prop("files")[0]&&o.find(".dx-emp-pers-docs-file-input-remove-btn").show(),o.find(".dx-emp-pers-docs-clear-btn").show())}$("#dx-emp-pers-docs-country").prop("disabled",e)}},window.DxEmpNotes=window.DxEmpNotes||{userId:0,isLoaded:!1,isSending:!1,chatFormColorDefault:"white",init:function(e){window.DxEmpNotes.userId=e},loadView:function(){window.DxEmpNotes.isLoaded||(show_page_splash(1),$.ajax({url:DX_CORE.site_url+"employee/notes/get/view/"+window.DxEmpNotes.userId,type:"get",success:window.DxEmpNotes.onLoadViewSuccess,error:function(e){hide_page_splash(1)}}))},onLoadViewSuccess:function(e){$("#dx-tab_notes").html(e),window.DxEmpNotes.chatFormColorDefault=$(".dx-emp-notes-chat-form").css("background-color"),$(".dx-emp-notes-btn").click(window.DxEmpNotes.onNoteEnter),$(".dx-emp-notes-input-text").keyup(function(e){13==e.keyCode&&window.DxEmpNotes.onNoteEnter()}),$(".dx-emp-notes-chat").on("click",".dx-emp-notes-btn-link-edit",{},window.DxEmpNotes.onEditClick),$(".dx-emp-notes-chat").on("click",".dx-emp-notes-btn-link-delete",{},window.DxEmpNotes.onDeleteClick),$(".dx-emp-notes-btn-whosee").popover(),window.DxEmpNotes.isLoaded=!0,hide_page_splash(1)},getDataForSave:function(){var e={};return e.note_id=$(".dx-emp-notes-input-id").val(),e.user_id=window.DxEmpNotes.userId,e.note_text=$(".dx-emp-notes-input-text").val(),e},onNoteEnter:function(){if(!window.DxEmpNotes.isSending){window.DxEmpNotes.showLoading();var e=window.DxEmpNotes.getDataForSave();$.ajax({url:DX_CORE.site_url+"employee/notes/save",data:e,type:"post",success:window.DxEmpNotes.onSuccessSave,error:window.DxEmpNotes.onAjaxError})}},onEditClick:function(e){var t=$(e.target),i=t.closest(".message").find(".dx-emp-notes-edit-id").val(),o=t.closest(".message").find(".dx-emp-notes-edit-body").html();$(".dx-emp-notes-input-id").val(i),$(".dx-emp-notes-input-text").val(o),$(".dx-emp-notes-input-text").focus();var n=$(".dx-emp-notes-chat-form");n.animate({backgroundColor:"#7bb6de"},"slow",function(){n.animate({backgroundColor:window.DxEmpNotes.chatFormColorDefault},"slow")})},onDeleteClick:function(e){var t=$(e.target),i=t.closest(".message").find(".dx-emp-notes-edit-id").val();PageMain.showConfirm(window.DxEmpNotes.onDeleteConfirm,i,Lang.get("empl_profile.notes.delete_note_title"),Lang.get("empl_profile.notes.delete_note_text"),Lang.get("form.btn_delete"),"")},onDeleteConfirm:function(e){if(!window.DxEmpNotes.isSending){window.DxEmpNotes.showLoading();var t={note_id:e};$.ajax({url:DX_CORE.site_url+"employee/notes/delete",data:t,type:"delete",success:window.DxEmpNotes.onSuccessDelete,error:window.DxEmpNotes.onAjaxError})}},showLoading:function(){window.DxEmpNotes.isSending=!0,show_page_splash(1)},hideLoading:function(){window.DxEmpNotes.isSending=!1,hide_page_splash(1)},onSuccessDelete:function(e){e&&$(".dx-emp-notes-edit-id[value="+e+"]").closest("li").remove(),window.DxEmpNotes.hideLoading()},onSuccessSave:function(e){var t=$(".dx-emp-notes-input-id").val();t&&$(".dx-emp-notes-edit-id[value="+t+"]").closest("li").remove(),$(".dx-emp-notes-input-id").val(""),$(".dx-emp-notes-input-text").val(""),window.DxEmpNotes.hideLoading(),e.view&&($(".dx-emp-notes-chat").prepend($(e.view).fadeIn()),$(".dx-emp-notes-btn-whosee").popover())},onAjaxError:function(e){window.DxEmpNotes.hideLoading()}},window.DxEmpTimeoff=window.DxEmpTimeoff||{userId:0,isLoaded:!1,isSending:!1,isTableInit:!1,isChartInit:!1,doTableRefresh:!0,doChartRefresh:!0,currentTab:0,dateFrom:"",dateTo:"",timeoff:1,timeoffTitle:"",timeoffIsAccrualHours:"",dateFormat:"",workingDayH:"",init:function(e){window.DxEmpTimeoff.userId=e},getFilterParams:function(){return window.DxEmpTimeoff.userId+"/"+window.DxEmpTimeoff.timeoff+"/"+window.DxEmpTimeoff.dateFrom/1e3+"/"+window.DxEmpTimeoff.dateTo/1e3},loadView:function(){window.DxEmpTimeoff.isLoaded||(window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/view/"+window.DxEmpTimeoff.userId,type:"get",success:window.DxEmpTimeoff.onLoadViewSuccess,error:function(e){window.DxEmpTimeoff.hideLoading()}}))},onLoadViewSuccess:function(e){$("#dx-tab_timeoff").html(e),window.DxEmpTimeoff.workingDayH=$("#dx-emp-timeoff-panel").data("working_day_h"),window.DxEmpTimeoff.dateFormat=$("#dx-emp-timeoff-panel").data("date_format").toUpperCase(),window.DxEmpTimeoff.dateFrom=new Date($("#dx-emp-timeoff-panel").data("date_from")),window.DxEmpTimeoff.dateTo=new Date($("#dx-emp-timeoff-panel").data("date_to")),window.DxEmpTimeoff.timeoff=$("#dx-emp-timeoff-panel").data("timeoff"),window.DxEmpTimeoff.timeoffTitle=$("#dx-emp-timeoff-panel").data("timeoff_title"),window.DxEmpTimeoff.timeoffIsAccrualHours=$("#dx-emp-timeoff-panel").data("is_accrual_hours"),$("#dx-tab_timeoff [data-counter='counterup']").counterUp({delay:10,time:700}),$(".dx-accrual-calc").click(function(){window.DxEmpTimeoff.showLoading();var e=$(this);$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/calculate/"+window.DxEmpTimeoff.userId+"/"+e.data("timeoff"),type:"get",success:function(t){window.DxEmpTimeoff.onCalculateSuccess(e,t)}})}),$(".dx-accrual-delete").click(function(){PageMain.showConfirm(window.DxEmpTimeoff.deleteCalculation,$(this),Lang.get("form.modal_confirm_title"),Lang.get("empl_profile.timeoff.delete_confirm"),Lang.get("form.btn_delete"),Lang.get("form.btn_cancel"))}),$(".dx-accrual-policy").click(function(){window.DxEmpTimeoff.showLoading(),view_list_item("form",$(this).data("policy-id"),$(this).data("policy-list-id"),$(this).data("policy-user-field-id"),window.DxEmpTimeoff.userId,"","")}),$(".dx-emp-timeoff-sel-timeoff").click(window.DxEmpTimeoff.timeoffSelect),$(".dx-emp-timeoff-tab-chart-btn").click(function(){window.DxEmpTimeoff.switchTab(0)}),$(".dx-emp-timeoff-tab-table-btn").click(function(){window.DxEmpTimeoff.switchTab(1)}),window.DxEmpTimeoff.initFilterDatePicker(),window.DxEmpTimeoff.reloadTabData(),window.DxEmpTimeoff.isLoaded=!0},onCalculateSuccess:function(e,t){var i=e.closest("div.widget-thumb"),o=i.find(".widget-thumb-body-stat").first();o.attr("data-value",t.balance),o.html(t.balance),i.find(".widget-thumb-subtitle").first().html(t.unit+' <span style="font-size: 10px">'+Lang.get("empl_profile.timeoff.available")+"</span>"),o.counterUp({delay:10,time:700}),window.DxEmpTimeoff.timeoff==e.data("timeoff")?window.DxEmpTimeoff.setDataRefreshRequest():window.DxEmpTimeoff.hideLoading()},deleteCalculation:function(e){window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/delete_calculated/"+window.DxEmpTimeoff.userId+"/"+e.data("timeoff"),type:"get",success:function(t){window.DxEmpTimeoff.onCalculateSuccess(e,t)}})},setDataRefreshRequest:function(){window.DxEmpTimeoff.doChartRefresh=!0,window.DxEmpTimeoff.doTableRefresh=!0,window.DxEmpTimeoff.reloadTabData()},switchTab:function(e){window.DxEmpTimeoff.currentTab=e,$("#dx-emp-timeoff-chart-tooltip").hide(),window.DxEmpTimeoff.reloadTabData()},reloadTabData:function(){0===window.DxEmpTimeoff.currentTab?window.DxEmpTimeoff.loadChart():window.DxEmpTimeoff.loadTable()},loadTable:function(){window.DxEmpTimeoff.isTableInit?window.DxEmpTimeoff.doTableRefresh&&window.DxEmpTimeoff.refreshDataTable():(window.DxEmpTimeoff.initDataTable(),window.DxEmpTimeoff.isTableInit=!0),window.DxEmpTimeoff.doTableRefresh=!1},loadChart:function(){window.DxEmpTimeoff.isChartInit?window.DxEmpTimeoff.doChartRefresh&&window.DxEmpTimeoff.refreshChart():(window.DxEmpTimeoff.initChart(),window.DxEmpTimeoff.isChartInit=!0),window.DxEmpTimeoff.doChartRefresh=!1},initDataTable:function(){window.DxEmpTimeoff.dataTable||(window.DxEmpTimeoff.dataTable=$("#dx-empt-datatable-timeoff").DataTable({serverSide:!0,searching:!1,order:[[0,"desc"]],ajax:DX_CORE.site_url+"employee/timeoff/get/table/"+window.DxEmpTimeoff.getFilterParams(),columns:[{data:"calc_date",name:"calc_date"},{data:"from_date",name:"from_date"},{data:"to_date",name:"to_date"},{data:"timeoff_record_type.title",name:"timeoffRecordType.title"},{data:"notes",name:"notes"},{data:"amount",name:"amount"},{data:"balance",name:"balance"}],fnPreDrawCallback:function(){window.DxEmpTimeoff.showLoading()},fnDrawCallback:function(){window.DxEmpTimeoff.hideLoading()}}))},refreshDataTable:function(){var e=DX_CORE.site_url+"employee/timeoff/get/table/"+window.DxEmpTimeoff.getFilterParams();window.DxEmpTimeoff.dataTable.ajax.url(e).load()},initChart:function(){window.DxEmpTimeoff.showLoading(),$("<div id='dx-emp-timeoff-chart-tooltip'></div>").appendTo("body"),$("#dx-emp-timeoff-chart").bind("plothover",window.DxEmpTimeoff.onPlotHover),window.DxEmpTimeoff.refreshChart()},refreshChart:function(){window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/chart/"+window.DxEmpTimeoff.getFilterParams(),type:"get",success:window.DxEmpTimeoff.onGetChartDataSuccess,error:window.DxEmpTimeoff.onAjaxError})},getUnit:function(){return 1==window.DxEmpTimeoff.timeoffIsAccrualHours?Lang.get("calendar.hours"):Lang.get("calendar.days")},loadTotalData:function(e){if(e)if(e[0]){window.DxEmpTimeoff.timeoffIsAccrualHours=e[0].is_accrual_hours;var t=window.DxEmpTimeoff.getUnit();$("#dx-emp-timeoff-period-balance").html(window.DxEmpTimeoff.calculateChartHours(e[0].balance)+" "+t),$("#dx-emp-timeoff-period-accrued").html(window.DxEmpTimeoff.calculateChartHours(e[0].accrued)+" "+t),$("#dx-emp-timeoff-period-used").html(window.DxEmpTimeoff.calculateChartHours(e[0].used)+" "+t)}else $("#dx-emp-timeoff-period-balance").html(0),$("#dx-emp-timeoff-period-accrued").html(0),$("#dx-emp-timeoff-period-used").html(0)},calculateChartHours:function(e){return 1==window.DxEmpTimeoff.timeoffIsAccrualHours?e:Math.round(100*(e/window.DxEmpTimeoff.workingDayH+1e-5))/100},onGetChartDataSuccess:function(e){window.DxEmpTimeoff.loadTotalData(e.total);for(var t=[],i=[],o=[],n=[],a=0;a<e.res.length;a++){var r=e.res[a];n.push([a,r.calc_date_year+"/"+r.calc_date_month]),Number(r.used)>0&&t.push([a,window.DxEmpTimeoff.calculateChartHours(r.used)]),Number(r.accrued)>0&&i.push([a,window.DxEmpTimeoff.calculateChartHours(r.accrued)]),o.push([a,window.DxEmpTimeoff.calculateChartHours(r.balance)])}$.plot("#dx-emp-timeoff-chart",[{data:t,bars:{show:!0,barWidth:.4,align:"left"},color:"#E7505A",label:Lang.get("empl_profile.timeoff.used")},{data:i,bars:{show:!0,barWidth:.4,align:"right"},color:"#26C281",label:Lang.get("empl_profile.timeoff.accrued")},{data:o,lines:{show:!0},points:{show:!0},color:"#3598DC",label:Lang.get("empl_profile.timeoff.balance"),animator:{start:100,steps:e.res.length,duration:1e3,direction:"right"}}],{axisLabels:{show:!0},yaxes:[{axisLabel:window.DxEmpTimeoff.getUnit()}],xaxis:{ticks:n},grid:{hoverable:!0}}),window.DxEmpTimeoff.hideLoading()},onPlotHover:function(e,t,i){if(i){var o=i.datapoint[1].toFixed(2);$("#dx-emp-timeoff-chart-tooltip").html(i.series.label+": "+o+" "+window.DxEmpTimeoff.getUnit()).css({top:t.pageY+20,left:t.pageX+5}).fadeIn(200)}else $("#dx-emp-timeoff-chart-tooltip").hide()},initFilterDatePicker:function(){$(".dx-emp-timeoff-filter-year-btn").click(function(e){$("#dx-emp-timeoff-filter-year-input").data("daterangepicker").toggle()}),$("#dx-emp-timeoff-filter-year-input").daterangepicker({locale:{format:window.DxEmpTimeoff.dateFormat,separator:" - ",applyLabel:Lang.get("date_range.btn_set"),cancelLabel:Lang.get("date_range.btn_cancel"),fromLabel:Lang.get("date_range.lbl_from"),toLabel:Lang.get("date_range.lbl_to"),customRangeLabel:Lang.get("date_range.lbl_interval"),daysOfWeek:[Lang.get("date_range.d_7"),Lang.get("date_range.d_1"),Lang.get("date_range.d_2"),Lang.get("date_range.d_3"),Lang.get("date_range.d_4"),Lang.get("date_range.d_5"),Lang.get("date_range.d_6")],monthNames:[Lang.get("date_range.m_jan"),Lang.get("date_range.m_feb"),Lang.get("date_range.m_mar"),Lang.get("date_range.m_apr"),Lang.get("date_range.m_may"),Lang.get("date_range.m_jun"),Lang.get("date_range.m_jul"),Lang.get("date_range.m_aug"),Lang.get("date_range.m_sep"),Lang.get("date_range.m_oct"),Lang.get("date_range.m_nov"),Lang.get("date_range.m_dec")],firstDay:1},startDate:window.DxEmpTimeoff.dateFrom,endDate:window.DxEmpTimeoff.dateTo,showDropdowns:!0},window.DxEmpTimeoff.yearSelect)},yearSelect:function(e,t,i){window.DxEmpTimeoff.dateFrom=e,window.DxEmpTimeoff.dateTo=t,$(".dx-emp-timeoff-curr-year").html(e.format(window.DxEmpTimeoff.dateFormat)+" - "+t.format(window.DxEmpTimeoff.dateFormat)),window.DxEmpTimeoff.setDataRefreshRequest()},timeoffSelect:function(e){var t=$(e.target);window.DxEmpTimeoff.timeoff=t.data("value"),window.DxEmpTimeoff.timeoffTitle=t.data("title"),window.DxEmpTimeoff.timeoffIsAccrualHours=t.data("is_accrual_hours"),$(".dx-emp-timeoff-curr-timeoff").html(window.DxEmpTimeoff.timeoffTitle),window.DxEmpTimeoff.setDataRefreshRequest()},showLoading:function(){window.DxEmpTimeoff.inProgressCount++,show_page_splash(1)},hideLoading:function(){window.DxEmpTimeoff.isSending=!1,hide_page_splash(1)},onAjaxError:function(e){window.DxEmpTimeoff.hideLoading()}},!function(e){"use strict";e.fn.counterUp=function(t){var i=e.extend({time:400,delay:10},t);return this.each(function(){var t=e(this),o=i,n=function(){var e=o.time/o.delay,i=t.attr("data-value"),n=[i],a=/[0-9]+,[0-9]+/.test(i);i=i.replace(/,/g,"");for(var r=(/^[0-9]+$/.test(i),/^[0-9]+\.[0-9]+$/.test(i)),s=r?(i.split(".")[1]||[]).length:0,l=e;l>=1;l--){var d=parseInt(i/e*l);if(r&&(d=parseFloat(i/e*l).toFixed(s)),a)for(;/(\d+)(\d{3})/.test(d.toString());)d=d.toString().replace(/(\d+)(\d{3})/,"$1,$2");n.unshift(d)}t.data("counterup-nums",n),t.text("0");var c=function(){t.text(t.data("counterup-nums").shift()),t.data("counterup-nums").length?setTimeout(t.data("counterup-func"),o.delay):(delete t.data("counterup-nums"),t.data("counterup-nums",null),t.data("counterup-func",null))};t.data("counterup-func",c),setTimeout(t.data("counterup-func"),o.delay)};t.waypoint(n,{offset:"100%",triggerOnce:!0})})}}(jQuery),function(){var e=[].indexOf||function(e){for(var t=0,i=this.length;t<i;t++)if(t in this&&this[t]===e)return t;return-1},t=[].slice;!function(e,t){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(i){return t(i,e)}):t(e.jQuery,e)}(this,function(i,o){var n,a,r,s,l,d,c,f,p,h,u,m,x,g,w,v;return n=i(o),f=e.call(o,"ontouchstart")>=0,s={horizontal:{},vertical:{}},l=1,c={},d="waypoints-context-id",u="resize.waypoints",m="scroll.waypoints",x=1,g="waypoints-waypoint-ids",w="waypoint",v="waypoints",a=function(){function e(e){var t=this;this.$element=e,this.element=e[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:e.scrollLeft(),y:e.scrollTop()},this.waypoints={horizontal:{},vertical:{}},e.data(d,this.id),c[this.id]=this,e.bind(m,function(){var e;if(!t.didScroll&&!f)return t.didScroll=!0,e=function(){return t.doScroll(),t.didScroll=!1},o.setTimeout(e,i[v].settings.scrollThrottle)}),e.bind(u,function(){var e;if(!t.didResize)return t.didResize=!0,e=function(){return i[v]("refresh"),t.didResize=!1},o.setTimeout(e,i[v].settings.resizeThrottle)})}return e.prototype.doScroll=function(){var e,t=this;return e={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||e.vertical.oldScroll&&e.vertical.newScroll||i[v]("refresh"),i.each(e,function(e,o){var n,a,r;return r=[],a=o.newScroll>o.oldScroll,
n=a?o.forward:o.backward,i.each(t.waypoints[e],function(e,t){var i,n;return o.oldScroll<(i=t.offset)&&i<=o.newScroll?r.push(t):o.newScroll<(n=t.offset)&&n<=o.oldScroll?r.push(t):void 0}),r.sort(function(e,t){return e.offset-t.offset}),a||r.reverse(),i.each(r,function(e,t){if(t.options.continuous||e===r.length-1)return t.trigger([n])})}),this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.refresh=function(){var e,t,o,n=this;return o=i.isWindow(this.element),t=this.$element.offset(),this.doScroll(),e={horizontal:{contextOffset:o?0:t.left,contextScroll:o?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:o?0:t.top,contextScroll:o?0:this.oldScroll.y,contextDimension:o?i[v]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(e,function(e,t){return i.each(n.waypoints[e],function(e,o){var n,a,r,s,l;if(n=o.options.offset,r=o.offset,a=i.isWindow(o.element)?0:o.$element.offset()[t.offsetProp],i.isFunction(n)?n=n.apply(o.element):"string"==typeof n&&(n=parseFloat(n),o.options.offset.indexOf("%")>-1&&(n=Math.ceil(t.contextDimension*n/100))),o.offset=a-t.contextOffset+t.contextScroll-n,(!o.options.onlyOnScroll||null==r)&&o.enabled)return null!==r&&r<(s=t.oldScroll)&&s<=o.offset?o.trigger([t.backward]):null!==r&&r>(l=t.oldScroll)&&l>=o.offset?o.trigger([t.forward]):null===r&&t.oldScroll>=o.offset?o.trigger([t.forward]):void 0})})},e.prototype.checkEmpty=function(){if(i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([u,m].join(" ")),delete c[this.id]},e}(),r=function(){function e(e,t,o){var n,a;o=i.extend({},i.fn[w].defaults,o),"bottom-in-view"===o.offset&&(o.offset=function(){var e;return e=i[v]("viewportHeight"),i.isWindow(t.element)||(e=t.$element.height()),e-i(this).outerHeight()}),this.$element=e,this.element=e[0],this.axis=o.horizontal?"horizontal":"vertical",this.callback=o.handler,this.context=t,this.enabled=o.enabled,this.id="waypoints"+x++,this.offset=null,this.options=o,t.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,n=null!=(a=e.data(g))?a:[],n.push(this.id),e.data(g,n)}return e.prototype.trigger=function(e){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,e),this.options.triggerOnce?this.destroy():void 0},e.prototype.disable=function(){return this.enabled=!1},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},e.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},e.getWaypointsByElement=function(e){var t,o;return(o=i(e).data(g))?(t=i.extend({},s.horizontal,s.vertical),i.map(o,function(e){return t[e]})):[]},e}(),h={init:function(e,t){var o;return null==t&&(t={}),null==(o=t.handler)&&(t.handler=e),this.each(function(){var e,o,n,s;return e=i(this),n=null!=(s=t.context)?s:i.fn[w].defaults.context,i.isWindow(n)||(n=e.closest(n)),n=i(n),o=c[n.data(d)],o||(o=new a(n)),new r(e,o,t)}),i[v]("refresh"),this},disable:function(){return h._invoke(this,"disable")},enable:function(){return h._invoke(this,"enable")},destroy:function(){return h._invoke(this,"destroy")},prev:function(e,t){return h._traverse.call(this,e,t,function(e,t,i){if(t>0)return e.push(i[t-1])})},next:function(e,t){return h._traverse.call(this,e,t,function(e,t,i){if(t<i.length-1)return e.push(i[t+1])})},_traverse:function(e,t,n){var a,r;return null==e&&(e="vertical"),null==t&&(t=o),r=p.aggregate(t),a=[],this.each(function(){var t;return t=i.inArray(this,r[e]),n(a,t,r[e])}),this.pushStack(a)},_invoke:function(e,t){return e.each(function(){var e;return e=r.getWaypointsByElement(this),i.each(e,function(e,i){return i[t](),!0})}),this}},i.fn[w]=function(){var e,o;return o=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],h[o]?h[o].apply(this,e):i.isFunction(o)?h.init.apply(this,arguments):i.isPlainObject(o)?h.init.apply(this,[null,o]):o?i.error("The "+o+" method does not exist in jQuery Waypoints."):i.error("jQuery Waypoints needs a callback function or handler option.")},i.fn[w].defaults={context:o,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},p={refresh:function(){return i.each(c,function(e,t){return t.refresh()})},viewportHeight:function(){var e;return null!=(e=o.innerHeight)?e:n.height()},aggregate:function(e){var t,o,n;return t=s,e&&(t=null!=(n=c[i(e).data(d)])?n.waypoints:void 0),t?(o={horizontal:[],vertical:[]},i.each(o,function(e,n){return i.each(t[e],function(e,t){return n.push(t)}),n.sort(function(e,t){return e.offset-t.offset}),o[e]=i.map(n,function(e){return e.element}),o[e]=i.unique(o[e])}),o):[]},above:function(e){return null==e&&(e=o),p._filter(e,"vertical",function(e,t){return t.offset<=e.oldScroll.y})},below:function(e){return null==e&&(e=o),p._filter(e,"vertical",function(e,t){return t.offset>e.oldScroll.y})},left:function(e){return null==e&&(e=o),p._filter(e,"horizontal",function(e,t){return t.offset<=e.oldScroll.x})},right:function(e){return null==e&&(e=o),p._filter(e,"horizontal",function(e,t){return t.offset>e.oldScroll.x})},enable:function(){return p._invoke("enable")},disable:function(){return p._invoke("disable")},destroy:function(){return p._invoke("destroy")},extendFn:function(e,t){return h[e]=t},_invoke:function(e){var t;return t=i.extend({},s.vertical,s.horizontal),i.each(t,function(t,i){return i[e](),!0})},_filter:function(e,t,o){var n,a;return(n=c[i(e).data(d)])?(a=[],i.each(n.waypoints[t],function(e,t){if(o(n,t))return a.push(t)}),a.sort(function(e,t){return e.offset-t.offset}),i.map(a,function(e){return e.element})):[]}},i[v]=function(){var e,i;return i=arguments[0],e=2<=arguments.length?t.call(arguments,1):[],p[i]?p[i].apply(null,e):p.aggregate.call(null,i)},i[v].settings={resizeThrottle:100,scrollThrottle:30},n.load(function(){return i[v]("refresh")})})}.call(this),function(e){e.color={},e.color.make=function(t,i,o,n){var a={};return a.r=t||0,a.g=i||0,a.b=o||0,a.a=null!=n?n:1,a.add=function(e,t){for(var i=0;i<e.length;++i)a[e.charAt(i)]+=t;return a.normalize()},a.scale=function(e,t){for(var i=0;i<e.length;++i)a[e.charAt(i)]*=t;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function e(e,t,i){return t<e?e:t>i?i:t}return a.r=e(0,parseInt(a.r),255),a.g=e(0,parseInt(a.g),255),a.b=e(0,parseInt(a.b),255),a.a=e(0,a.a,1),a},a.clone=function(){return e.color.make(a.r,a.b,a.g,a.a)},a.normalize()},e.color.extract=function(t,i){var o;do{if(o=t.css(i).toLowerCase(),""!=o&&"transparent"!=o)break;t=t.parent()}while(t.length&&!e.nodeName(t.get(0),"body"));return"rgba(0, 0, 0, 0)"==o&&(o="transparent"),e.color.parse(o)},e.color.parse=function(i){var o,n=e.color.make;if(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10));if(o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),parseFloat(o[4]));if(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]));if(o=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]),parseFloat(o[4]));if(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return n(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return n(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));var a=e.trim(i).toLowerCase();return"transparent"==a?n(255,255,255,0):(o=t[a]||[0,0,0],n(o[0],o[1],o[2]))};var t={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(e){function t(t,i){var o=i.children("."+t)[0];if(null==o&&(o=document.createElement("canvas"),o.className=t,e(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!o.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");o=window.G_vmlCanvasManager.initElement(o)}this.element=o;var n=this.context=o.getContext("2d"),a=window.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=a/r,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function i(i,n,a,r){function s(e,t){t=[xe].concat(t);for(var i=0;i<e.length;++i)e[i].apply(this,t)}function l(){for(var i={Canvas:t},o=0;o<r.length;++o){var n=r[o];n.init(xe,i),n.options&&e.extend(!0,ne,n.options)}}function d(t){e.extend(!0,ne,t),t&&t.colors&&(ne.colors=t.colors),null==ne.xaxis.color&&(ne.xaxis.color=e.color.parse(ne.grid.color).scale("a",.22).toString()),null==ne.yaxis.color&&(ne.yaxis.color=e.color.parse(ne.grid.color).scale("a",.22).toString()),null==ne.xaxis.tickColor&&(ne.xaxis.tickColor=ne.grid.tickColor||ne.xaxis.color),null==ne.yaxis.tickColor&&(ne.yaxis.tickColor=ne.grid.tickColor||ne.yaxis.color),null==ne.grid.borderColor&&(ne.grid.borderColor=ne.grid.color),null==ne.grid.tickColor&&(ne.grid.tickColor=e.color.parse(ne.grid.color).scale("a",.22).toString());var o,n,a,r=i.css("font-size"),l=r?+r.replace("px",""):13,d={style:i.css("font-style"),size:Math.round(.8*l),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(a=ne.xaxes.length||1,o=0;o<a;++o)n=ne.xaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},ne.xaxis,n),ne.xaxes[o]=n,n.font&&(n.font=e.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(a=ne.yaxes.length||1,o=0;o<a;++o)n=ne.yaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=e.extend(!0,{},ne.yaxis,n),ne.yaxes[o]=n,n.font&&(n.font=e.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(ne.xaxis.noTicks&&null==ne.xaxis.ticks&&(ne.xaxis.ticks=ne.xaxis.noTicks),ne.yaxis.noTicks&&null==ne.yaxis.ticks&&(ne.yaxis.ticks=ne.yaxis.noTicks),ne.x2axis&&(ne.xaxes[1]=e.extend(!0,{},ne.xaxis,ne.x2axis),ne.xaxes[1].position="top",null==ne.x2axis.min&&(ne.xaxes[1].min=null),null==ne.x2axis.max&&(ne.xaxes[1].max=null)),ne.y2axis&&(ne.yaxes[1]=e.extend(!0,{},ne.yaxis,ne.y2axis),ne.yaxes[1].position="right",null==ne.y2axis.min&&(ne.yaxes[1].min=null),null==ne.y2axis.max&&(ne.yaxes[1].max=null)),ne.grid.coloredAreas&&(ne.grid.markings=ne.grid.coloredAreas),ne.grid.coloredAreasColor&&(ne.grid.markingsColor=ne.grid.coloredAreasColor),ne.lines&&e.extend(!0,ne.series.lines,ne.lines),ne.points&&e.extend(!0,ne.series.points,ne.points),ne.bars&&e.extend(!0,ne.series.bars,ne.bars),null!=ne.shadowSize&&(ne.series.shadowSize=ne.shadowSize),null!=ne.highlightColor&&(ne.series.highlightColor=ne.highlightColor),o=0;o<ne.xaxes.length;++o)x(ce,o+1).options=ne.xaxes[o];for(o=0;o<ne.yaxes.length;++o)x(fe,o+1).options=ne.yaxes[o];for(var c in me)ne.hooks[c]&&ne.hooks[c].length&&(me[c]=me[c].concat(ne.hooks[c]));s(me.processOptions,[ne])}function c(e){oe=f(e),g(),w()}function f(t){for(var i=[],o=0;o<t.length;++o){var n=e.extend(!0,{},ne.series);null!=t[o].data?(n.data=t[o].data,delete t[o].data,e.extend(!0,n,t[o]),t[o].data=n.data):n.data=t[o],i.push(n)}return i}function p(e,t){var i=e[t+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function h(){return e.grep(ce.concat(fe),function(e){return e})}function u(e){var t,i,o={};for(t=0;t<ce.length;++t)i=ce[t],i&&i.used&&(o["x"+i.n]=i.c2p(e.left));for(t=0;t<fe.length;++t)i=fe[t],i&&i.used&&(o["y"+i.n]=i.c2p(e.top));return void 0!==o.x1&&(o.x=o.x1),void 0!==o.y1&&(o.y=o.y1),o}function m(e){var t,i,o,n={};for(t=0;t<ce.length;++t)if(i=ce[t],i&&i.used&&(o="x"+i.n,null==e[o]&&1==i.n&&(o="x"),null!=e[o])){n.left=i.p2c(e[o]);break}for(t=0;t<fe.length;++t)if(i=fe[t],i&&i.used&&(o="y"+i.n,null==e[o]&&1==i.n&&(o="y"),null!=e[o])){n.top=i.p2c(e[o]);break}return n}function x(t,i){return t[i-1]||(t[i-1]={n:i,direction:t==ce?"x":"y",options:e.extend(!0,{},t==ce?ne.xaxis:ne.yaxis)}),t[i-1]}function g(){var t,i=oe.length,o=-1;for(t=0;t<oe.length;++t){var n=oe[t].color;null!=n&&(i--,"number"==typeof n&&n>o&&(o=n))}i<=o&&(i=o+1);var a,r=[],s=ne.colors,l=s.length,d=0;for(t=0;t<i;t++)a=e.color.parse(s[t%l]||"#666"),t%l==0&&t&&(d=d>=0?d<.5?-d-.2:0:-d),r[t]=a.scale("rgb",1+d);var c,f=0;for(t=0;t<oe.length;++t){if(c=oe[t],null==c.color?(c.color=r[f].toString(),++f):"number"==typeof c.color&&(c.color=r[c.color].toString()),null==c.lines.show){var h,u=!0;for(h in c)if(c[h]&&c[h].show){u=!1;break}u&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill),c.xaxis=x(ce,p(c,"x")),c.yaxis=x(fe,p(c,"y"))}}function w(){function t(e,t,i){t<e.datamin&&t!=-w&&(e.datamin=t),i>e.datamax&&i!=w&&(e.datamax=i)}var i,o,n,a,r,l,d,c,f,p,u,m,x=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,w=Number.MAX_VALUE;for(e.each(h(),function(e,t){t.datamin=x,t.datamax=g,t.used=!1}),i=0;i<oe.length;++i)r=oe[i],r.datapoints={points:[]},s(me.processRawData,[r,r.data,r.datapoints]);for(i=0;i<oe.length;++i){if(r=oe[i],u=r.data,m=r.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var v=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:v}),r.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}r.datapoints.format=m}if(null==r.datapoints.pointsize){r.datapoints.pointsize=m.length,d=r.datapoints.pointsize,l=r.datapoints.points;var b=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,o=n=0;o<u.length;++o,n+=d){p=u[o];var y=null==p;if(!y)for(a=0;a<d;++a)c=p[a],f=m[a],f&&(f.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=w:c==-(1/0)&&(c=-w)),null==c&&(f.required&&(y=!0),null!=f.defaultValue&&(c=f.defaultValue))),l[n+a]=c;if(y)for(a=0;a<d;++a)c=l[n+a],null!=c&&(f=m[a],f.autoscale!==!1&&(f.x&&t(r.xaxis,c,c),f.y&&t(r.yaxis,c,c))),l[n+a]=null;else if(b&&n>0&&null!=l[n-d]&&l[n-d]!=l[n]&&l[n-d+1]!=l[n+1]){for(a=0;a<d;++a)l[n+d+a]=l[n+a];l[n+1]=l[n-d+1],n+=d}}}}for(i=0;i<oe.length;++i)r=oe[i],s(me.processDatapoints,[r,r.datapoints]);for(i=0;i<oe.length;++i){r=oe[i],l=r.datapoints.points,d=r.datapoints.pointsize,m=r.datapoints.format;var D=x,_=x,k=g,T=g;for(o=0;o<l.length;o+=d)if(null!=l[o])for(a=0;a<d;++a)c=l[o+a],f=m[a],f&&f.autoscale!==!1&&c!=w&&c!=-w&&(f.x&&(c<D&&(D=c),c>k&&(k=c)),f.y&&(c<_&&(_=c),c>T&&(T=c)));if(r.bars.show){var E;switch(r.bars.align){case"left":E=0;break;case"right":E=-r.bars.barWidth;break;default:E=-r.bars.barWidth/2}r.bars.horizontal?(_+=E,T+=E+r.bars.barWidth):(D+=E,k+=E+r.bars.barWidth)}t(r.xaxis,D,k),t(r.yaxis,_,T)}e.each(h(),function(e,t){t.datamin==x&&(t.datamin=null),t.datamax==g&&(t.datamax=null)})}function v(){i.css("padding",0).children().filter(function(){return!e(this).hasClass("flot-overlay")&&!e(this).hasClass("flot-base")}).remove(),"static"==i.css("position")&&i.css("position","relative"),ae=new t("flot-base",i),re=new t("flot-overlay",i),le=ae.context,de=re.context,se=e(re.element).unbind();var o=i.data("plot");o&&(o.shutdown(),re.clear()),i.data("plot",xe)}function b(){ne.grid.hoverable&&(se.mousemove(X),se.bind("mouseleave",V)),ne.grid.clickable&&se.click(U),s(me.bindEvents,[se])}function y(){we&&clearTimeout(we),se.unbind("mousemove",X),se.unbind("mouseleave",V),se.unbind("click",U),s(me.shutdown,[se])}function D(e){function t(e){return e}var i,o,n=e.options.transform||t,a=e.options.inverseTransform;"x"==e.direction?(i=e.scale=he/Math.abs(n(e.max)-n(e.min)),o=Math.min(n(e.max),n(e.min))):(i=e.scale=ue/Math.abs(n(e.max)-n(e.min)),i=-i,o=Math.max(n(e.max),n(e.min))),n==t?e.p2c=function(e){return(e-o)*i}:e.p2c=function(e){return(n(e)-o)*i},a?e.c2p=function(e){return a(o+e/i)}:e.c2p=function(e){return o+e/i}}function _(e){for(var t=e.options,i=e.ticks||[],o=t.labelWidth||0,n=t.labelHeight||0,a=o||("x"==e.direction?Math.floor(ae.width/(i.length||1)):null),r=e.direction+"Axis "+e.direction+e.n+"Axis",s="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+r,l=t.font||"flot-tick-label tickLabel",d=0;d<i.length;++d){var c=i[d];if(c.label){var f=ae.getTextInfo(s,c.label,l,null,a);o=Math.max(o,f.width),n=Math.max(n,f.height)}}e.labelWidth=t.labelWidth||o,e.labelHeight=t.labelHeight||n}function k(t){var i=t.labelWidth,o=t.labelHeight,n=t.options.position,a="x"===t.direction,r=t.options.tickLength,s=ne.grid.axisMargin,l=ne.grid.labelMargin,d=!0,c=!0,f=!0,p=!1;e.each(a?ce:fe,function(e,i){i&&(i.show||i.reserveSpace)&&(i===t?p=!0:i.options.position===n&&(p?c=!1:d=!1),p||(f=!1))}),c&&(s=0),null==r&&(r=f?"full":5),isNaN(+r)||(l+=+r),a?(o+=l,"bottom"==n?(pe.bottom+=o+s,t.box={top:ae.height-pe.bottom,height:o}):(t.box={top:pe.top+s,height:o},pe.top+=o+s)):(i+=l,"left"==n?(t.box={left:pe.left+s,width:i},pe.left+=i+s):(pe.right+=i+s,t.box={left:ae.width-pe.right,width:i})),t.position=n,t.tickLength=r,t.box.padding=l,t.innermost=d}function T(e){"x"==e.direction?(e.box.left=pe.left-e.labelWidth/2,e.box.width=ae.width-pe.left-pe.right+e.labelWidth):(e.box.top=pe.top-e.labelHeight/2,e.box.height=ae.height-pe.bottom-pe.top+e.labelHeight)}function E(){var t,i=ne.grid.minBorderMargin;if(null==i)for(i=0,t=0;t<oe.length;++t)i=Math.max(i,2*(oe[t].points.radius+oe[t].points.lineWidth/2));var o={left:i,right:i,top:i,bottom:i};e.each(h(),function(e,t){t.reserveSpace&&t.ticks&&t.ticks.length&&("x"===t.direction?(o.left=Math.max(o.left,t.labelWidth/2),o.right=Math.max(o.right,t.labelWidth/2)):(o.bottom=Math.max(o.bottom,t.labelHeight/2),o.top=Math.max(o.top,t.labelHeight/2)))}),pe.left=Math.ceil(Math.max(o.left,pe.left)),pe.right=Math.ceil(Math.max(o.right,pe.right)),pe.top=Math.ceil(Math.max(o.top,pe.top)),pe.bottom=Math.ceil(Math.max(o.bottom,pe.bottom))}function S(){var t,i=h(),o=ne.grid.show;for(var n in pe){var a=ne.grid.margin||0;pe[n]="number"==typeof a?a:a[n]||0}s(me.processOffset,[pe]);for(var n in pe)"object"==typeof ne.grid.borderWidth?pe[n]+=o?ne.grid.borderWidth[n]:0:pe[n]+=o?ne.grid.borderWidth:0;if(e.each(i,function(e,t){var i=t.options;t.show=null==i.show?t.used:i.show,t.reserveSpace=null==i.reserveSpace?t.show:i.reserveSpace,C(t)}),o){var r=e.grep(i,function(e){return e.show||e.reserveSpace});for(e.each(r,function(e,t){L(t),P(t),F(t,t.ticks),_(t)}),t=r.length-1;t>=0;--t)k(r[t]);E(),e.each(r,function(e,t){T(t)})}he=ae.width-pe.left-pe.right,ue=ae.height-pe.bottom-pe.top,e.each(i,function(e,t){D(t)}),o&&W(),B()}function C(e){var t=e.options,i=+(null!=t.min?t.min:e.datamin),o=+(null!=t.max?t.max:e.datamax),n=o-i;if(0==n){var a=0==o?1:.01;null==t.min&&(i-=a),null!=t.max&&null==t.min||(o+=a)}else{var r=t.autoscaleMargin;null!=r&&(null==t.min&&(i-=n*r,i<0&&null!=e.datamin&&e.datamin>=0&&(i=0)),null==t.max&&(o+=n*r,o>0&&null!=e.datamax&&e.datamax<=0&&(o=0)))}e.min=i,e.max=o}function L(t){var i,n=t.options;i="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==t.direction?ae.width:ae.height);var a=(t.max-t.min)/i,r=-Math.floor(Math.log(a)/Math.LN10),s=n.tickDecimals;null!=s&&r>s&&(r=s);var l,d=Math.pow(10,-r),c=a/d;if(c<1.5?l=1:c<3?(l=2,c>2.25&&(null==s||r+1<=s)&&(l=2.5,++r)):l=c<7.5?5:10,l*=d,null!=n.minTickSize&&l<n.minTickSize&&(l=n.minTickSize),t.delta=a,t.tickDecimals=Math.max(0,null!=s?s:r),t.tickSize=n.tickSize||l,"time"==n.mode&&!t.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(t.tickGenerator||(t.tickGenerator=function(e){var t,i=[],n=o(e.min,e.tickSize),a=0,r=Number.NaN;do t=r,r=n+a*e.tickSize,i.push(r),++a;while(r<e.max&&r!=t);return i},t.tickFormatter=function(e,t){var i=t.tickDecimals?Math.pow(10,t.tickDecimals):1,o=""+Math.round(e*i)/i;if(null!=t.tickDecimals){var n=o.indexOf("."),a=n==-1?0:o.length-n-1;if(a<t.tickDecimals)return(a?o:o+".")+(""+i).substr(1,t.tickDecimals-a)}return o}),e.isFunction(n.tickFormatter)&&(t.tickFormatter=function(e,t){return""+n.tickFormatter(e,t)}),null!=n.alignTicksWithAxis){var f=("x"==t.direction?ce:fe)[n.alignTicksWithAxis-1];if(f&&f.used&&f!=t){var p=t.tickGenerator(t);if(p.length>0&&(null==n.min&&(t.min=Math.min(t.min,p[0])),null==n.max&&p.length>1&&(t.max=Math.max(t.max,p[p.length-1]))),t.tickGenerator=function(e){var t,i,o=[];for(i=0;i<f.ticks.length;++i)t=(f.ticks[i].v-f.min)/(f.max-f.min),t=e.min+t*(e.max-e.min),o.push(t);return o},!t.mode&&null==n.tickDecimals){var h=Math.max(0,-Math.floor(Math.log(t.delta)/Math.LN10)+1),u=t.tickGenerator(t);u.length>1&&/\..*0$/.test((u[1]-u[0]).toFixed(h))||(t.tickDecimals=h)}}}}function P(t){var i=t.options.ticks,o=[];null==i||"number"==typeof i&&i>0?o=t.tickGenerator(t):i&&(o=e.isFunction(i)?i(t):i);var n,a;for(t.ticks=[],n=0;n<o.length;++n){var r=null,s=o[n];"object"==typeof s?(a=+s[0],s.length>1&&(r=s[1])):a=+s,null==r&&(r=t.tickFormatter(a,t)),isNaN(a)||t.ticks.push({v:a,label:r})}}function F(e,t){e.options.autoscaleMargin&&t.length>0&&(null==e.options.min&&(e.min=Math.min(e.min,t[0].v)),null==e.options.max&&t.length>1&&(e.max=Math.max(e.max,t[t.length-1].v)))}function $(){ae.clear(),s(me.drawBackground,[le]);var e=ne.grid;e.show&&e.backgroundColor&&M(),e.show&&!e.aboveData&&I();for(var t=0;t<oe.length;++t)s(me.drawSeries,[le,oe[t]]),R(oe[t]);s(me.draw,[le]),e.show&&e.aboveData&&I(),ae.render(),Q()}function z(e,t){for(var i,o,n,a,r=h(),s=0;s<r.length;++s)if(i=r[s],i.direction==t&&(a=t+i.n+"axis",e[a]||1!=i.n||(a=t+"axis"),e[a])){o=e[a].from,n=e[a].to;break}if(e[a]||(i="x"==t?ce[0]:fe[0],o=e[t+"1"],n=e[t+"2"]),null!=o&&null!=n&&o>n){var l=o;o=n,n=l}return{from:o,to:n,axis:i}}function M(){le.save(),le.translate(pe.left,pe.top),le.fillStyle=ie(ne.grid.backgroundColor,ue,0,"rgba(255, 255, 255, 0)"),le.fillRect(0,0,he,ue),le.restore()}function I(){var t,i,o,n;le.save(),le.translate(pe.left,pe.top);var a=ne.grid.markings;if(a)for(e.isFunction(a)&&(i=xe.getAxes(),i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,a=a(i)),t=0;t<a.length;++t){var r=a[t],s=z(r,"x"),l=z(r,"y");if(null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(s.to<s.axis.min||s.from>s.axis.max||l.to<l.axis.min||l.from>l.axis.max)){s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var d=s.from===s.to,c=l.from===l.to;if(!d||!c)if(s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),d||c){var f=r.lineWidth||ne.grid.markingsLineWidth,p=f%2?.5:0;le.beginPath(),le.strokeStyle=r.color||ne.grid.markingsColor,le.lineWidth=f,d?(le.moveTo(s.to+p,l.from),le.lineTo(s.to+p,l.to)):(le.moveTo(s.from,l.to+p),le.lineTo(s.to,l.to+p)),le.stroke()}else le.fillStyle=r.color||ne.grid.markingsColor,le.fillRect(s.from,l.to,s.to-s.from,l.from-l.to)}}i=h(),o=ne.grid.borderWidth;for(var u=0;u<i.length;++u){var m,x,g,w,v=i[u],b=v.box,y=v.tickLength;if(v.show&&0!=v.ticks.length){for(le.lineWidth=1,"x"==v.direction?(m=0,x="full"==y?"top"==v.position?0:ue:b.top-pe.top+("top"==v.position?b.height:0)):(x=0,m="full"==y?"left"==v.position?0:he:b.left-pe.left+("left"==v.position?b.width:0)),v.innermost||(le.strokeStyle=v.options.color,le.beginPath(),g=w=0,"x"==v.direction?g=he+1:w=ue+1,1==le.lineWidth&&("x"==v.direction?x=Math.floor(x)+.5:m=Math.floor(m)+.5),le.moveTo(m,x),le.lineTo(m+g,x+w),le.stroke()),le.strokeStyle=v.options.tickColor,le.beginPath(),t=0;t<v.ticks.length;++t){var D=v.ticks[t].v;g=w=0,isNaN(D)||D<v.min||D>v.max||"full"==y&&("object"==typeof o&&o[v.position]>0||o>0)&&(D==v.min||D==v.max)||("x"==v.direction?(m=v.p2c(D),w="full"==y?-ue:y,"top"==v.position&&(w=-w)):(x=v.p2c(D),g="full"==y?-he:y,"left"==v.position&&(g=-g)),1==le.lineWidth&&("x"==v.direction?m=Math.floor(m)+.5:x=Math.floor(x)+.5),le.moveTo(m,x),le.lineTo(m+g,x+w))}le.stroke()}}o&&(n=ne.grid.borderColor,"object"==typeof o||"object"==typeof n?("object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),o.top>0&&(le.strokeStyle=n.top,le.lineWidth=o.top,le.beginPath(),le.moveTo(0-o.left,0-o.top/2),le.lineTo(he,0-o.top/2),le.stroke()),o.right>0&&(le.strokeStyle=n.right,le.lineWidth=o.right,le.beginPath(),le.moveTo(he+o.right/2,0-o.top),le.lineTo(he+o.right/2,ue),le.stroke()),o.bottom>0&&(le.strokeStyle=n.bottom,le.lineWidth=o.bottom,le.beginPath(),le.moveTo(he+o.right,ue+o.bottom/2),le.lineTo(0,ue+o.bottom/2),le.stroke()),o.left>0&&(le.strokeStyle=n.left,le.lineWidth=o.left,le.beginPath(),le.moveTo(0-o.left/2,ue+o.bottom),le.lineTo(0-o.left/2,0),le.stroke())):(le.lineWidth=o,le.strokeStyle=ne.grid.borderColor,le.strokeRect(-o/2,-o/2,he+o,ue+o))),le.restore()}function W(){e.each(h(),function(e,t){var i,o,n,a,r,s=t.box,l=t.direction+"Axis "+t.direction+t.n+"Axis",d="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+l,c=t.options.font||"flot-tick-label tickLabel";if(ae.removeText(d),t.show&&0!=t.ticks.length)for(var f=0;f<t.ticks.length;++f)i=t.ticks[f],!i.label||i.v<t.min||i.v>t.max||("x"==t.direction?(a="center",o=pe.left+t.p2c(i.v),"bottom"==t.position?n=s.top+s.padding:(n=s.top+s.height-s.padding,r="bottom")):(r="middle",n=pe.top+t.p2c(i.v),"left"==t.position?(o=s.left+s.width-s.padding,a="right"):o=s.left+s.padding),ae.addText(d,o,n,i.label,c,null,null,a,r))})}function R(e){e.lines.show&&O(e),e.bars.show&&j(e),e.points.show&&N(e)}function O(e){function t(e,t,i,o,n){var a=e.points,r=e.pointsize,s=null,l=null;le.beginPath();for(var d=r;d<a.length;d+=r){var c=a[d-r],f=a[d-r+1],p=a[d],h=a[d+1];if(null!=c&&null!=p){if(f<=h&&f<n.min){if(h<n.min)continue;c=(n.min-f)/(h-f)*(p-c)+c,f=n.min}else if(h<=f&&h<n.min){if(f<n.min)continue;p=(n.min-f)/(h-f)*(p-c)+c,h=n.min}if(f>=h&&f>n.max){if(h>n.max)continue;c=(n.max-f)/(h-f)*(p-c)+c,f=n.max}else if(h>=f&&h>n.max){if(f>n.max)continue;p=(n.max-f)/(h-f)*(p-c)+c,h=n.max}if(c<=p&&c<o.min){if(p<o.min)continue;f=(o.min-c)/(p-c)*(h-f)+f,c=o.min}else if(p<=c&&p<o.min){if(c<o.min)continue;h=(o.min-c)/(p-c)*(h-f)+f,p=o.min}if(c>=p&&c>o.max){if(p>o.max)continue;f=(o.max-c)/(p-c)*(h-f)+f,c=o.max}else if(p>=c&&p>o.max){if(c>o.max)continue;h=(o.max-c)/(p-c)*(h-f)+f,p=o.max}c==s&&f==l||le.moveTo(o.p2c(c)+t,n.p2c(f)+i),s=p,l=h,le.lineTo(o.p2c(p)+t,n.p2c(h)+i)}}le.stroke()}function i(e,t,i){for(var o=e.points,n=e.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,s=!1,l=1,d=0,c=0;;){if(n>0&&r>o.length+n)break;r+=n;var f=o[r-n],p=o[r-n+l],h=o[r],u=o[r+l];if(s){if(n>0&&null!=f&&null==h){c=r,n=-n,l=2;continue}if(n<0&&r==d+n){le.fill(),s=!1,n=-n,l=1,r=d=c+n;continue}}if(null!=f&&null!=h){if(f<=h&&f<t.min){if(h<t.min)continue;p=(t.min-f)/(h-f)*(u-p)+p,f=t.min}else if(h<=f&&h<t.min){if(f<t.min)continue;u=(t.min-f)/(h-f)*(u-p)+p,h=t.min}if(f>=h&&f>t.max){if(h>t.max)continue;p=(t.max-f)/(h-f)*(u-p)+p,f=t.max}else if(h>=f&&h>t.max){if(f>t.max)continue;u=(t.max-f)/(h-f)*(u-p)+p,h=t.max}if(s||(le.beginPath(),le.moveTo(t.p2c(f),i.p2c(a)),s=!0),p>=i.max&&u>=i.max)le.lineTo(t.p2c(f),i.p2c(i.max)),le.lineTo(t.p2c(h),i.p2c(i.max));else if(p<=i.min&&u<=i.min)le.lineTo(t.p2c(f),i.p2c(i.min)),le.lineTo(t.p2c(h),i.p2c(i.min));else{var m=f,x=h;p<=u&&p<i.min&&u>=i.min?(f=(i.min-p)/(u-p)*(h-f)+f,p=i.min):u<=p&&u<i.min&&p>=i.min&&(h=(i.min-p)/(u-p)*(h-f)+f,u=i.min),p>=u&&p>i.max&&u<=i.max?(f=(i.max-p)/(u-p)*(h-f)+f,p=i.max):u>=p&&u>i.max&&p<=i.max&&(h=(i.max-p)/(u-p)*(h-f)+f,u=i.max),f!=m&&le.lineTo(t.p2c(m),i.p2c(p)),le.lineTo(t.p2c(f),i.p2c(p)),le.lineTo(t.p2c(h),i.p2c(u)),h!=x&&(le.lineTo(t.p2c(h),i.p2c(u)),le.lineTo(t.p2c(x),i.p2c(u)))}}}}le.save(),le.translate(pe.left,pe.top),le.lineJoin="round";var o=e.lines.lineWidth,n=e.shadowSize;if(o>0&&n>0){le.lineWidth=n,le.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;t(e.datapoints,Math.sin(a)*(o/2+n/2),Math.cos(a)*(o/2+n/2),e.xaxis,e.yaxis),le.lineWidth=n/2,t(e.datapoints,Math.sin(a)*(o/2+n/4),Math.cos(a)*(o/2+n/4),e.xaxis,e.yaxis)}le.lineWidth=o,le.strokeStyle=e.color;var r=H(e.lines,e.color,0,ue);r&&(le.fillStyle=r,i(e.datapoints,e.xaxis,e.yaxis)),o>0&&t(e.datapoints,0,0,e.xaxis,e.yaxis),le.restore()}function N(e){function t(e,t,i,o,n,a,r,s){for(var l=e.points,d=e.pointsize,c=0;c<l.length;c+=d){var f=l[c],p=l[c+1];null==f||f<a.min||f>a.max||p<r.min||p>r.max||(le.beginPath(),f=a.p2c(f),p=r.p2c(p)+o,"circle"==s?le.arc(f,p,t,0,n?Math.PI:2*Math.PI,!1):s(le,f,p,t,n),le.closePath(),i&&(le.fillStyle=i,le.fill()),le.stroke())}}le.save(),le.translate(pe.left,pe.top);var i=e.points.lineWidth,o=e.shadowSize,n=e.points.radius,a=e.points.symbol;if(0==i&&(i=1e-4),i>0&&o>0){var r=o/2;le.lineWidth=r,le.strokeStyle="rgba(0,0,0,0.1)",t(e.datapoints,n,null,r+r/2,!0,e.xaxis,e.yaxis,a),le.strokeStyle="rgba(0,0,0,0.2)",t(e.datapoints,n,null,r/2,!0,e.xaxis,e.yaxis,a)}le.lineWidth=i,le.strokeStyle=e.color,t(e.datapoints,n,H(e.points,e.color),0,!1,e.xaxis,e.yaxis,a),le.restore()}function A(e,t,i,o,n,a,r,s,l,d,c){var f,p,h,u,m,x,g,w,v;d?(w=x=g=!0,m=!1,f=i,p=e,u=t+o,h=t+n,p<f&&(v=p,p=f,f=v,m=!0,x=!1)):(m=x=g=!0,w=!1,f=e+o,p=e+n,h=i,u=t,u<h&&(v=u,u=h,h=v,w=!0,g=!1)),p<r.min||f>r.max||u<s.min||h>s.max||(f<r.min&&(f=r.min,m=!1),p>r.max&&(p=r.max,x=!1),h<s.min&&(h=s.min,w=!1),u>s.max&&(u=s.max,g=!1),f=r.p2c(f),h=s.p2c(h),p=r.p2c(p),u=s.p2c(u),a&&(l.fillStyle=a(h,u),l.fillRect(f,u,p-f,h-u)),c>0&&(m||x||g||w)&&(l.beginPath(),l.moveTo(f,h),m?l.lineTo(f,u):l.moveTo(f,u),g?l.lineTo(p,u):l.moveTo(p,u),x?l.lineTo(p,h):l.moveTo(p,h),w?l.lineTo(f,h):l.moveTo(f,h),l.stroke()))}function j(e){function t(t,i,o,n,a,r){for(var s=t.points,l=t.pointsize,d=0;d<s.length;d+=l)null!=s[d]&&A(s[d],s[d+1],s[d+2],i,o,n,a,r,le,e.bars.horizontal,e.bars.lineWidth)}le.save(),le.translate(pe.left,pe.top),le.lineWidth=e.bars.lineWidth,le.strokeStyle=e.color;var i;switch(e.bars.align){case"left":i=0;break;case"right":i=-e.bars.barWidth;break;default:i=-e.bars.barWidth/2}var o=e.bars.fill?function(t,i){return H(e.bars,e.color,t,i)}:null;t(e.datapoints,i,i+e.bars.barWidth,o,e.xaxis,e.yaxis),le.restore()}function H(t,i,o,n){var a=t.fill;if(!a)return null;if(t.fillColor)return ie(t.fillColor,o,n,i);var r=e.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function B(){if(null!=ne.legend.container?e(ne.legend.container).html(""):i.find(".legend").remove(),ne.legend.show){for(var t,o,n=[],a=[],r=!1,s=ne.legend.labelFormatter,l=0;l<oe.length;++l)t=oe[l],t.label&&(o=s?s(t.label,t):t.label,o&&a.push({label:o,color:t.color}));if(ne.legend.sorted)if(e.isFunction(ne.legend.sorted))a.sort(ne.legend.sorted);else if("reverse"==ne.legend.sorted)a.reverse();else{var d="descending"!=ne.legend.sorted;a.sort(function(e,t){return e.label==t.label?0:e.label<t.label!=d?1:-1;
})}for(var l=0;l<a.length;++l){var c=a[l];l%ne.legend.noColumns==0&&(r&&n.push("</tr>"),n.push("<tr>"),r=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+ne.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+c.label+"</td>")}if(r&&n.push("</tr>"),0!=n.length){var f='<table style="font-size:smaller;color:'+ne.grid.color+'">'+n.join("")+"</table>";if(null!=ne.legend.container)e(ne.legend.container).html(f);else{var p="",h=ne.legend.position,u=ne.legend.margin;null==u[0]&&(u=[u,u]),"n"==h.charAt(0)?p+="top:"+(u[1]+pe.top)+"px;":"s"==h.charAt(0)&&(p+="bottom:"+(u[1]+pe.bottom)+"px;"),"e"==h.charAt(1)?p+="right:"+(u[0]+pe.right)+"px;":"w"==h.charAt(1)&&(p+="left:"+(u[0]+pe.left)+"px;");var m=e('<div class="legend">'+f.replace('style="','style="position:absolute;'+p+";")+"</div>").appendTo(i);if(0!=ne.legend.backgroundOpacity){var x=ne.legend.backgroundColor;null==x&&(x=ne.grid.backgroundColor,x=x&&"string"==typeof x?e.color.parse(x):e.color.extract(m,"background-color"),x.a=1,x=x.toString());var g=m.children();e('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+p+"background-color:"+x+';"> </div>').prependTo(m).css("opacity",ne.legend.backgroundOpacity)}}}}}function q(e,t,i){var o,n,a,r=ne.grid.mouseActiveRadius,s=r*r+1,l=null;for(o=oe.length-1;o>=0;--o)if(i(oe[o])){var d=oe[o],c=d.xaxis,f=d.yaxis,p=d.datapoints.points,h=c.c2p(e),u=f.c2p(t),m=r/c.scale,x=r/f.scale;if(a=d.datapoints.pointsize,c.options.inverseTransform&&(m=Number.MAX_VALUE),f.options.inverseTransform&&(x=Number.MAX_VALUE),d.lines.show||d.points.show)for(n=0;n<p.length;n+=a){var g=p[n],w=p[n+1];if(null!=g&&!(g-h>m||g-h<-m||w-u>x||w-u<-x)){var v=Math.abs(c.p2c(g)-e),b=Math.abs(f.p2c(w)-t),y=v*v+b*b;y<s&&(s=y,l=[o,n/a])}}if(d.bars.show&&!l){var D,_;switch(d.bars.align){case"left":D=0;break;case"right":D=-d.bars.barWidth;break;default:D=-d.bars.barWidth/2}for(_=D+d.bars.barWidth,n=0;n<p.length;n+=a){var g=p[n],w=p[n+1],k=p[n+2];null!=g&&(oe[o].bars.horizontal?h<=Math.max(k,g)&&h>=Math.min(k,g)&&u>=w+D&&u<=w+_:h>=g+D&&h<=g+_&&u>=Math.min(k,w)&&u<=Math.max(k,w))&&(l=[o,n/a])}}}return l?(o=l[0],n=l[1],a=oe[o].datapoints.pointsize,{datapoint:oe[o].datapoints.points.slice(n*a,(n+1)*a),dataIndex:n,series:oe[o],seriesIndex:o}):null}function X(e){ne.grid.hoverable&&G("plothover",e,function(e){return 0!=e.hoverable})}function V(e){ne.grid.hoverable&&G("plothover",e,function(e){return!1})}function U(e){G("plotclick",e,function(e){return 0!=e.clickable})}function G(e,t,o){var n=se.offset(),a=t.pageX-n.left-pe.left,r=t.pageY-n.top-pe.top,s=u({left:a,top:r});s.pageX=t.pageX,s.pageY=t.pageY;var l=q(a,r,o);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+n.left+pe.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+n.top+pe.top,10)),ne.grid.autoHighlight){for(var d=0;d<ge.length;++d){var c=ge[d];c.auto!=e||l&&c.series==l.series&&c.point[0]==l.datapoint[0]&&c.point[1]==l.datapoint[1]||K(c.series,c.point)}l&&J(l.series,l.datapoint,e)}i.trigger(e,[s,l])}function Q(){var e=ne.interaction.redrawOverlayInterval;return e==-1?void Y():void(we||(we=setTimeout(Y,e)))}function Y(){we=null,de.save(),re.clear(),de.translate(pe.left,pe.top);var e,t;for(e=0;e<ge.length;++e)t=ge[e],t.series.bars.show?te(t.series,t.point):ee(t.series,t.point);de.restore(),s(me.drawOverlay,[de])}function J(e,t,i){if("number"==typeof e&&(e=oe[e]),"number"==typeof t){var o=e.datapoints.pointsize;t=e.datapoints.points.slice(o*t,o*(t+1))}var n=Z(e,t);n==-1?(ge.push({series:e,point:t,auto:i}),Q()):i||(ge[n].auto=!1)}function K(e,t){if(null==e&&null==t)return ge=[],void Q();if("number"==typeof e&&(e=oe[e]),"number"==typeof t){var i=e.datapoints.pointsize;t=e.datapoints.points.slice(i*t,i*(t+1))}var o=Z(e,t);o!=-1&&(ge.splice(o,1),Q())}function Z(e,t){for(var i=0;i<ge.length;++i){var o=ge[i];if(o.series==e&&o.point[0]==t[0]&&o.point[1]==t[1])return i}return-1}function ee(t,i){var o=i[0],n=i[1],a=t.xaxis,r=t.yaxis,s="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString();if(!(o<a.min||o>a.max||n<r.min||n>r.max)){var l=t.points.radius+t.points.lineWidth/2;de.lineWidth=l,de.strokeStyle=s;var d=1.5*l;o=a.p2c(o),n=r.p2c(n),de.beginPath(),"circle"==t.points.symbol?de.arc(o,n,d,0,2*Math.PI,!1):t.points.symbol(de,o,n,d,!1),de.closePath(),de.stroke()}}function te(t,i){var o,n="string"==typeof t.highlightColor?t.highlightColor:e.color.parse(t.color).scale("a",.5).toString(),a=n;switch(t.bars.align){case"left":o=0;break;case"right":o=-t.bars.barWidth;break;default:o=-t.bars.barWidth/2}de.lineWidth=t.bars.lineWidth,de.strokeStyle=n,A(i[0],i[1],i[2]||0,o,o+t.bars.barWidth,function(){return a},t.xaxis,t.yaxis,de,t.bars.horizontal,t.bars.lineWidth)}function ie(t,i,o,n){if("string"==typeof t)return t;for(var a=le.createLinearGradient(0,o,0,i),r=0,s=t.colors.length;r<s;++r){var l=t.colors[r];if("string"!=typeof l){var d=e.color.parse(n);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}a.addColorStop(r/(s-1),l)}return a}var oe=[],ne={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},ae=null,re=null,se=null,le=null,de=null,ce=[],fe=[],pe={left:0,right:0,top:0,bottom:0},he=0,ue=0,me={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},xe=this;xe.setData=c,xe.setupGrid=S,xe.draw=$,xe.getPlaceholder=function(){return i},xe.getCanvas=function(){return ae.element},xe.getPlotOffset=function(){return pe},xe.width=function(){return he},xe.height=function(){return ue},xe.offset=function(){var e=se.offset();return e.left+=pe.left,e.top+=pe.top,e},xe.getData=function(){return oe},xe.getAxes=function(){var t={};return e.each(ce.concat(fe),function(e,i){i&&(t[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),t},xe.getXAxes=function(){return ce},xe.getYAxes=function(){return fe},xe.c2p=u,xe.p2c=m,xe.getOptions=function(){return ne},xe.highlight=J,xe.unhighlight=K,xe.triggerRedrawOverlay=Q,xe.pointOffset=function(e){return{left:parseInt(ce[p(e,"x")-1].p2c(+e.x)+pe.left,10),top:parseInt(fe[p(e,"y")-1].p2c(+e.y)+pe.top,10)}},xe.shutdown=y,xe.destroy=function(){y(),i.removeData("plot").empty(),oe=[],ne=null,ae=null,re=null,se=null,le=null,de=null,ce=[],fe=[],me=null,ge=[],xe=null},xe.resize=function(){var e=i.width(),t=i.height();ae.resize(e,t),re.resize(e,t)},xe.hooks=me,l(xe),d(a),v(),c(n),S(),$(),b();var ge=[],we=null}function o(e,t){return t*Math.floor(e/t)}var n=Object.prototype.hasOwnProperty;e.fn.detach||(e.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),t.prototype.resize=function(e,t){if(e<=0||t<=0)throw new Error("Invalid dimensions for plot, width = "+e+", height = "+t);var i=this.element,o=this.context,n=this.pixelRatio;this.width!=e&&(i.width=e*n,i.style.width=e+"px",this.width=e),this.height!=t&&(i.height=t*n,i.style.height=t+"px",this.height=t),o.restore(),o.save(),o.scale(n,n)},t.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},t.prototype.render=function(){var e=this._textCache;for(var t in e)if(n.call(e,t)){var i=this.getTextLayer(t),o=e[t];i.hide();for(var a in o)if(n.call(o,a)){var r=o[a];for(var s in r)if(n.call(r,s)){for(var l,d=r[s].positions,c=0;l=d[c];c++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(d.splice(c--,1),l.rendered&&l.element.detach());0==d.length&&delete r[s]}}i.show()}},t.prototype.getTextLayer=function(t){var i=this.text[t];return null==i&&(null==this.textContainer&&(this.textContainer=e("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[t]=e("<div></div>").addClass(t).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},t.prototype.getTextInfo=function(t,i,o,n,a){var r,s,l,d;if(i=""+i,r="object"==typeof o?o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:o,s=this._textCache[t],null==s&&(s=this._textCache[t]={}),l=s[r],null==l&&(l=s[r]={}),d=l[i],null==d){var c=e("<div></div>").html(i).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(t));"object"==typeof o?c.css({font:r,color:o.color}):"string"==typeof o&&c.addClass(o),d=l[i]={width:c.outerWidth(!0),height:c.outerHeight(!0),element:c,positions:[]},c.detach()}return d},t.prototype.addText=function(e,t,i,o,n,a,r,s,l){var d=this.getTextInfo(e,o,n,a,r),c=d.positions;"center"==s?t-=d.width/2:"right"==s&&(t-=d.width),"middle"==l?i-=d.height/2:"bottom"==l&&(i-=d.height);for(var f,p=0;f=c[p];p++)if(f.x==t&&f.y==i)return void(f.active=!0);f={active:!0,rendered:!1,element:c.length?d.element.clone():d.element,x:t,y:i},c.push(f),f.element.css({top:Math.round(i),left:Math.round(t),"text-align":s})},t.prototype.removeText=function(e,t,i,o,a,r){if(null==o){var s=this._textCache[e];if(null!=s)for(var l in s)if(n.call(s,l)){var d=s[l];for(var c in d)if(n.call(d,c))for(var f,p=d[c].positions,h=0;f=p[h];h++)f.active=!1}}else for(var f,p=this.getTextInfo(e,o,a,r).positions,h=0;f=p[h];h++)f.x==t&&f.y==i&&(f.active=!1)},e.plot=function(t,o,n){var a=new i(e(t),o,n,e.plot.plugins);return a},e.plot.version="0.8.3",e.plot.plugins=[],e.fn.plot=function(t,i){return this.each(function(){e.plot(this,t,i)})}}(jQuery),function(e,t,i){"$:nomunge";function o(i){s===!0&&(s=i||1);for(var l=a.length-1;l>=0;l--){var p=e(a[l]);if(p[0]==t||p.is(":visible")){var h=p.width(),u=p.height(),m=p.data(c);!m||h===m.w&&u===m.h||(p.trigger(d,[m.w=h,m.h=u]),s=i||!0)}else m=p.data(c),m.w=0,m.h=0}null!==n&&(s&&(null==i||i-s<1e3)?n=t.requestAnimationFrame(o):(n=setTimeout(o,r[f]),s=!1))}var n,a=[],r=e.resize=e.extend(e.resize,{}),s=!1,l="setTimeout",d="resize",c=d+"-special-event",f="pendingDelay",p="activeDelay",h="throttleWindow";r[f]=200,r[p]=20,r[h]=!0,e.event.special[d]={setup:function(){if(!r[h]&&this[l])return!1;var t=e(this);a.push(this),t.data(c,{w:t.width(),h:t.height()}),1===a.length&&(n=i,o())},teardown:function(){if(!r[h]&&this[l])return!1;for(var t=e(this),i=a.length-1;i>=0;i--)if(a[i]==this){a.splice(i,1);break}t.removeData(c),a.length||(s?cancelAnimationFrame(n):clearTimeout(n),n=null)},add:function(t){function o(t,o,a){var r=e(this),s=r.data(c)||{};s.w=o!==i?o:r.width(),s.h=a!==i?a:r.height(),n.apply(this,arguments)}if(!r[h]&&this[l])return!1;var n;return e.isFunction(t)?(n=t,o):(n=t.handler,void(t.handler=o))}},t.requestAnimationFrame||(t.requestAnimationFrame=function(){return t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame||t.oRequestAnimationFrame||t.msRequestAnimationFrame||function(e,i){return t.setTimeout(function(){e((new Date).getTime())},r[p])}}()),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(){return t.webkitCancelRequestAnimationFrame||t.mozCancelRequestAnimationFrame||t.oCancelRequestAnimationFrame||t.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(e){function t(e){function t(){var t=e.getPlaceholder();0!=t.width()&&0!=t.height()&&(e.resize(),e.setupGrid(),e.draw())}function i(e,i){e.getPlaceholder().resize(t)}function o(e,i){e.getPlaceholder().unbind("resize",t)}e.hooks.bindEvents.push(i),e.hooks.shutdown.push(o)}var i={};e.plot.plugins.push({init:t,options:i,name:"resize",version:"1.0"})}(jQuery),function(e){function t(){return!!document.createElement("canvas").getContext}function i(){if(!t())return!1;var e=document.createElement("canvas"),i=e.getContext("2d");return"function"==typeof i.fillText}function o(){var e=document.createElement("div");return"undefined"!=typeof e.style.MozTransition||"undefined"!=typeof e.style.OTransition||"undefined"!=typeof e.style.webkitTransition||"undefined"!=typeof e.style.transition}function n(e,t,i,o,n){this.axisName=e,this.position=t,this.padding=i,this.plot=o,this.opts=n,this.width=0,this.height=0}function a(e,t,i,o,a){n.prototype.constructor.call(this,e,t,i,o,a)}function r(e,t,i,o,a){n.prototype.constructor.call(this,e,t,i,o,a),this.elem=null}function s(e,t,i,o,n){r.prototype.constructor.call(this,e,t,i,o,n)}function l(e,t,i,o,n){s.prototype.constructor.call(this,e,t,i,o,n),this.requiresResize=!1}function d(t){t.hooks.processOptions.push(function(t,n){if(n.axisLabels.show){var d=!1,c={},f=2;t.hooks.draw.push(function(t,n){var p=!1;d?(d=!1,e.each(t.getAxes(),function(e,i){var o=i.options||t.getOptions()[e];o&&o.axisLabel&&i.show&&c[e].draw(i.box)})):(e.each(t.getAxes(),function(e,n){var d=n.options||t.getOptions()[e];if(e in c&&(n.labelHeight=n.labelHeight-c[e].height,n.labelWidth=n.labelWidth-c[e].width,d.labelHeight=n.labelHeight,d.labelWidth=n.labelWidth,c[e].cleanup(),delete c[e]),d&&d.axisLabel&&n.show){p=!0;var h=null;if(d.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)h=d.axisLabelUseHtml||!o()&&!i()&&!d.axisLabelUseCanvas?r:d.axisLabelUseCanvas||!o()?a:s;else{var u=navigator.userAgent,m=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=m.exec(u)&&(rv=parseFloat(RegExp.$1)),h=rv>=9&&!d.axisLabelUseCanvas&&!d.axisLabelUseHtml?s:d.axisLabelUseCanvas||d.axisLabelUseHtml?d.axisLabelUseCanvas?a:r:l}var x=void 0===d.axisLabelPadding?f:d.axisLabelPadding;c[e]=new h(e,n.position,x,t,d),c[e].calculateSize(),d.labelHeight=n.labelHeight+c[e].height,d.labelWidth=n.labelWidth+c[e].width}}),p&&(d=!0,t.setupGrid(),t.draw()))})}})}var c={axisLabels:{show:!0}};n.prototype.cleanup=function(){},a.prototype=new n,a.prototype.constructor=a,a.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels+this.padding,this.opts.axisLabelFontSizePixels+this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},a.prototype.draw=function(e){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var t=this.plot.getCanvas().getContext("2d");t.save(),t.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,t.fillStyle=this.opts.axisLabelColour;var i,o,n=t.measureText(this.opts.axisLabel).width,a=this.opts.axisLabelFontSizePixels,r=0;"top"==this.position?(i=e.left+e.width/2-n/2,o=e.top+.72*a):"bottom"==this.position?(i=e.left+e.width/2-n/2,o=e.top+e.height-.72*a):"left"==this.position?(i=e.left+.72*a,o=e.height/2+e.top+n/2,r=-Math.PI/2):"right"==this.position&&(i=e.left+e.width-.72*a,o=e.height/2+e.top-n/2,r=Math.PI/2),t.translate(i,o),t.rotate(r),t.fillText(this.opts.axisLabel,0,0),t.restore()},r.prototype=new n,r.prototype.constructor=r,r.prototype.calculateSize=function(){var t=e('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(t),this.labelWidth=t.outerWidth(!0),this.labelHeight=t.outerHeight(!0),t.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},r.prototype.cleanup=function(){this.elem&&this.elem.remove()},r.prototype.draw=function(t){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=e('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+"px")):"bottom"==this.position?(this.elem.css("left",t.left+t.width/2-this.labelWidth/2+"px"),this.elem.css("top",t.top+t.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+"px")):"right"==this.position&&(this.elem.css("top",t.top+t.height/2-this.labelHeight/2+"px"),this.elem.css("left",t.left+t.width-this.labelWidth+"px"))},s.prototype=new r,s.prototype.constructor=s,s.prototype.calculateSize=function(){r.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},s.prototype.transforms=function(e,t,i){var o={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=t||0!=i){var n=" translate("+t+"px, "+i+"px)";o["-moz-transform"]+=n,o["-webkit-transform"]+=n,o["-o-transform"]+=n,o["-ms-transform"]+=n}if(0!=e){var a=" rotate("+e+"deg)";o["-moz-transform"]+=a,o["-webkit-transform"]+=a,o["-o-transform"]+=a,o["-ms-transform"]+=a}var r="top: 0; left: 0; ";for(var s in o)o[s]&&(r+=s+":"+o[s]+";");return r+=";"},s.prototype.calculateOffsets=function(e){var t={x:0,y:0,degrees:0};return"bottom"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top+e.height-this.labelHeight):"top"==this.position?(t.x=e.left+e.width/2-this.labelWidth/2,t.y=e.top):"left"==this.position?(t.degrees=-90,t.x=e.left-this.labelWidth/2+this.labelHeight/2,t.y=e.height/2+e.top):"right"==this.position&&(t.degrees=90,t.x=e.left+e.width-this.labelWidth/2-this.labelHeight/2,t.y=e.height/2+e.top),t.x=Math.round(t.x),t.y=Math.round(t.y),t},s.prototype.draw=function(t){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var i=this.calculateOffsets(t);this.elem=e('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(i.degrees,i.x,i.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},l.prototype=new s,l.prototype.constructor=l,l.prototype.transforms=function(e,t,i){var o="";if(0!=e){for(var n=e/90;n<0;)n+=4;o+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+n+"); ",this.requiresResize="right"==this.position}return 0!=t&&(o+="left: "+t+"px; "),0!=i&&(o+="top: "+i+"px; "),o},l.prototype.calculateOffsets=function(e){var t=s.prototype.calculateOffsets.call(this,e);return"top"==this.position?t.y=e.top+1:"left"==this.position?(t.x=e.left,t.y=e.height/2+e.top-this.labelWidth/2):"right"==this.position&&(t.x=e.left+e.width-this.labelHeight,t.y=e.height/2+e.top-this.labelWidth/2),t},l.prototype.draw=function(e){s.prototype.draw.call(this,e),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},e.plot.plugins.push({init:d,options:c,name:"axisLabels",version:"2.0"})}(jQuery);