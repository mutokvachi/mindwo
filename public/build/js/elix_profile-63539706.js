!function(t){t.fn.FreeForm=function(e){var i=t.extend({},t.fn.FreeForm.defaults,e);return this.each(function(){new t.FreeForm(this,i)})},t.fn.FreeForm.defaults={editBtnSelector:".dx-edit-general",saveBtnSelector:".dx-save-general",cancelBtnSelector:".dx-cancel-general",names:[]},t.FreeForm=function(e,i){t.data(e,"FreeForm",this);var o=this;this.root=t(e),this.options=i,this.fields=t("[data-name]",this.root).filter(function(){if(0==o.options.names.length||o.options.names.indexOf(t(this).data("name"))!=-1)return!0}),this.originalData={},this.editButton=t(this.options.editBtnSelector,this.root),this.saveButton=t(this.options.saveBtnSelector,this.root),this.cancelButton=t(this.options.cancelBtnSelector,this.root),this.editButton.click(function(){o.edit()}),this.saveButton.click(function(){o.save()}),this.cancelButton.click(function(){o.cancel()})},t.extend(t.FreeForm.prototype,{edit:function(){var e=this,i={model:this.root.data("model"),item_id:this.root.data("item_id"),list_id:this.root.data("list_id"),fields:[]};this.fields.each(function(){e.originalData[t(this).data("name")]=t(this).html(),i.fields.push({name:t(this).data("name"),display:t(this).data("display")?t(this).data("display"):"raw"})}),show_page_splash(1),t.ajax({type:"POST",url:DX_CORE.site_url+"freeform/"+i.item_id+"/edit",dataType:"json",data:i,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);e.editButton.hide(),e.saveButton.show(),e.cancelButton.show();for(var o=0;o<i.fields.length;o++){var n=i.fields[o].name,a=i.fields[o].input,r=t('[data-name="'+n+'"]',e.root);r.length&&r.html(a)}hide_page_splash(1)},error:function(t,e,i){console.log(e),console.log(t),console.log(i)}})},save:function(){var e=this,i={},o=process_data_fields(this.root.attr("id"));o.append("model",this.root.data("model")),o.append("item_id",this.root.data("item_id")),o.append("list_id",this.root.data("list_id")),o.append("edit_form_id",this.root.data("form_id")),this.fields.each(function(){i[t(this).data("name")]={display:t(this).data("display")?t(this).data("display"):"raw"}}),o.append("field_metadata",JSON.stringify(i)),show_page_splash(1),t.ajax({type:"POST",url:DX_CORE.site_url+"freeform/"+this.root.data("item_id")+"?_method=PUT",dataType:"json",processData:!1,contentType:!1,data:o,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);e.editButton.show(),e.saveButton.hide(),e.cancelButton.hide();for(var o=0;o<i.fields.length;o++){var n=i.fields[o].name,a=i.fields[o].html,r=t('[data-name="'+n+'"]',e.root);r.length&&r.html(a)}hide_page_splash(1)},error:function(t,e,i){console.log(e),console.log(t),console.log(i)}})},cancel:function(){var e=this;this.editButton.show(),this.saveButton.hide(),this.cancelButton.hide(),this.fields.each(function(){t(this).html(e.originalData[t(this).data("name")])})}})}(jQuery),function(t){t.fn.InlineForm=function(e){var i=t.extend({},t.fn.InlineForm.defaults,e);return this.each(function(){new t.InlineForm(this,i)})},t.fn.InlineForm.defaults={beforeSave:null,afterSave:null,empl_search_page_url:"/search"},t.InlineForm=function(e,i){t.data(e,"InlineForm",this);var o=this;this.options=i,this.root=t(e),this.tabs=t(".tab-pane",this.root).not(".dx-grid-tab-pane"),this.fields=t("[data-name]",this.root),this.fieldNames=[],this.fields.each(function(){o.fieldNames.push(t(this).data("name"))}),this.originalTabs={},this.originalFields={},this.editButton=t(".dx-edit-profile",this.root),this.saveButton=t(".dx-save-profile",this.root),this.cancelButton=t(".dx-cancel-profile",this.root),this.deleteButton=t(".dx-delete-profile",this.root),this.requests={},this.onRequestSuccess=[],this.onRequestFailed=[],this.editButton.click(function(){o.edit()}),this.saveButton.click(function(){o.save()}),this.cancelButton.click(function(){o.cancel()}),this.deleteButton.click(function(){o.destroy()})},t.extend(t.InlineForm.prototype,{initRequest:function(t){this.requests={total:t,succeeded:0,failed:0},this.onRequestSuccess=[],this.onRequestFailed=[]},setRequestStatus:function(t){if(t?this.requests.succeeded++:this.requests.failed++,this.requests.total===this.requests.succeeded+this.requests.failed){if(0===this.requests.failed)for(var e=0;e<this.onRequestSuccess.length;e++)this.onRequestSuccess[e].func(this.onRequestSuccess[e].args);else for(var e=0;e<this.onRequestFailed.length;e++)this.onRequestFailed[e].func(this.onRequestFailed[e].args);hide_page_splash(1)}},storeOriginalData:function(){var e=this;this.fields=t("[data-name]",this.root),this.tabs.each(function(){e.originalTabs[t(this).data("tabTitle")]=t(this).html()}),this.fields.each(function(){e.originalFields[t(this).data("name")]=t(this).html()})},edit:function(){var e=this,i={list_id:this.root.data("list_id"),tab_list:[],field_list:this.fieldNames};this.storeOriginalData(),show_page_splash(1),t.ajax({type:"POST",url:DX_CORE.site_url+"inlineform/"+this.root.data("item_id")+"/edit",dataType:"json",data:i,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);e.editButton.hide();for(var o=t(t.parseHTML("<div>"+i.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=t(o[n]),r=t('[data-tab-title="'+a.data("tabTitle")+'"]',e.root);r.length&&r.html(a.html())}for(var s in i.fields)t('[data-name="'+s+'"]').html(i.fields[s]);1==e.root.data("has_users_documents_access")&&window.DxEmpPersDocs.toggleDisable(!1),hide_page_splash(1),t(".dx-stick-footer").show()},error:function(t,e,i){console.log(e),console.log(t),hide_page_splash(1)}})},save:function(){var e=this,i=process_data_fields(this.root.attr("id"));i.append("item_id",this.root.data("item_id")),i.append("list_id",this.root.data("list_id")),i.append("edit_form_id",this.root.data("form_id")),i.append("redirect_url",this.root.data("redirect_url")),i.append("field_list",JSON.stringify(this.fieldNames));var o=DX_CORE.site_url+"inlineform";"create"!=this.root.data("mode")&&(o+="/"+this.root.data("item_id")+"?_method=PUT"),show_page_splash(1),t.ajax({type:"POST",url:o,dataType:"json",processData:!1,contentType:!1,data:i,success:function(i){if("undefined"!=typeof i.success&&0==i.success)return notify_err(i.error),void hide_page_splash(1);if("create"==e.root.data("mode"))return void(1==e.root.data("has_users_documents_access")?(window.DxEmpPersDocs.userId=i.item_id,window.DxEmpPersDocs.onClickSaveDocs(function(){hide_page_splash(1),t(".dx-stick-footer").hide(),window.location=i.redirect})):(hide_page_splash(1),t(".dx-stick-footer").hide(),window.location=i.redirect));if(1==e.root.data("has_users_documents_access"))window.DxEmpPersDocs.onClickSaveDocs(function(){window.DxEmpPersDocs.toggleDisable(!0),e.editButton.show();for(var o=t(t.parseHTML("<div>"+i.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=t(o[n]),r=t('[data-tab-title="'+a.data("tabTitle")+'"]',e.root);r.length&&r.html(a.html())}e.options.afterSave&&e.options.afterSave(),hide_page_splash(1),t(".dx-stick-footer").hide()});else{e.editButton.show();for(var o=t(t.parseHTML("<div>"+i.tabs+"</div>")).find(".tab-pane").not(".dx-grid-tab-pane"),n=0;n<o.length;n++){var a=t(o[n]),r=t('[data-tab-title="'+a.data("tabTitle")+'"]',e.root);r.length&&r.html(a.html())}for(var s in i.fields)t('[data-name="'+s+'"]').html(i.fields[s]);e.options.afterSave&&e.options.afterSave(),hide_page_splash(1),t(".dx-stick-footer").hide()}},error:function(t,e,i){console.log(t),console.log(i)}})},cancel:function(){if("create"==this.root.data("mode"))return show_page_splash(1),void(window.location=this.options.empl_search_page_url);this.editButton.show();for(var e in this.originalTabs)this.tabs.filter('[data-tab-title="'+e+'"]').html(this.originalTabs[e]);for(var i in this.originalFields)this.fields.filter('[data-name="'+i+'"]').html(this.originalFields[i]);t(".dx-stick-footer").hide(),1==this.root.data("has_users_documents_access")&&window.DxEmpPersDocs.cancelEditMode()},destroy:function(){if(confirm(Lang.get("frame.confirm_delete"))){var e={edit_form_id:this.root.data("form_id"),item_id:this.root.data("item_id")};show_page_splash(1),t.ajax({type:"POST",url:DX_CORE.site_url+"inlineform/"+this.root.data("item_id")+"?_method=DELETE",dataType:"json",data:e,success:function(t){return"undefined"!=typeof t.success&&0==t.success?(notify_err(t.error),void hide_page_splash(1)):void(window.location=t.redirect)},error:function(t,e,i){console.log(e),console.log(t),hide_page_splash(1)}})}}})}(jQuery),function(t){t.fn.EmplLinksFix=function(e){var i=t.extend({},t.fn.EmplLinksFix.defaults,e);return this.each(function(){new t.EmplLinksFix(this,i)})},t.fn.EmplLinksFix.defaults={profile_url:"/employee/profile/"},t.EmplLinksFix=function(e,i){t.data(e,"EmplLinksFix",this);var o=this;this.options=i,this.root=t(e),this.flds_managers=t(".dx-autocompleate-field[data-item-field=manager_id], .dx-autocompleate-field[data-item-field=reporting_manager_id]",this.root),this.tiles_managers=t(".employee-manager-tile",this.root),this.tiles_managers.each(function(){t(this).data("is-fix-init")||(t(this).click(function(){o.show_tile_manager(t(this).data("empl-id"))}),t(this).data("is-fix-init",1))}),this.flds_managers.each(function(){if(!t(this).data("is-fix-init")){var e=t(this);e.find(".dx-rel-id-add-btn").off("click"),e.find(".dx-rel-id-add-btn").click(function(){o.show_manager(e)}),e.find(".dx-rel-id-add-btn").tooltipster("destroy"),e.find(".dx-rel-id-add-btn").attr("title",Lang.get("empl_profile.hint_view_profile")),e.find(".dx-rel-id-add-btn").tooltipster({theme:"tooltipster-light",animation:"grow",maxWidth:300}),t(this).data("is-fix-init",1)}})},t.extend(t.EmplLinksFix.prototype,{show_manager:function(t){var e=t.find(".dx-auto-input-id").val();0!=e&&(show_page_splash(1),window.location=this.options.profile_url+e)},show_tile_manager:function(t){show_page_splash(1),window.location=this.options.profile_url+t}})}(jQuery),$(document).ajaxComplete(function(){$(".dx-employee-profile.freeform").EmplLinksFix()}),$(document).ready(function(){$(".dx-employee-profile.freeform").EmplLinksFix()}),window.DxEmpPersDocs=window.DxEmpPersDocs||{rowCount:0,userId:0,dateFormat:"",locale:"en",empDocListId:0,empDocFldId:0,isInit:!1,viewClone:"",callbackOnInitiSuccess:function(t){},callbackOnSaveSuccess:function(t){},callbackOnError:function(t){},init:function(t){t?window.DxEmpPersDocs.callbackOnInitiSuccess=t:window.DxEmpPersDocs.callbackOnInitiSuccess=function(){},window.DxEmpPersDocs.userId=""==$("#dx-emp-pers-docs-panel").attr("data-user-id")?0:$("#dx-emp-pers-docs-panel").attr("data-user-id"),window.DxEmpPersDocs.dateFormat=$("#dx-emp-pers-docs-panel").attr("data-date-format"),window.DxEmpPersDocs.locale=$("#dx-emp-pers-docs-panel").attr("data-locale"),window.DxEmpPersDocs.empDocListId=$("#dx-emp-pers-docs-panel").attr("data-emp-docs-list-id"),window.DxEmpPersDocs.empDocFldId=$("#dx-emp-pers-docs-panel").attr("data-emp-docs-fld-id"),$("#dx-emp-pers-docs-country").change(window.DxEmpPersDocs.onChangeCountry),window.DxEmpPersDocs.loadEmployeeData()},enterEditMode:function(){window.DxEmpPersDocs.viewClone=$("#dx-emp-pers-docs-panel").clone(!0,!0)},cancelEditMode:function(){$("#dx-emp-pers-docs-panel").replaceWith(window.DxEmpPersDocs.viewClone),window.DxEmpPersDocs.viewClone=null,window.DxEmpPersDocs.toggleDisable(!0)},loadEmployeeData:function(){$.ajax({url:"/employee/personal_docs/get/employee_docs/"+window.DxEmpPersDocs.userId,type:"get",success:window.DxEmpPersDocs.onSuccessLoadEmployeeData,error:window.DxEmpPersDocs.onAjaxError})},onSuccessLoadEmployeeData:function(t){if(""!=t)for(var e=JSON.parse(t),i=0;i<e.length;i++)window.DxEmpPersDocs.createNewDocRow(!1,e[i]);$("#dx-emp-pers-docs-country").trigger("change")},createNewDocRow:function(t,e){var i=$($("#dx-emp-pers-docs-new-row").html());i=t?window.DxEmpPersDocs.setDocTypeValue(i,e):window.DxEmpPersDocs.setValues(i,e),t?$("#dx-emp-pers-docs-table").append(i):$("#dx-emp-pers-docs-table-history").append(i),window.DxEmpPersDocs.bindDocRowEvenets(i),window.DxEmpPersDocs.rowCount++},initValidToDatePicker:function(t,e){var i=t.find(".dx-emp-pers-docs-validto-input");return i.attr("id","dx-emp-pers-docs-validto-input-"+window.DxEmpPersDocs.rowCount),i.val(e),i.datetimepicker({lang:window.DxEmpPersDocs.locale,format:window.DxEmpPersDocs.dateFormat,timepicker:0,dayOfWeekStart:1,closeOnDateSelect:!0}),t.find(".dx-emp-pers-docs-validto-input-calc").click({picker_num:window.DxEmpPersDocs.rowCount},function(t){jQuery("#dx-emp-pers-docs-validto-input-"+t.data.picker_num).datetimepicker("show")}),t},setDocTypeValue:function(t,e){return t=window.DxEmpPersDocs.initValidToDatePicker(t,""),t.attr("id","dx-emp-pers-docs-row-"+e.id),t.find(".dx-emp-pers-docs-type-input").val(e.id),t.find(".dx-emp-pers-docs-type-label").html(e.name),t},setValues:function(t,e){return t=window.DxEmpPersDocs.initValidToDatePicker(t,e.valid_to),t.attr("id","dx-emp-pers-docs-row-"+e.doc_id),t.find(".dx-emp-pers-docs-id-input").val(e.id),t.find(".dx-emp-pers-docs-type-input").val(e.doc_id),t.find(".dx-emp-pers-docs-type-label").html(e.personal_document.name),t.find(".dx-emp-pers-docs-docnr-input").val(e.doc_nr),t.find(".dx-emp-pers-docs-publisher-input").val(e.publisher),window.DxEmpPersDocs.setFileValue(t,e.id,e.file_name),t},setFileValue:function(t,e,i){if(i&&null!=i){var o="<a href='JavaScript: download_file("+e+" , "+window.DxEmpPersDocs.empDocListId+", "+window.DxEmpPersDocs.empDocFldId+");'>"+i+"</a>";t.find(".dx-emp-pers-docs-file-input-download").html(o),t.find(".dx-emp-pers-docs-file-input-isset").val(1)}},clearDocRow:function(t){var e=$(t.target).parents(".dx-emp-pers-docs-row");e.find(".dx-emp-pers-docs-id-input").val(0),e.find(".dx-emp-pers-docs-docnr-input").val(""),e.find(".dx-emp-pers-docs-validto-input").val(""),e.find(".dx-emp-pers-docs-publisher-input").val(""),e.find(".dx-emp-pers-docs-file-input-remove-btn").trigger("click")},getDataForSave:function(){for(var t=$("#dx-emp-pers-docs-table .dx-emp-pers-docs-row"),e={user_id:window.DxEmpPersDocs.userId,rows:[]},i=new FormData,o=0;o<t.length;o++){var n=$(t[o]),a={};a.id=n.find(".dx-emp-pers-docs-id-input").val(),a.document_type=n.find(".dx-emp-pers-docs-type-input").val(),a.publisher=n.find(".dx-emp-pers-docs-publisher-input").val(),a.valid_to=n.find(".dx-emp-pers-docs-validto-input").val(),a.doc_nr=n.find(".dx-emp-pers-docs-docnr-input").val(),a.file_remove=""===$.trim(n.find(".dx-emp-pers-docs-file-input-download").html());var r=n.find(".dx-emp-pers-docs-file-input-file").prop("files")[0];i.append("file"+o,r),e.rows.push(a)}return i.append("doc_country_id",$("#dx-emp-pers-docs-country").val()),i.append("data",JSON.stringify(e)),i},bindDocRowEvenets:function(t){t.find(".dx-emp-pers-docs-clear-btn").click(window.DxEmpPersDocs.clearDocRow)},onChangeCountry:function(t){var e=$(t.target).val();$.ajax({url:DX_CORE.site_url+"employee/personal_docs/get/docs_by_country/"+e,type:"get",success:window.DxEmpPersDocs.onSuccessChangeCountry,error:window.DxEmpPersDocs.onAjaxError})},onSuccessChangeCountry:function(t){var e=JSON.parse(t);window.DxEmpPersDocs.drawRows(e),window.DxEmpPersDocs.finishInit()},drawRows:function(t){$("#dx-emp-pers-docs-table").contents().appendTo("#dx-emp-pers-docs-table-history");for(var e=0;e<t.length;e++){var i=t[e],o=$("#dx-emp-pers-docs-row-"+i.id);o.length>0?o.appendTo("#dx-emp-pers-docs-table"):window.DxEmpPersDocs.createNewDocRow(!0,i)}$("#dx-emp-pers-docs-table").find("[data-tooltip-title]").each(function(t,e){$(e).attr("title",$(e).data("tooltip-title")),$(e).tooltip()})},finishInit:function(){window.DxEmpPersDocs.isInit||(window.DxEmpPersDocs.isInit=!0,0==window.DxEmpPersDocs.userId?window.DxEmpPersDocs.toggleDisable(!1):window.DxEmpPersDocs.toggleDisable(!0),window.DxEmpPersDocs.callbackOnInitiSuccess())},onClickSaveDocs:function(t,e){t?window.DxEmpPersDocs.callbackOnSaveSuccess=t:window.DxEmpPersDocs.callbackOnSaveSuccess=function(){},e?window.DxEmpPersDocs.callbackOnError=e:window.DxEmpPersDocs.callbackOnError=function(){};var i=window.DxEmpPersDocs.getDataForSave();$.ajax({url:DX_CORE.site_url+"employee/personal_docs/save",data:i,type:"post",processData:!1,dataType:"json",contentType:!1,success:window.DxEmpPersDocs.onSuccessSave,error:window.DxEmpPersDocs.onAjaxError})},onSuccessSave:function(t){for(var e=0;e<t.length;e++){var i=t[e],o=$("#dx-emp-pers-docs-row-"+i.doc_id);o.length>0&&(o.find(".dx-emp-pers-docs-id-input").val(i.id),o.find(".dx-emp-pers-docs-file-input-remove-btn").trigger("click"),window.DxEmpPersDocs.setFileValue(o,i.id,i.file_name))}$("#dx-emp-pers-docs-table-history").empty(),window.DxEmpPersDocs.callbackOnSaveSuccess()},onAjaxError:function(t){window.DxEmpPersDocs.finishInit(),window.DxEmpPersDocs.callbackOnError()},toggleDisable:function(t){t||window.DxEmpPersDocs.enterEditMode();for(var e=$("#dx-emp-pers-docs-table .dx-emp-pers-docs-row"),i=0;i<e.length;i++){var o=$(e[i]);o.find(".dx-emp-pers-docs-publisher-input").prop("disabled",t),o.find(".dx-emp-pers-docs-validto-input").prop("disabled",t),o.find(".dx-emp-pers-docs-validto-input-calc").prop("disabled",t),o.find(".dx-emp-pers-docs-docnr-input").prop("disabled",t),t?(o.find(".dx-emp-pers-docs-file-input-set-btn").hide(),o.find(".dx-emp-pers-docs-file-input-file").prop("files")[0]&&o.find(".dx-emp-pers-docs-file-input-remove-btn").hide(),o.find(".dx-emp-pers-docs-clear-btn").hide()):(o.find(".dx-emp-pers-docs-validto-input").datetimepicker("destroy"),o.find(".dx-emp-pers-docs-validto-input").datetimepicker({lang:window.DxEmpPersDocs.locale,format:window.DxEmpPersDocs.dateFormat,timepicker:0,dayOfWeekStart:1,closeOnDateSelect:!0}),o.find(".dx-emp-pers-docs-file-input-set-btn").show(),o.find(".dx-emp-pers-docs-file-input-file").prop("files")[0]&&o.find(".dx-emp-pers-docs-file-input-remove-btn").show(),o.find(".dx-emp-pers-docs-clear-btn").show())}$("#dx-emp-pers-docs-country").prop("disabled",t)}},window.DxEmpNotes=window.DxEmpNotes||{userId:0,isLoaded:!1,isSending:!1,chatFormColorDefault:"white",init:function(t){window.DxEmpNotes.userId=t},loadView:function(){window.DxEmpNotes.isLoaded||(show_page_splash(1),$.ajax({url:DX_CORE.site_url+"employee/notes/get/view/"+window.DxEmpNotes.userId,type:"get",success:window.DxEmpNotes.onLoadViewSuccess,error:function(t){hide_page_splash(1)}}))},onLoadViewSuccess:function(t){$("#dx-tab_notes").html(t),window.DxEmpNotes.chatFormColorDefault=$(".dx-emp-notes-chat-form").css("background-color"),$(".dx-emp-notes-btn").click(window.DxEmpNotes.onNoteEnter),$(".dx-emp-notes-input-text").keyup(function(t){13==t.keyCode&&window.DxEmpNotes.onNoteEnter()}),$(".dx-emp-notes-chat").on("click",".dx-emp-notes-btn-link-edit",{},window.DxEmpNotes.onEditClick),$(".dx-emp-notes-chat").on("click",".dx-emp-notes-btn-link-delete",{},window.DxEmpNotes.onDeleteClick),window.DxEmpNotes.isLoaded=!0,hide_page_splash(1)},getDataForSave:function(){var t={};return t.note_id=$(".dx-emp-notes-input-id").val(),t.user_id=window.DxEmpNotes.userId,t.note_text=$(".dx-emp-notes-input-text").val(),t},onNoteEnter:function(){if(!window.DxEmpNotes.isSending){window.DxEmpNotes.showLoading();var t=window.DxEmpNotes.getDataForSave();$.ajax({url:DX_CORE.site_url+"employee/notes/save",data:t,type:"post",success:window.DxEmpNotes.onSuccessSave,error:window.DxEmpNotes.onAjaxError})}},onEditClick:function(t){var e=$(t.target),i=e.closest(".message").find(".dx-emp-notes-edit-id").val(),o=e.closest(".message").find(".dx-emp-notes-edit-body").html();$(".dx-emp-notes-input-id").val(i),$(".dx-emp-notes-input-text").val(o),$(".dx-emp-notes-input-text").focus();var n=$(".dx-emp-notes-chat-form");n.animate({backgroundColor:"#7bb6de"},"slow",function(){n.animate({backgroundColor:window.DxEmpNotes.chatFormColorDefault},"slow")})},onDeleteClick:function(t){var e=$(t.target),i=e.closest(".message").find(".dx-emp-notes-edit-id").val();PageMain.showConfirm(window.DxEmpNotes.onDeleteConfirm,i,Lang.get("employee.notes.delete_note_title"),Lang.get("employee.notes.delete_note_text"),Lang.get("form.btn_delete"),"")},onDeleteConfirm:function(t){if(!window.DxEmpNotes.isSending){window.DxEmpNotes.showLoading();var e={note_id:t};$.ajax({url:DX_CORE.site_url+"employee/notes/delete",data:e,type:"delete",success:window.DxEmpNotes.onSuccessDelete,error:window.DxEmpNotes.onAjaxError})}},showLoading:function(){window.DxEmpNotes.isSending=!0,show_page_splash(1)},hideLoading:function(){window.DxEmpNotes.isSending=!1,hide_page_splash(1)},onSuccessDelete:function(t){t&&$(".dx-emp-notes-edit-id[value="+t+"]").closest("li").remove(),window.DxEmpNotes.hideLoading()},onSuccessSave:function(t){var e=$(".dx-emp-notes-input-id").val();e&&$(".dx-emp-notes-edit-id[value="+e+"]").closest("li").remove(),$(".dx-emp-notes-input-id").val(""),$(".dx-emp-notes-input-text").val(""),window.DxEmpNotes.hideLoading(),t.view&&$(".dx-emp-notes-chat").prepend($(t.view).fadeIn())},onAjaxError:function(t){window.DxEmpNotes.hideLoading()}},window.DxEmpTimeoff=window.DxEmpTimeoff||{userId:0,isLoaded:!1,isSending:!1,isTableInit:!1,isChartInit:!1,doTableRefresh:!0,doChartRefresh:!0,currentTab:0,dateFrom:"",dateTo:"",timeoff:1,timeoffTitle:"",timeoffIsAccrualHours:"",dateFormat:"",workingDayH:"",init:function(t){window.DxEmpTimeoff.userId=t},getFilterParams:function(){return window.DxEmpTimeoff.userId+"/"+window.DxEmpTimeoff.timeoff+"/"+window.DxEmpTimeoff.dateFrom/1e3+"/"+window.DxEmpTimeoff.dateTo/1e3},loadView:function(){window.DxEmpTimeoff.isLoaded||(window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/view/"+window.DxEmpTimeoff.userId,type:"get",success:window.DxEmpTimeoff.onLoadViewSuccess,error:function(t){window.DxEmpTimeoff.hideLoading()}}))},onLoadViewSuccess:function(t){$("#dx-tab_timeoff").html(t),window.DxEmpTimeoff.workingDayH=$("#dx-emp-timeoff-panel").data("working_day_h"),window.DxEmpTimeoff.dateFormat=$("#dx-emp-timeoff-panel").data("date_format").toUpperCase(),window.DxEmpTimeoff.dateFrom=new Date($("#dx-emp-timeoff-panel").data("date_from")),window.DxEmpTimeoff.dateTo=new Date($("#dx-emp-timeoff-panel").data("date_to")),window.DxEmpTimeoff.timeoff=$("#dx-emp-timeoff-panel").data("timeoff"),window.DxEmpTimeoff.timeoffTitle=$("#dx-emp-timeoff-panel").data("timeoff_title"),window.DxEmpTimeoff.timeoffIsAccrualHours=$("#dx-emp-timeoff-panel").data("is_accrual_hours"),$("#dx-tab_timeoff [data-counter='counterup']").counterUp({delay:10,time:700}),$(".dx-accrual-calc").click(function(){window.DxEmpTimeoff.showLoading();var t=$(this);$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/calculate/"+window.DxEmpTimeoff.userId+"/"+t.data("timeoff"),type:"get",success:function(e){window.DxEmpTimeoff.onCalculateSuccess(t,e)}})}),$(".dx-accrual-delete").click(function(){PageMain.showConfirm(window.DxEmpTimeoff.deleteCalculation,$(this),Lang.get("form.modal_confirm_title"),Lang.get("empl_profile.timeoff.delete_confirm"),Lang.get("form.btn_delete"),Lang.get("form.btn_cancel"))}),$(".dx-accrual-policy").click(function(){window.DxEmpTimeoff.showLoading(),view_list_item("form",$(this).data("policy-id"),$(this).data("policy-list-id"),$(this).data("policy-user-field-id"),window.DxEmpTimeoff.userId,"","")}),$(".dx-emp-timeoff-sel-timeoff").click(window.DxEmpTimeoff.timeoffSelect),$(".dx-emp-timeoff-tab-chart-btn").click(function(){window.DxEmpTimeoff.switchTab(0)}),$(".dx-emp-timeoff-tab-table-btn").click(function(){window.DxEmpTimeoff.switchTab(1)}),window.DxEmpTimeoff.initFilterDatePicker(),window.DxEmpTimeoff.reloadTabData(),window.DxEmpTimeoff.isLoaded=!0},onCalculateSuccess:function(t,e){var i=t.closest("div.widget-thumb"),o=i.find(".widget-thumb-body-stat").first();o.attr("data-value",e.balance),o.html(e.balance),i.find(".widget-thumb-subtitle").first().html(e.unit+' <span style="font-size: 10px">'+Lang.get("empl_profile.timeoff.available")+"</span>"),o.counterUp({delay:10,time:700}),window.DxEmpTimeoff.timeoff==t.data("timeoff")?window.DxEmpTimeoff.setDataRefreshRequest():window.DxEmpTimeoff.hideLoading()},deleteCalculation:function(t){window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/delete_calculated/"+window.DxEmpTimeoff.userId+"/"+t.data("timeoff"),type:"get",success:function(e){window.DxEmpTimeoff.onCalculateSuccess(t,e)}})},setDataRefreshRequest:function(){window.DxEmpTimeoff.doChartRefresh=!0,window.DxEmpTimeoff.doTableRefresh=!0,window.DxEmpTimeoff.reloadTabData()},switchTab:function(t){window.DxEmpTimeoff.currentTab=t,$("#dx-emp-timeoff-chart-tooltip").hide(),window.DxEmpTimeoff.reloadTabData()},reloadTabData:function(){0===window.DxEmpTimeoff.currentTab?window.DxEmpTimeoff.loadChart():window.DxEmpTimeoff.loadTable()},loadTable:function(){window.DxEmpTimeoff.isTableInit?window.DxEmpTimeoff.doTableRefresh&&window.DxEmpTimeoff.refreshDataTable():(window.DxEmpTimeoff.initDataTable(),window.DxEmpTimeoff.isTableInit=!0),window.DxEmpTimeoff.doTableRefresh=!1},loadChart:function(){window.DxEmpTimeoff.isChartInit?window.DxEmpTimeoff.doChartRefresh&&window.DxEmpTimeoff.refreshChart():(window.DxEmpTimeoff.initChart(),window.DxEmpTimeoff.isChartInit=!0),window.DxEmpTimeoff.doChartRefresh=!1},initDataTable:function(){window.DxEmpTimeoff.dataTable||(window.DxEmpTimeoff.dataTable=$("#dx-empt-datatable-timeoff").DataTable({serverSide:!0,searching:!1,order:[[0,"desc"]],ajax:DX_CORE.site_url+"employee/timeoff/get/table/"+window.DxEmpTimeoff.getFilterParams(),columns:[{data:"calc_date",name:"calc_date"},{data:"from_date",name:"from_date"},{data:"to_date",name:"to_date"},{data:"timeoff_record_type.title",name:"timeoffRecordType.title"},{data:"notes",name:"notes"},{data:"amount",name:"amount"},{data:"balance",name:"balance"}],fnPreDrawCallback:function(){window.DxEmpTimeoff.showLoading()},fnDrawCallback:function(){window.DxEmpTimeoff.hideLoading()}}))},refreshDataTable:function(){var t=DX_CORE.site_url+"employee/timeoff/get/table/"+window.DxEmpTimeoff.getFilterParams();window.DxEmpTimeoff.dataTable.ajax.url(t).load()},initChart:function(){window.DxEmpTimeoff.showLoading(),$("<div id='dx-emp-timeoff-chart-tooltip'></div>").appendTo("body"),$("#dx-emp-timeoff-chart").bind("plothover",window.DxEmpTimeoff.onPlotHover),window.DxEmpTimeoff.refreshChart()},refreshChart:function(){window.DxEmpTimeoff.showLoading(),$.ajax({url:DX_CORE.site_url+"employee/timeoff/get/chart/"+window.DxEmpTimeoff.getFilterParams(),type:"get",success:window.DxEmpTimeoff.onGetChartDataSuccess,error:window.DxEmpTimeoff.onAjaxError})},getUnit:function(){return 1==window.DxEmpTimeoff.timeoffIsAccrualHours?Lang.get("calendar.hours"):Lang.get("calendar.days")},loadTotalData:function(t){if(t)if(t[0]){window.DxEmpTimeoff.timeoffIsAccrualHours=t[0].is_accrual_hours;var e=window.DxEmpTimeoff.getUnit();$("#dx-emp-timeoff-period-balance").html(window.DxEmpTimeoff.calculateChartHours(t[0].balance)+" "+e),$("#dx-emp-timeoff-period-accrued").html(window.DxEmpTimeoff.calculateChartHours(t[0].accrued)+" "+e),$("#dx-emp-timeoff-period-used").html(window.DxEmpTimeoff.calculateChartHours(t[0].used)+" "+e)}else $("#dx-emp-timeoff-period-balance").html(0),$("#dx-emp-timeoff-period-accrued").html(0),$("#dx-emp-timeoff-period-used").html(0)},calculateChartHours:function(t){return 1==window.DxEmpTimeoff.timeoffIsAccrualHours?t:Math.round(100*(t/window.DxEmpTimeoff.workingDayH+1e-5))/100},onGetChartDataSuccess:function(t){window.DxEmpTimeoff.loadTotalData(t.total);for(var e=[],i=[],o=[],n=[],a=0;a<t.res.length;a++){var r=t.res[a];n.push([a,r.calc_date_year+"/"+r.calc_date_month]),Number(r.used)>0&&e.push([a,window.DxEmpTimeoff.calculateChartHours(r.used)]),Number(r.accrued)>0&&i.push([a,window.DxEmpTimeoff.calculateChartHours(r.accrued)]),o.push([a,window.DxEmpTimeoff.calculateChartHours(r.balance)])}$.plot("#dx-emp-timeoff-chart",[{data:e,bars:{show:!0,barWidth:.4,align:"left"},color:"#E7505A",label:Lang.get("empl_profile.timeoff.used")},{data:i,bars:{show:!0,barWidth:.4,align:"right"},color:"#26C281",label:Lang.get("empl_profile.timeoff.accrued")},{data:o,lines:{show:!0},points:{show:!0},color:"#3598DC",label:Lang.get("empl_profile.timeoff.balance"),animator:{start:100,steps:t.res.length,duration:1e3,direction:"right"}}],{axisLabels:{show:!0},yaxes:[{axisLabel:window.DxEmpTimeoff.getUnit()}],xaxis:{ticks:n},grid:{hoverable:!0}}),window.DxEmpTimeoff.hideLoading()},onPlotHover:function(t,e,i){if(i){var o=i.datapoint[1].toFixed(2);$("#dx-emp-timeoff-chart-tooltip").html(i.series.label+": "+o+" "+window.DxEmpTimeoff.getUnit()).css({top:e.pageY+20,left:e.pageX+5}).fadeIn(200)}else $("#dx-emp-timeoff-chart-tooltip").hide()},initFilterDatePicker:function(){$(".dx-emp-timeoff-filter-year-btn").click(function(t){$("#dx-emp-timeoff-filter-year-input").data("daterangepicker").toggle()}),$("#dx-emp-timeoff-filter-year-input").daterangepicker({locale:{format:window.DxEmpTimeoff.dateFormat,separator:" - ",applyLabel:Lang.get("date_range.btn_set"),cancelLabel:Lang.get("date_range.btn_cancel"),fromLabel:Lang.get("date_range.lbl_from"),toLabel:Lang.get("date_range.lbl_to"),customRangeLabel:Lang.get("date_range.lbl_interval"),daysOfWeek:[Lang.get("date_range.d_7"),Lang.get("date_range.d_1"),Lang.get("date_range.d_2"),Lang.get("date_range.d_3"),Lang.get("date_range.d_4"),Lang.get("date_range.d_5"),Lang.get("date_range.d_6")],monthNames:[Lang.get("date_range.m_jan"),Lang.get("date_range.m_feb"),Lang.get("date_range.m_mar"),Lang.get("date_range.m_apr"),Lang.get("date_range.m_may"),Lang.get("date_range.m_jun"),Lang.get("date_range.m_jul"),Lang.get("date_range.m_aug"),Lang.get("date_range.m_sep"),Lang.get("date_range.m_oct"),Lang.get("date_range.m_nov"),Lang.get("date_range.m_dec")],firstDay:1},startDate:window.DxEmpTimeoff.dateFrom,endDate:window.DxEmpTimeoff.dateTo,showDropdowns:!0},window.DxEmpTimeoff.yearSelect)},yearSelect:function(t,e,i){window.DxEmpTimeoff.dateFrom=t,window.DxEmpTimeoff.dateTo=e,$(".dx-emp-timeoff-curr-year").html(t.format(window.DxEmpTimeoff.dateFormat)+" - "+e.format(window.DxEmpTimeoff.dateFormat)),window.DxEmpTimeoff.setDataRefreshRequest()},timeoffSelect:function(t){var e=$(t.target);window.DxEmpTimeoff.timeoff=e.data("value"),window.DxEmpTimeoff.timeoffTitle=e.data("title"),window.DxEmpTimeoff.timeoffIsAccrualHours=e.data("is_accrual_hours"),$(".dx-emp-timeoff-curr-timeoff").html(window.DxEmpTimeoff.timeoffTitle),window.DxEmpTimeoff.setDataRefreshRequest()},showLoading:function(){window.DxEmpTimeoff.inProgressCount++,show_page_splash(1)},hideLoading:function(){window.DxEmpTimeoff.isSending=!1,hide_page_splash(1)},onAjaxError:function(t){window.DxEmpTimeoff.hideLoading()}},!function(t){"use strict";t.fn.counterUp=function(e){var i=t.extend({time:400,delay:10},e);return this.each(function(){var e=t(this),o=i,n=function(){var t=o.time/o.delay,i=e.attr("data-value"),n=[i],a=/[0-9]+,[0-9]+/.test(i);i=i.replace(/,/g,"");for(var r=(/^[0-9]+$/.test(i),/^[0-9]+\.[0-9]+$/.test(i)),s=r?(i.split(".")[1]||[]).length:0,l=t;l>=1;l--){var d=parseInt(i/t*l);if(r&&(d=parseFloat(i/t*l).toFixed(s)),a)for(;/(\d+)(\d{3})/.test(d.toString());)d=d.toString().replace(/(\d+)(\d{3})/,"$1,$2");n.unshift(d)}e.data("counterup-nums",n),e.text("0");var c=function(){e.text(e.data("counterup-nums").shift()),e.data("counterup-nums").length?setTimeout(e.data("counterup-func"),o.delay):(delete e.data("counterup-nums"),e.data("counterup-nums",null),e.data("counterup-func",null))};e.data("counterup-func",c),setTimeout(e.data("counterup-func"),o.delay)};e.waypoint(n,{offset:"100%",triggerOnce:!0})})}}(jQuery),function(){var t=[].indexOf||function(t){for(var e=0,i=this.length;e<i;e++)if(e in this&&this[e]===t)return e;return-1},e=[].slice;!function(t,e){return"function"==typeof define&&define.amd?define("waypoints",["jquery"],function(i){return e(i,t)}):e(t.jQuery,t)}(this,function(i,o){var n,a,r,s,l,d,c,f,p,h,u,m,x,g,w,v;return n=i(o),f=t.call(o,"ontouchstart")>=0,s={horizontal:{},vertical:{}},l=1,c={},d="waypoints-context-id",u="resize.waypoints",m="scroll.waypoints",
x=1,g="waypoints-waypoint-ids",w="waypoint",v="waypoints",a=function(){function t(t){var e=this;this.$element=t,this.element=t[0],this.didResize=!1,this.didScroll=!1,this.id="context"+l++,this.oldScroll={x:t.scrollLeft(),y:t.scrollTop()},this.waypoints={horizontal:{},vertical:{}},t.data(d,this.id),c[this.id]=this,t.bind(m,function(){var t;if(!e.didScroll&&!f)return e.didScroll=!0,t=function(){return e.doScroll(),e.didScroll=!1},o.setTimeout(t,i[v].settings.scrollThrottle)}),t.bind(u,function(){var t;if(!e.didResize)return e.didResize=!0,t=function(){return i[v]("refresh"),e.didResize=!1},o.setTimeout(t,i[v].settings.resizeThrottle)})}return t.prototype.doScroll=function(){var t,e=this;return t={horizontal:{newScroll:this.$element.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.$element.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}},!f||t.vertical.oldScroll&&t.vertical.newScroll||i[v]("refresh"),i.each(t,function(t,o){var n,a,r;return r=[],a=o.newScroll>o.oldScroll,n=a?o.forward:o.backward,i.each(e.waypoints[t],function(t,e){var i,n;return o.oldScroll<(i=e.offset)&&i<=o.newScroll?r.push(e):o.newScroll<(n=e.offset)&&n<=o.oldScroll?r.push(e):void 0}),r.sort(function(t,e){return t.offset-e.offset}),a||r.reverse(),i.each(r,function(t,e){if(e.options.continuous||t===r.length-1)return e.trigger([n])})}),this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.refresh=function(){var t,e,o,n=this;return o=i.isWindow(this.element),e=this.$element.offset(),this.doScroll(),t={horizontal:{contextOffset:o?0:e.left,contextScroll:o?0:this.oldScroll.x,contextDimension:this.$element.width(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:o?0:e.top,contextScroll:o?0:this.oldScroll.y,contextDimension:o?i[v]("viewportHeight"):this.$element.height(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}},i.each(t,function(t,e){return i.each(n.waypoints[t],function(t,o){var n,a,r,s,l;if(n=o.options.offset,r=o.offset,a=i.isWindow(o.element)?0:o.$element.offset()[e.offsetProp],i.isFunction(n)?n=n.apply(o.element):"string"==typeof n&&(n=parseFloat(n),o.options.offset.indexOf("%")>-1&&(n=Math.ceil(e.contextDimension*n/100))),o.offset=a-e.contextOffset+e.contextScroll-n,(!o.options.onlyOnScroll||null==r)&&o.enabled)return null!==r&&r<(s=e.oldScroll)&&s<=o.offset?o.trigger([e.backward]):null!==r&&r>(l=e.oldScroll)&&l>=o.offset?o.trigger([e.forward]):null===r&&e.oldScroll>=o.offset?o.trigger([e.forward]):void 0})})},t.prototype.checkEmpty=function(){if(i.isEmptyObject(this.waypoints.horizontal)&&i.isEmptyObject(this.waypoints.vertical))return this.$element.unbind([u,m].join(" ")),delete c[this.id]},t}(),r=function(){function t(t,e,o){var n,a;o=i.extend({},i.fn[w].defaults,o),"bottom-in-view"===o.offset&&(o.offset=function(){var t;return t=i[v]("viewportHeight"),i.isWindow(e.element)||(t=e.$element.height()),t-i(this).outerHeight()}),this.$element=t,this.element=t[0],this.axis=o.horizontal?"horizontal":"vertical",this.callback=o.handler,this.context=e,this.enabled=o.enabled,this.id="waypoints"+x++,this.offset=null,this.options=o,e.waypoints[this.axis][this.id]=this,s[this.axis][this.id]=this,n=null!=(a=t.data(g))?a:[],n.push(this.id),t.data(g,n)}return t.prototype.trigger=function(t){if(this.enabled)return null!=this.callback&&this.callback.apply(this.element,t),this.options.triggerOnce?this.destroy():void 0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0},t.prototype.destroy=function(){return delete s[this.axis][this.id],delete this.context.waypoints[this.axis][this.id],this.context.checkEmpty()},t.getWaypointsByElement=function(t){var e,o;return(o=i(t).data(g))?(e=i.extend({},s.horizontal,s.vertical),i.map(o,function(t){return e[t]})):[]},t}(),h={init:function(t,e){var o;return null==e&&(e={}),null==(o=e.handler)&&(e.handler=t),this.each(function(){var t,o,n,s;return t=i(this),n=null!=(s=e.context)?s:i.fn[w].defaults.context,i.isWindow(n)||(n=t.closest(n)),n=i(n),o=c[n.data(d)],o||(o=new a(n)),new r(t,o,e)}),i[v]("refresh"),this},disable:function(){return h._invoke(this,"disable")},enable:function(){return h._invoke(this,"enable")},destroy:function(){return h._invoke(this,"destroy")},prev:function(t,e){return h._traverse.call(this,t,e,function(t,e,i){if(e>0)return t.push(i[e-1])})},next:function(t,e){return h._traverse.call(this,t,e,function(t,e,i){if(e<i.length-1)return t.push(i[e+1])})},_traverse:function(t,e,n){var a,r;return null==t&&(t="vertical"),null==e&&(e=o),r=p.aggregate(e),a=[],this.each(function(){var e;return e=i.inArray(this,r[t]),n(a,e,r[t])}),this.pushStack(a)},_invoke:function(t,e){return t.each(function(){var t;return t=r.getWaypointsByElement(this),i.each(t,function(t,i){return i[e](),!0})}),this}},i.fn[w]=function(){var t,o;return o=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],h[o]?h[o].apply(this,t):i.isFunction(o)?h.init.apply(this,arguments):i.isPlainObject(o)?h.init.apply(this,[null,o]):o?i.error("The "+o+" method does not exist in jQuery Waypoints."):i.error("jQuery Waypoints needs a callback function or handler option.")},i.fn[w].defaults={context:o,continuous:!0,enabled:!0,horizontal:!1,offset:0,triggerOnce:!1},p={refresh:function(){return i.each(c,function(t,e){return e.refresh()})},viewportHeight:function(){var t;return null!=(t=o.innerHeight)?t:n.height()},aggregate:function(t){var e,o,n;return e=s,t&&(e=null!=(n=c[i(t).data(d)])?n.waypoints:void 0),e?(o={horizontal:[],vertical:[]},i.each(o,function(t,n){return i.each(e[t],function(t,e){return n.push(e)}),n.sort(function(t,e){return t.offset-e.offset}),o[t]=i.map(n,function(t){return t.element}),o[t]=i.unique(o[t])}),o):[]},above:function(t){return null==t&&(t=o),p._filter(t,"vertical",function(t,e){return e.offset<=t.oldScroll.y})},below:function(t){return null==t&&(t=o),p._filter(t,"vertical",function(t,e){return e.offset>t.oldScroll.y})},left:function(t){return null==t&&(t=o),p._filter(t,"horizontal",function(t,e){return e.offset<=t.oldScroll.x})},right:function(t){return null==t&&(t=o),p._filter(t,"horizontal",function(t,e){return e.offset>t.oldScroll.x})},enable:function(){return p._invoke("enable")},disable:function(){return p._invoke("disable")},destroy:function(){return p._invoke("destroy")},extendFn:function(t,e){return h[t]=e},_invoke:function(t){var e;return e=i.extend({},s.vertical,s.horizontal),i.each(e,function(e,i){return i[t](),!0})},_filter:function(t,e,o){var n,a;return(n=c[i(t).data(d)])?(a=[],i.each(n.waypoints[e],function(t,e){if(o(n,e))return a.push(e)}),a.sort(function(t,e){return t.offset-e.offset}),i.map(a,function(t){return t.element})):[]}},i[v]=function(){var t,i;return i=arguments[0],t=2<=arguments.length?e.call(arguments,1):[],p[i]?p[i].apply(null,t):p.aggregate.call(null,i)},i[v].settings={resizeThrottle:100,scrollThrottle:30},n.load(function(){return i[v]("refresh")})})}.call(this),function(t){t.color={},t.color.make=function(e,i,o,n){var a={};return a.r=e||0,a.g=i||0,a.b=o||0,a.a=null!=n?n:1,a.add=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]+=e;return a.normalize()},a.scale=function(t,e){for(var i=0;i<t.length;++i)a[t.charAt(i)]*=e;return a.normalize()},a.toString=function(){return a.a>=1?"rgb("+[a.r,a.g,a.b].join(",")+")":"rgba("+[a.r,a.g,a.b,a.a].join(",")+")"},a.normalize=function(){function t(t,e,i){return e<t?t:e>i?i:e}return a.r=t(0,parseInt(a.r),255),a.g=t(0,parseInt(a.g),255),a.b=t(0,parseInt(a.b),255),a.a=t(0,a.a,1),a},a.clone=function(){return t.color.make(a.r,a.b,a.g,a.a)},a.normalize()},t.color.extract=function(e,i){var o;do{if(o=e.css(i).toLowerCase(),""!=o&&"transparent"!=o)break;e=e.parent()}while(e.length&&!t.nodeName(e.get(0),"body"));return"rgba(0, 0, 0, 0)"==o&&(o="transparent"),t.color.parse(o)},t.color.parse=function(i){var o,n=t.color.make;if(o=/rgb\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10));if(o=/rgba\(\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]{1,3})\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(parseInt(o[1],10),parseInt(o[2],10),parseInt(o[3],10),parseFloat(o[4]));if(o=/rgb\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]));if(o=/rgba\(\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\%\s*,\s*([0-9]+(?:\.[0-9]+)?)\s*\)/.exec(i))return n(2.55*parseFloat(o[1]),2.55*parseFloat(o[2]),2.55*parseFloat(o[3]),parseFloat(o[4]));if(o=/#([a-fA-F0-9]{2})([a-fA-F0-9]{2})([a-fA-F0-9]{2})/.exec(i))return n(parseInt(o[1],16),parseInt(o[2],16),parseInt(o[3],16));if(o=/#([a-fA-F0-9])([a-fA-F0-9])([a-fA-F0-9])/.exec(i))return n(parseInt(o[1]+o[1],16),parseInt(o[2]+o[2],16),parseInt(o[3]+o[3],16));var a=t.trim(i).toLowerCase();return"transparent"==a?n(255,255,255,0):(o=e[a]||[0,0,0],n(o[0],o[1],o[2]))};var e={aqua:[0,255,255],azure:[240,255,255],beige:[245,245,220],black:[0,0,0],blue:[0,0,255],brown:[165,42,42],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgrey:[169,169,169],darkgreen:[0,100,0],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkviolet:[148,0,211],fuchsia:[255,0,255],gold:[255,215,0],green:[0,128,0],indigo:[75,0,130],khaki:[240,230,140],lightblue:[173,216,230],lightcyan:[224,255,255],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightyellow:[255,255,224],lime:[0,255,0],magenta:[255,0,255],maroon:[128,0,0],navy:[0,0,128],olive:[128,128,0],orange:[255,165,0],pink:[255,192,203],purple:[128,0,128],violet:[128,0,128],red:[255,0,0],silver:[192,192,192],white:[255,255,255],yellow:[255,255,0]}}(jQuery),function(t){function e(e,i){var o=i.children("."+e)[0];if(null==o&&(o=document.createElement("canvas"),o.className=e,t(o).css({direction:"ltr",position:"absolute",left:0,top:0}).appendTo(i),!o.getContext)){if(!window.G_vmlCanvasManager)throw new Error("Canvas is not available. If you're using IE with a fall-back such as Excanvas, then there's either a mistake in your conditional include, or the page has no DOCTYPE and is rendering in Quirks Mode.");o=window.G_vmlCanvasManager.initElement(o)}this.element=o;var n=this.context=o.getContext("2d"),a=window.devicePixelRatio||1,r=n.webkitBackingStorePixelRatio||n.mozBackingStorePixelRatio||n.msBackingStorePixelRatio||n.oBackingStorePixelRatio||n.backingStorePixelRatio||1;this.pixelRatio=a/r,this.resize(i.width(),i.height()),this.textContainer=null,this.text={},this._textCache={}}function i(i,n,a,r){function s(t,e){e=[xt].concat(e);for(var i=0;i<t.length;++i)t[i].apply(this,e)}function l(){for(var i={Canvas:e},o=0;o<r.length;++o){var n=r[o];n.init(xt,i),n.options&&t.extend(!0,nt,n.options)}}function d(e){t.extend(!0,nt,e),e&&e.colors&&(nt.colors=e.colors),null==nt.xaxis.color&&(nt.xaxis.color=t.color.parse(nt.grid.color).scale("a",.22).toString()),null==nt.yaxis.color&&(nt.yaxis.color=t.color.parse(nt.grid.color).scale("a",.22).toString()),null==nt.xaxis.tickColor&&(nt.xaxis.tickColor=nt.grid.tickColor||nt.xaxis.color),null==nt.yaxis.tickColor&&(nt.yaxis.tickColor=nt.grid.tickColor||nt.yaxis.color),null==nt.grid.borderColor&&(nt.grid.borderColor=nt.grid.color),null==nt.grid.tickColor&&(nt.grid.tickColor=t.color.parse(nt.grid.color).scale("a",.22).toString());var o,n,a,r=i.css("font-size"),l=r?+r.replace("px",""):13,d={style:i.css("font-style"),size:Math.round(.8*l),variant:i.css("font-variant"),weight:i.css("font-weight"),family:i.css("font-family")};for(a=nt.xaxes.length||1,o=0;o<a;++o)n=nt.xaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=t.extend(!0,{},nt.xaxis,n),nt.xaxes[o]=n,n.font&&(n.font=t.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(a=nt.yaxes.length||1,o=0;o<a;++o)n=nt.yaxes[o],n&&!n.tickColor&&(n.tickColor=n.color),n=t.extend(!0,{},nt.yaxis,n),nt.yaxes[o]=n,n.font&&(n.font=t.extend({},d,n.font),n.font.color||(n.font.color=n.color),n.font.lineHeight||(n.font.lineHeight=Math.round(1.15*n.font.size)));for(nt.xaxis.noTicks&&null==nt.xaxis.ticks&&(nt.xaxis.ticks=nt.xaxis.noTicks),nt.yaxis.noTicks&&null==nt.yaxis.ticks&&(nt.yaxis.ticks=nt.yaxis.noTicks),nt.x2axis&&(nt.xaxes[1]=t.extend(!0,{},nt.xaxis,nt.x2axis),nt.xaxes[1].position="top",null==nt.x2axis.min&&(nt.xaxes[1].min=null),null==nt.x2axis.max&&(nt.xaxes[1].max=null)),nt.y2axis&&(nt.yaxes[1]=t.extend(!0,{},nt.yaxis,nt.y2axis),nt.yaxes[1].position="right",null==nt.y2axis.min&&(nt.yaxes[1].min=null),null==nt.y2axis.max&&(nt.yaxes[1].max=null)),nt.grid.coloredAreas&&(nt.grid.markings=nt.grid.coloredAreas),nt.grid.coloredAreasColor&&(nt.grid.markingsColor=nt.grid.coloredAreasColor),nt.lines&&t.extend(!0,nt.series.lines,nt.lines),nt.points&&t.extend(!0,nt.series.points,nt.points),nt.bars&&t.extend(!0,nt.series.bars,nt.bars),null!=nt.shadowSize&&(nt.series.shadowSize=nt.shadowSize),null!=nt.highlightColor&&(nt.series.highlightColor=nt.highlightColor),o=0;o<nt.xaxes.length;++o)x(ct,o+1).options=nt.xaxes[o];for(o=0;o<nt.yaxes.length;++o)x(ft,o+1).options=nt.yaxes[o];for(var c in mt)nt.hooks[c]&&nt.hooks[c].length&&(mt[c]=mt[c].concat(nt.hooks[c]));s(mt.processOptions,[nt])}function c(t){ot=f(t),g(),w()}function f(e){for(var i=[],o=0;o<e.length;++o){var n=t.extend(!0,{},nt.series);null!=e[o].data?(n.data=e[o].data,delete e[o].data,t.extend(!0,n,e[o]),e[o].data=n.data):n.data=e[o],i.push(n)}return i}function p(t,e){var i=t[e+"axis"];return"object"==typeof i&&(i=i.n),"number"!=typeof i&&(i=1),i}function h(){return t.grep(ct.concat(ft),function(t){return t})}function u(t){var e,i,o={};for(e=0;e<ct.length;++e)i=ct[e],i&&i.used&&(o["x"+i.n]=i.c2p(t.left));for(e=0;e<ft.length;++e)i=ft[e],i&&i.used&&(o["y"+i.n]=i.c2p(t.top));return void 0!==o.x1&&(o.x=o.x1),void 0!==o.y1&&(o.y=o.y1),o}function m(t){var e,i,o,n={};for(e=0;e<ct.length;++e)if(i=ct[e],i&&i.used&&(o="x"+i.n,null==t[o]&&1==i.n&&(o="x"),null!=t[o])){n.left=i.p2c(t[o]);break}for(e=0;e<ft.length;++e)if(i=ft[e],i&&i.used&&(o="y"+i.n,null==t[o]&&1==i.n&&(o="y"),null!=t[o])){n.top=i.p2c(t[o]);break}return n}function x(e,i){return e[i-1]||(e[i-1]={n:i,direction:e==ct?"x":"y",options:t.extend(!0,{},e==ct?nt.xaxis:nt.yaxis)}),e[i-1]}function g(){var e,i=ot.length,o=-1;for(e=0;e<ot.length;++e){var n=ot[e].color;null!=n&&(i--,"number"==typeof n&&n>o&&(o=n))}i<=o&&(i=o+1);var a,r=[],s=nt.colors,l=s.length,d=0;for(e=0;e<i;e++)a=t.color.parse(s[e%l]||"#666"),e%l==0&&e&&(d=d>=0?d<.5?-d-.2:0:-d),r[e]=a.scale("rgb",1+d);var c,f=0;for(e=0;e<ot.length;++e){if(c=ot[e],null==c.color?(c.color=r[f].toString(),++f):"number"==typeof c.color&&(c.color=r[c.color].toString()),null==c.lines.show){var h,u=!0;for(h in c)if(c[h]&&c[h].show){u=!1;break}u&&(c.lines.show=!0)}null==c.lines.zero&&(c.lines.zero=!!c.lines.fill),c.xaxis=x(ct,p(c,"x")),c.yaxis=x(ft,p(c,"y"))}}function w(){function e(t,e,i){e<t.datamin&&e!=-w&&(t.datamin=e),i>t.datamax&&i!=w&&(t.datamax=i)}var i,o,n,a,r,l,d,c,f,p,u,m,x=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,w=Number.MAX_VALUE;for(t.each(h(),function(t,e){e.datamin=x,e.datamax=g,e.used=!1}),i=0;i<ot.length;++i)r=ot[i],r.datapoints={points:[]},s(mt.processRawData,[r,r.data,r.datapoints]);for(i=0;i<ot.length;++i){if(r=ot[i],u=r.data,m=r.datapoints.format,!m){if(m=[],m.push({x:!0,number:!0,required:!0}),m.push({y:!0,number:!0,required:!0}),r.bars.show||r.lines.show&&r.lines.fill){var v=!!(r.bars.show&&r.bars.zero||r.lines.show&&r.lines.zero);m.push({y:!0,number:!0,required:!1,defaultValue:0,autoscale:v}),r.bars.horizontal&&(delete m[m.length-1].y,m[m.length-1].x=!0)}r.datapoints.format=m}if(null==r.datapoints.pointsize){r.datapoints.pointsize=m.length,d=r.datapoints.pointsize,l=r.datapoints.points;var b=r.lines.show&&r.lines.steps;for(r.xaxis.used=r.yaxis.used=!0,o=n=0;o<u.length;++o,n+=d){p=u[o];var y=null==p;if(!y)for(a=0;a<d;++a)c=p[a],f=m[a],f&&(f.number&&null!=c&&(c=+c,isNaN(c)?c=null:c==1/0?c=w:c==-(1/0)&&(c=-w)),null==c&&(f.required&&(y=!0),null!=f.defaultValue&&(c=f.defaultValue))),l[n+a]=c;if(y)for(a=0;a<d;++a)c=l[n+a],null!=c&&(f=m[a],f.autoscale!==!1&&(f.x&&e(r.xaxis,c,c),f.y&&e(r.yaxis,c,c))),l[n+a]=null;else if(b&&n>0&&null!=l[n-d]&&l[n-d]!=l[n]&&l[n-d+1]!=l[n+1]){for(a=0;a<d;++a)l[n+d+a]=l[n+a];l[n+1]=l[n-d+1],n+=d}}}}for(i=0;i<ot.length;++i)r=ot[i],s(mt.processDatapoints,[r,r.datapoints]);for(i=0;i<ot.length;++i){r=ot[i],l=r.datapoints.points,d=r.datapoints.pointsize,m=r.datapoints.format;var D=x,_=x,k=g,E=g;for(o=0;o<l.length;o+=d)if(null!=l[o])for(a=0;a<d;++a)c=l[o+a],f=m[a],f&&f.autoscale!==!1&&c!=w&&c!=-w&&(f.x&&(c<D&&(D=c),c>k&&(k=c)),f.y&&(c<_&&(_=c),c>E&&(E=c)));if(r.bars.show){var T;switch(r.bars.align){case"left":T=0;break;case"right":T=-r.bars.barWidth;break;default:T=-r.bars.barWidth/2}r.bars.horizontal?(_+=T,E+=T+r.bars.barWidth):(D+=T,k+=T+r.bars.barWidth)}e(r.xaxis,D,k),e(r.yaxis,_,E)}t.each(h(),function(t,e){e.datamin==x&&(e.datamin=null),e.datamax==g&&(e.datamax=null)})}function v(){i.css("padding",0).children().filter(function(){return!t(this).hasClass("flot-overlay")&&!t(this).hasClass("flot-base")}).remove(),"static"==i.css("position")&&i.css("position","relative"),at=new e("flot-base",i),rt=new e("flot-overlay",i),lt=at.context,dt=rt.context,st=t(rt.element).unbind();var o=i.data("plot");o&&(o.shutdown(),rt.clear()),i.data("plot",xt)}function b(){nt.grid.hoverable&&(st.mousemove(X),st.bind("mouseleave",V)),nt.grid.clickable&&st.click(U),s(mt.bindEvents,[st])}function y(){wt&&clearTimeout(wt),st.unbind("mousemove",X),st.unbind("mouseleave",V),st.unbind("click",U),s(mt.shutdown,[st])}function D(t){function e(t){return t}var i,o,n=t.options.transform||e,a=t.options.inverseTransform;"x"==t.direction?(i=t.scale=ht/Math.abs(n(t.max)-n(t.min)),o=Math.min(n(t.max),n(t.min))):(i=t.scale=ut/Math.abs(n(t.max)-n(t.min)),i=-i,o=Math.max(n(t.max),n(t.min))),n==e?t.p2c=function(t){return(t-o)*i}:t.p2c=function(t){return(n(t)-o)*i},a?t.c2p=function(t){return a(o+t/i)}:t.c2p=function(t){return o+t/i}}function _(t){for(var e=t.options,i=t.ticks||[],o=e.labelWidth||0,n=e.labelHeight||0,a=o||("x"==t.direction?Math.floor(at.width/(i.length||1)):null),r=t.direction+"Axis "+t.direction+t.n+"Axis",s="flot-"+t.direction+"-axis flot-"+t.direction+t.n+"-axis "+r,l=e.font||"flot-tick-label tickLabel",d=0;d<i.length;++d){var c=i[d];if(c.label){var f=at.getTextInfo(s,c.label,l,null,a);o=Math.max(o,f.width),n=Math.max(n,f.height)}}t.labelWidth=e.labelWidth||o,t.labelHeight=e.labelHeight||n}function k(e){var i=e.labelWidth,o=e.labelHeight,n=e.options.position,a="x"===e.direction,r=e.options.tickLength,s=nt.grid.axisMargin,l=nt.grid.labelMargin,d=!0,c=!0,f=!0,p=!1;t.each(a?ct:ft,function(t,i){i&&(i.show||i.reserveSpace)&&(i===e?p=!0:i.options.position===n&&(p?c=!1:d=!1),p||(f=!1))}),c&&(s=0),null==r&&(r=f?"full":5),isNaN(+r)||(l+=+r),a?(o+=l,"bottom"==n?(pt.bottom+=o+s,e.box={top:at.height-pt.bottom,height:o}):(e.box={top:pt.top+s,height:o},pt.top+=o+s)):(i+=l,"left"==n?(e.box={left:pt.left+s,width:i},pt.left+=i+s):(pt.right+=i+s,e.box={left:at.width-pt.right,width:i})),e.position=n,e.tickLength=r,e.box.padding=l,e.innermost=d}function E(t){"x"==t.direction?(t.box.left=pt.left-t.labelWidth/2,t.box.width=at.width-pt.left-pt.right+t.labelWidth):(t.box.top=pt.top-t.labelHeight/2,t.box.height=at.height-pt.bottom-pt.top+t.labelHeight)}function T(){var e,i=nt.grid.minBorderMargin;if(null==i)for(i=0,e=0;e<ot.length;++e)i=Math.max(i,2*(ot[e].points.radius+ot[e].points.lineWidth/2));var o={left:i,right:i,top:i,bottom:i};t.each(h(),function(t,e){e.reserveSpace&&e.ticks&&e.ticks.length&&("x"===e.direction?(o.left=Math.max(o.left,e.labelWidth/2),o.right=Math.max(o.right,e.labelWidth/2)):(o.bottom=Math.max(o.bottom,e.labelHeight/2),o.top=Math.max(o.top,e.labelHeight/2)))}),pt.left=Math.ceil(Math.max(o.left,pt.left)),pt.right=Math.ceil(Math.max(o.right,pt.right)),pt.top=Math.ceil(Math.max(o.top,pt.top)),pt.bottom=Math.ceil(Math.max(o.bottom,pt.bottom))}function S(){var e,i=h(),o=nt.grid.show;for(var n in pt){var a=nt.grid.margin||0;pt[n]="number"==typeof a?a:a[n]||0}s(mt.processOffset,[pt]);for(var n in pt)"object"==typeof nt.grid.borderWidth?pt[n]+=o?nt.grid.borderWidth[n]:0:pt[n]+=o?nt.grid.borderWidth:0;if(t.each(i,function(t,e){var i=e.options;e.show=null==i.show?e.used:i.show,e.reserveSpace=null==i.reserveSpace?e.show:i.reserveSpace,C(e)}),o){var r=t.grep(i,function(t){return t.show||t.reserveSpace});for(t.each(r,function(t,e){L(e),P(e),F(e,e.ticks),_(e)}),e=r.length-1;e>=0;--e)k(r[e]);T(),t.each(r,function(t,e){E(e)})}ht=at.width-pt.left-pt.right,ut=at.height-pt.bottom-pt.top,t.each(i,function(t,e){D(e)}),o&&W(),B()}function C(t){var e=t.options,i=+(null!=e.min?e.min:t.datamin),o=+(null!=e.max?e.max:t.datamax),n=o-i;if(0==n){var a=0==o?1:.01;null==e.min&&(i-=a),null!=e.max&&null==e.min||(o+=a)}else{var r=e.autoscaleMargin;null!=r&&(null==e.min&&(i-=n*r,i<0&&null!=t.datamin&&t.datamin>=0&&(i=0)),null==e.max&&(o+=n*r,o>0&&null!=t.datamax&&t.datamax<=0&&(o=0)))}t.min=i,t.max=o}function L(e){var i,n=e.options;i="number"==typeof n.ticks&&n.ticks>0?n.ticks:.3*Math.sqrt("x"==e.direction?at.width:at.height);var a=(e.max-e.min)/i,r=-Math.floor(Math.log(a)/Math.LN10),s=n.tickDecimals;null!=s&&r>s&&(r=s);var l,d=Math.pow(10,-r),c=a/d;if(c<1.5?l=1:c<3?(l=2,c>2.25&&(null==s||r+1<=s)&&(l=2.5,++r)):l=c<7.5?5:10,l*=d,null!=n.minTickSize&&l<n.minTickSize&&(l=n.minTickSize),e.delta=a,e.tickDecimals=Math.max(0,null!=s?s:r),e.tickSize=n.tickSize||l,"time"==n.mode&&!e.tickGenerator)throw new Error("Time mode requires the flot.time plugin.");if(e.tickGenerator||(e.tickGenerator=function(t){var e,i=[],n=o(t.min,t.tickSize),a=0,r=Number.NaN;do e=r,r=n+a*t.tickSize,i.push(r),++a;while(r<t.max&&r!=e);return i},e.tickFormatter=function(t,e){var i=e.tickDecimals?Math.pow(10,e.tickDecimals):1,o=""+Math.round(t*i)/i;if(null!=e.tickDecimals){var n=o.indexOf("."),a=n==-1?0:o.length-n-1;if(a<e.tickDecimals)return(a?o:o+".")+(""+i).substr(1,e.tickDecimals-a)}return o}),t.isFunction(n.tickFormatter)&&(e.tickFormatter=function(t,e){return""+n.tickFormatter(t,e)}),null!=n.alignTicksWithAxis){var f=("x"==e.direction?ct:ft)[n.alignTicksWithAxis-1];if(f&&f.used&&f!=e){var p=e.tickGenerator(e);if(p.length>0&&(null==n.min&&(e.min=Math.min(e.min,p[0])),null==n.max&&p.length>1&&(e.max=Math.max(e.max,p[p.length-1]))),e.tickGenerator=function(t){var e,i,o=[];for(i=0;i<f.ticks.length;++i)e=(f.ticks[i].v-f.min)/(f.max-f.min),e=t.min+e*(t.max-t.min),o.push(e);return o},!e.mode&&null==n.tickDecimals){var h=Math.max(0,-Math.floor(Math.log(e.delta)/Math.LN10)+1),u=e.tickGenerator(e);u.length>1&&/\..*0$/.test((u[1]-u[0]).toFixed(h))||(e.tickDecimals=h)}}}}function P(e){var i=e.options.ticks,o=[];null==i||"number"==typeof i&&i>0?o=e.tickGenerator(e):i&&(o=t.isFunction(i)?i(e):i);var n,a;for(e.ticks=[],n=0;n<o.length;++n){var r=null,s=o[n];"object"==typeof s?(a=+s[0],s.length>1&&(r=s[1])):a=+s,null==r&&(r=e.tickFormatter(a,e)),isNaN(a)||e.ticks.push({v:a,label:r})}}function F(t,e){t.options.autoscaleMargin&&e.length>0&&(null==t.options.min&&(t.min=Math.min(t.min,e[0].v)),null==t.options.max&&e.length>1&&(t.max=Math.max(t.max,e[e.length-1].v)))}function $(){at.clear(),s(mt.drawBackground,[lt]);var t=nt.grid;t.show&&t.backgroundColor&&M(),t.show&&!t.aboveData&&I();for(var e=0;e<ot.length;++e)s(mt.drawSeries,[lt,ot[e]]),R(ot[e]);s(mt.draw,[lt]),t.show&&t.aboveData&&I(),at.render(),Q()}function z(t,e){for(var i,o,n,a,r=h(),s=0;s<r.length;++s)if(i=r[s],i.direction==e&&(a=e+i.n+"axis",t[a]||1!=i.n||(a=e+"axis"),t[a])){o=t[a].from,n=t[a].to;break}if(t[a]||(i="x"==e?ct[0]:ft[0],o=t[e+"1"],n=t[e+"2"]),null!=o&&null!=n&&o>n){var l=o;o=n,n=l}return{from:o,to:n,axis:i}}function M(){lt.save(),lt.translate(pt.left,pt.top),lt.fillStyle=it(nt.grid.backgroundColor,ut,0,"rgba(255, 255, 255, 0)"),lt.fillRect(0,0,ht,ut),lt.restore()}function I(){var e,i,o,n;lt.save(),lt.translate(pt.left,pt.top);var a=nt.grid.markings;if(a)for(t.isFunction(a)&&(i=xt.getAxes(),i.xmin=i.xaxis.min,i.xmax=i.xaxis.max,i.ymin=i.yaxis.min,i.ymax=i.yaxis.max,a=a(i)),e=0;e<a.length;++e){var r=a[e],s=z(r,"x"),l=z(r,"y");if(null==s.from&&(s.from=s.axis.min),null==s.to&&(s.to=s.axis.max),null==l.from&&(l.from=l.axis.min),null==l.to&&(l.to=l.axis.max),!(s.to<s.axis.min||s.from>s.axis.max||l.to<l.axis.min||l.from>l.axis.max)){s.from=Math.max(s.from,s.axis.min),s.to=Math.min(s.to,s.axis.max),l.from=Math.max(l.from,l.axis.min),l.to=Math.min(l.to,l.axis.max);var d=s.from===s.to,c=l.from===l.to;if(!d||!c)if(s.from=Math.floor(s.axis.p2c(s.from)),s.to=Math.floor(s.axis.p2c(s.to)),l.from=Math.floor(l.axis.p2c(l.from)),l.to=Math.floor(l.axis.p2c(l.to)),d||c){var f=r.lineWidth||nt.grid.markingsLineWidth,p=f%2?.5:0;lt.beginPath(),lt.strokeStyle=r.color||nt.grid.markingsColor,lt.lineWidth=f,d?(lt.moveTo(s.to+p,l.from),lt.lineTo(s.to+p,l.to)):(lt.moveTo(s.from,l.to+p),lt.lineTo(s.to,l.to+p)),lt.stroke()}else lt.fillStyle=r.color||nt.grid.markingsColor,lt.fillRect(s.from,l.to,s.to-s.from,l.from-l.to)}}i=h(),o=nt.grid.borderWidth;for(var u=0;u<i.length;++u){var m,x,g,w,v=i[u],b=v.box,y=v.tickLength;if(v.show&&0!=v.ticks.length){for(lt.lineWidth=1,"x"==v.direction?(m=0,x="full"==y?"top"==v.position?0:ut:b.top-pt.top+("top"==v.position?b.height:0)):(x=0,m="full"==y?"left"==v.position?0:ht:b.left-pt.left+("left"==v.position?b.width:0)),v.innermost||(lt.strokeStyle=v.options.color,lt.beginPath(),g=w=0,"x"==v.direction?g=ht+1:w=ut+1,1==lt.lineWidth&&("x"==v.direction?x=Math.floor(x)+.5:m=Math.floor(m)+.5),lt.moveTo(m,x),lt.lineTo(m+g,x+w),lt.stroke()),lt.strokeStyle=v.options.tickColor,lt.beginPath(),e=0;e<v.ticks.length;++e){var D=v.ticks[e].v;g=w=0,isNaN(D)||D<v.min||D>v.max||"full"==y&&("object"==typeof o&&o[v.position]>0||o>0)&&(D==v.min||D==v.max)||("x"==v.direction?(m=v.p2c(D),w="full"==y?-ut:y,"top"==v.position&&(w=-w)):(x=v.p2c(D),g="full"==y?-ht:y,"left"==v.position&&(g=-g)),1==lt.lineWidth&&("x"==v.direction?m=Math.floor(m)+.5:x=Math.floor(x)+.5),lt.moveTo(m,x),lt.lineTo(m+g,x+w))}lt.stroke()}}o&&(n=nt.grid.borderColor,"object"==typeof o||"object"==typeof n?("object"!=typeof o&&(o={top:o,right:o,bottom:o,left:o}),"object"!=typeof n&&(n={top:n,right:n,bottom:n,left:n}),o.top>0&&(lt.strokeStyle=n.top,lt.lineWidth=o.top,lt.beginPath(),lt.moveTo(0-o.left,0-o.top/2),lt.lineTo(ht,0-o.top/2),lt.stroke()),o.right>0&&(lt.strokeStyle=n.right,lt.lineWidth=o.right,lt.beginPath(),lt.moveTo(ht+o.right/2,0-o.top),lt.lineTo(ht+o.right/2,ut),lt.stroke()),o.bottom>0&&(lt.strokeStyle=n.bottom,lt.lineWidth=o.bottom,lt.beginPath(),lt.moveTo(ht+o.right,ut+o.bottom/2),lt.lineTo(0,ut+o.bottom/2),lt.stroke()),o.left>0&&(lt.strokeStyle=n.left,lt.lineWidth=o.left,lt.beginPath(),lt.moveTo(0-o.left/2,ut+o.bottom),lt.lineTo(0-o.left/2,0),lt.stroke())):(lt.lineWidth=o,lt.strokeStyle=nt.grid.borderColor,lt.strokeRect(-o/2,-o/2,ht+o,ut+o))),lt.restore()}function W(){t.each(h(),function(t,e){var i,o,n,a,r,s=e.box,l=e.direction+"Axis "+e.direction+e.n+"Axis",d="flot-"+e.direction+"-axis flot-"+e.direction+e.n+"-axis "+l,c=e.options.font||"flot-tick-label tickLabel";if(at.removeText(d),e.show&&0!=e.ticks.length)for(var f=0;f<e.ticks.length;++f)i=e.ticks[f],!i.label||i.v<e.min||i.v>e.max||("x"==e.direction?(a="center",o=pt.left+e.p2c(i.v),"bottom"==e.position?n=s.top+s.padding:(n=s.top+s.height-s.padding,r="bottom")):(r="middle",n=pt.top+e.p2c(i.v),"left"==e.position?(o=s.left+s.width-s.padding,a="right"):o=s.left+s.padding),at.addText(d,o,n,i.label,c,null,null,a,r))})}function R(t){t.lines.show&&O(t),t.bars.show&&j(t),t.points.show&&N(t)}function O(t){function e(t,e,i,o,n){var a=t.points,r=t.pointsize,s=null,l=null;lt.beginPath();for(var d=r;d<a.length;d+=r){var c=a[d-r],f=a[d-r+1],p=a[d],h=a[d+1];if(null!=c&&null!=p){if(f<=h&&f<n.min){if(h<n.min)continue;c=(n.min-f)/(h-f)*(p-c)+c,f=n.min}else if(h<=f&&h<n.min){if(f<n.min)continue;p=(n.min-f)/(h-f)*(p-c)+c,h=n.min}if(f>=h&&f>n.max){if(h>n.max)continue;c=(n.max-f)/(h-f)*(p-c)+c,f=n.max}else if(h>=f&&h>n.max){if(f>n.max)continue;p=(n.max-f)/(h-f)*(p-c)+c,h=n.max}if(c<=p&&c<o.min){if(p<o.min)continue;f=(o.min-c)/(p-c)*(h-f)+f,c=o.min}else if(p<=c&&p<o.min){if(c<o.min)continue;h=(o.min-c)/(p-c)*(h-f)+f,p=o.min}if(c>=p&&c>o.max){if(p>o.max)continue;f=(o.max-c)/(p-c)*(h-f)+f,c=o.max}else if(p>=c&&p>o.max){if(c>o.max)continue;h=(o.max-c)/(p-c)*(h-f)+f,p=o.max}c==s&&f==l||lt.moveTo(o.p2c(c)+e,n.p2c(f)+i),s=p,l=h,lt.lineTo(o.p2c(p)+e,n.p2c(h)+i)}}lt.stroke()}function i(t,e,i){for(var o=t.points,n=t.pointsize,a=Math.min(Math.max(0,i.min),i.max),r=0,s=!1,l=1,d=0,c=0;;){if(n>0&&r>o.length+n)break;r+=n;var f=o[r-n],p=o[r-n+l],h=o[r],u=o[r+l];if(s){if(n>0&&null!=f&&null==h){c=r,n=-n,l=2;continue}if(n<0&&r==d+n){lt.fill(),s=!1,n=-n,l=1,r=d=c+n;continue}}if(null!=f&&null!=h){if(f<=h&&f<e.min){if(h<e.min)continue;p=(e.min-f)/(h-f)*(u-p)+p,f=e.min}else if(h<=f&&h<e.min){if(f<e.min)continue;u=(e.min-f)/(h-f)*(u-p)+p,h=e.min}if(f>=h&&f>e.max){if(h>e.max)continue;p=(e.max-f)/(h-f)*(u-p)+p,f=e.max}else if(h>=f&&h>e.max){if(f>e.max)continue;u=(e.max-f)/(h-f)*(u-p)+p,h=e.max}if(s||(lt.beginPath(),lt.moveTo(e.p2c(f),i.p2c(a)),s=!0),p>=i.max&&u>=i.max)lt.lineTo(e.p2c(f),i.p2c(i.max)),lt.lineTo(e.p2c(h),i.p2c(i.max));else if(p<=i.min&&u<=i.min)lt.lineTo(e.p2c(f),i.p2c(i.min)),lt.lineTo(e.p2c(h),i.p2c(i.min));else{var m=f,x=h;p<=u&&p<i.min&&u>=i.min?(f=(i.min-p)/(u-p)*(h-f)+f,p=i.min):u<=p&&u<i.min&&p>=i.min&&(h=(i.min-p)/(u-p)*(h-f)+f,u=i.min),p>=u&&p>i.max&&u<=i.max?(f=(i.max-p)/(u-p)*(h-f)+f,p=i.max):u>=p&&u>i.max&&p<=i.max&&(h=(i.max-p)/(u-p)*(h-f)+f,u=i.max),f!=m&&lt.lineTo(e.p2c(m),i.p2c(p)),lt.lineTo(e.p2c(f),i.p2c(p)),lt.lineTo(e.p2c(h),i.p2c(u)),h!=x&&(lt.lineTo(e.p2c(h),i.p2c(u)),lt.lineTo(e.p2c(x),i.p2c(u)))}}}}lt.save(),lt.translate(pt.left,pt.top),lt.lineJoin="round";var o=t.lines.lineWidth,n=t.shadowSize;if(o>0&&n>0){lt.lineWidth=n,lt.strokeStyle="rgba(0,0,0,0.1)";var a=Math.PI/18;e(t.datapoints,Math.sin(a)*(o/2+n/2),Math.cos(a)*(o/2+n/2),t.xaxis,t.yaxis),lt.lineWidth=n/2,e(t.datapoints,Math.sin(a)*(o/2+n/4),Math.cos(a)*(o/2+n/4),t.xaxis,t.yaxis)}lt.lineWidth=o,lt.strokeStyle=t.color;var r=H(t.lines,t.color,0,ut);r&&(lt.fillStyle=r,i(t.datapoints,t.xaxis,t.yaxis)),o>0&&e(t.datapoints,0,0,t.xaxis,t.yaxis),lt.restore()}function N(t){function e(t,e,i,o,n,a,r,s){for(var l=t.points,d=t.pointsize,c=0;c<l.length;c+=d){var f=l[c],p=l[c+1];null==f||f<a.min||f>a.max||p<r.min||p>r.max||(lt.beginPath(),f=a.p2c(f),p=r.p2c(p)+o,"circle"==s?lt.arc(f,p,e,0,n?Math.PI:2*Math.PI,!1):s(lt,f,p,e,n),lt.closePath(),i&&(lt.fillStyle=i,lt.fill()),lt.stroke())}}lt.save(),lt.translate(pt.left,pt.top);var i=t.points.lineWidth,o=t.shadowSize,n=t.points.radius,a=t.points.symbol;if(0==i&&(i=1e-4),i>0&&o>0){var r=o/2;lt.lineWidth=r,lt.strokeStyle="rgba(0,0,0,0.1)",e(t.datapoints,n,null,r+r/2,!0,t.xaxis,t.yaxis,a),lt.strokeStyle="rgba(0,0,0,0.2)",e(t.datapoints,n,null,r/2,!0,t.xaxis,t.yaxis,a)}lt.lineWidth=i,lt.strokeStyle=t.color,e(t.datapoints,n,H(t.points,t.color),0,!1,t.xaxis,t.yaxis,a),lt.restore()}function A(t,e,i,o,n,a,r,s,l,d,c){var f,p,h,u,m,x,g,w,v;d?(w=x=g=!0,m=!1,f=i,p=t,u=e+o,h=e+n,p<f&&(v=p,p=f,f=v,m=!0,x=!1)):(m=x=g=!0,w=!1,f=t+o,p=t+n,h=i,u=e,u<h&&(v=u,u=h,h=v,w=!0,g=!1)),p<r.min||f>r.max||u<s.min||h>s.max||(f<r.min&&(f=r.min,m=!1),p>r.max&&(p=r.max,x=!1),h<s.min&&(h=s.min,w=!1),u>s.max&&(u=s.max,g=!1),f=r.p2c(f),h=s.p2c(h),p=r.p2c(p),u=s.p2c(u),a&&(l.fillStyle=a(h,u),l.fillRect(f,u,p-f,h-u)),c>0&&(m||x||g||w)&&(l.beginPath(),l.moveTo(f,h),m?l.lineTo(f,u):l.moveTo(f,u),g?l.lineTo(p,u):l.moveTo(p,u),x?l.lineTo(p,h):l.moveTo(p,h),w?l.lineTo(f,h):l.moveTo(f,h),l.stroke()))}function j(t){function e(e,i,o,n,a,r){for(var s=e.points,l=e.pointsize,d=0;d<s.length;d+=l)null!=s[d]&&A(s[d],s[d+1],s[d+2],i,o,n,a,r,lt,t.bars.horizontal,t.bars.lineWidth);
}lt.save(),lt.translate(pt.left,pt.top),lt.lineWidth=t.bars.lineWidth,lt.strokeStyle=t.color;var i;switch(t.bars.align){case"left":i=0;break;case"right":i=-t.bars.barWidth;break;default:i=-t.bars.barWidth/2}var o=t.bars.fill?function(e,i){return H(t.bars,t.color,e,i)}:null;e(t.datapoints,i,i+t.bars.barWidth,o,t.xaxis,t.yaxis),lt.restore()}function H(e,i,o,n){var a=e.fill;if(!a)return null;if(e.fillColor)return it(e.fillColor,o,n,i);var r=t.color.parse(i);return r.a="number"==typeof a?a:.4,r.normalize(),r.toString()}function B(){if(null!=nt.legend.container?t(nt.legend.container).html(""):i.find(".legend").remove(),nt.legend.show){for(var e,o,n=[],a=[],r=!1,s=nt.legend.labelFormatter,l=0;l<ot.length;++l)e=ot[l],e.label&&(o=s?s(e.label,e):e.label,o&&a.push({label:o,color:e.color}));if(nt.legend.sorted)if(t.isFunction(nt.legend.sorted))a.sort(nt.legend.sorted);else if("reverse"==nt.legend.sorted)a.reverse();else{var d="descending"!=nt.legend.sorted;a.sort(function(t,e){return t.label==e.label?0:t.label<e.label!=d?1:-1})}for(var l=0;l<a.length;++l){var c=a[l];l%nt.legend.noColumns==0&&(r&&n.push("</tr>"),n.push("<tr>"),r=!0),n.push('<td class="legendColorBox"><div style="border:1px solid '+nt.legend.labelBoxBorderColor+';padding:1px"><div style="width:4px;height:0;border:5px solid '+c.color+';overflow:hidden"></div></div></td><td class="legendLabel">'+c.label+"</td>")}if(r&&n.push("</tr>"),0!=n.length){var f='<table style="font-size:smaller;color:'+nt.grid.color+'">'+n.join("")+"</table>";if(null!=nt.legend.container)t(nt.legend.container).html(f);else{var p="",h=nt.legend.position,u=nt.legend.margin;null==u[0]&&(u=[u,u]),"n"==h.charAt(0)?p+="top:"+(u[1]+pt.top)+"px;":"s"==h.charAt(0)&&(p+="bottom:"+(u[1]+pt.bottom)+"px;"),"e"==h.charAt(1)?p+="right:"+(u[0]+pt.right)+"px;":"w"==h.charAt(1)&&(p+="left:"+(u[0]+pt.left)+"px;");var m=t('<div class="legend">'+f.replace('style="','style="position:absolute;'+p+";")+"</div>").appendTo(i);if(0!=nt.legend.backgroundOpacity){var x=nt.legend.backgroundColor;null==x&&(x=nt.grid.backgroundColor,x=x&&"string"==typeof x?t.color.parse(x):t.color.extract(m,"background-color"),x.a=1,x=x.toString());var g=m.children();t('<div style="position:absolute;width:'+g.width()+"px;height:"+g.height()+"px;"+p+"background-color:"+x+';"> </div>').prependTo(m).css("opacity",nt.legend.backgroundOpacity)}}}}}function q(t,e,i){var o,n,a,r=nt.grid.mouseActiveRadius,s=r*r+1,l=null;for(o=ot.length-1;o>=0;--o)if(i(ot[o])){var d=ot[o],c=d.xaxis,f=d.yaxis,p=d.datapoints.points,h=c.c2p(t),u=f.c2p(e),m=r/c.scale,x=r/f.scale;if(a=d.datapoints.pointsize,c.options.inverseTransform&&(m=Number.MAX_VALUE),f.options.inverseTransform&&(x=Number.MAX_VALUE),d.lines.show||d.points.show)for(n=0;n<p.length;n+=a){var g=p[n],w=p[n+1];if(null!=g&&!(g-h>m||g-h<-m||w-u>x||w-u<-x)){var v=Math.abs(c.p2c(g)-t),b=Math.abs(f.p2c(w)-e),y=v*v+b*b;y<s&&(s=y,l=[o,n/a])}}if(d.bars.show&&!l){var D,_;switch(d.bars.align){case"left":D=0;break;case"right":D=-d.bars.barWidth;break;default:D=-d.bars.barWidth/2}for(_=D+d.bars.barWidth,n=0;n<p.length;n+=a){var g=p[n],w=p[n+1],k=p[n+2];null!=g&&(ot[o].bars.horizontal?h<=Math.max(k,g)&&h>=Math.min(k,g)&&u>=w+D&&u<=w+_:h>=g+D&&h<=g+_&&u>=Math.min(k,w)&&u<=Math.max(k,w))&&(l=[o,n/a])}}}return l?(o=l[0],n=l[1],a=ot[o].datapoints.pointsize,{datapoint:ot[o].datapoints.points.slice(n*a,(n+1)*a),dataIndex:n,series:ot[o],seriesIndex:o}):null}function X(t){nt.grid.hoverable&&G("plothover",t,function(t){return 0!=t.hoverable})}function V(t){nt.grid.hoverable&&G("plothover",t,function(t){return!1})}function U(t){G("plotclick",t,function(t){return 0!=t.clickable})}function G(t,e,o){var n=st.offset(),a=e.pageX-n.left-pt.left,r=e.pageY-n.top-pt.top,s=u({left:a,top:r});s.pageX=e.pageX,s.pageY=e.pageY;var l=q(a,r,o);if(l&&(l.pageX=parseInt(l.series.xaxis.p2c(l.datapoint[0])+n.left+pt.left,10),l.pageY=parseInt(l.series.yaxis.p2c(l.datapoint[1])+n.top+pt.top,10)),nt.grid.autoHighlight){for(var d=0;d<gt.length;++d){var c=gt[d];c.auto!=t||l&&c.series==l.series&&c.point[0]==l.datapoint[0]&&c.point[1]==l.datapoint[1]||K(c.series,c.point)}l&&J(l.series,l.datapoint,t)}i.trigger(t,[s,l])}function Q(){var t=nt.interaction.redrawOverlayInterval;return t==-1?void Y():void(wt||(wt=setTimeout(Y,t)))}function Y(){wt=null,dt.save(),rt.clear(),dt.translate(pt.left,pt.top);var t,e;for(t=0;t<gt.length;++t)e=gt[t],e.series.bars.show?et(e.series,e.point):tt(e.series,e.point);dt.restore(),s(mt.drawOverlay,[dt])}function J(t,e,i){if("number"==typeof t&&(t=ot[t]),"number"==typeof e){var o=t.datapoints.pointsize;e=t.datapoints.points.slice(o*e,o*(e+1))}var n=Z(t,e);n==-1?(gt.push({series:t,point:e,auto:i}),Q()):i||(gt[n].auto=!1)}function K(t,e){if(null==t&&null==e)return gt=[],void Q();if("number"==typeof t&&(t=ot[t]),"number"==typeof e){var i=t.datapoints.pointsize;e=t.datapoints.points.slice(i*e,i*(e+1))}var o=Z(t,e);o!=-1&&(gt.splice(o,1),Q())}function Z(t,e){for(var i=0;i<gt.length;++i){var o=gt[i];if(o.series==t&&o.point[0]==e[0]&&o.point[1]==e[1])return i}return-1}function tt(e,i){var o=i[0],n=i[1],a=e.xaxis,r=e.yaxis,s="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString();if(!(o<a.min||o>a.max||n<r.min||n>r.max)){var l=e.points.radius+e.points.lineWidth/2;dt.lineWidth=l,dt.strokeStyle=s;var d=1.5*l;o=a.p2c(o),n=r.p2c(n),dt.beginPath(),"circle"==e.points.symbol?dt.arc(o,n,d,0,2*Math.PI,!1):e.points.symbol(dt,o,n,d,!1),dt.closePath(),dt.stroke()}}function et(e,i){var o,n="string"==typeof e.highlightColor?e.highlightColor:t.color.parse(e.color).scale("a",.5).toString(),a=n;switch(e.bars.align){case"left":o=0;break;case"right":o=-e.bars.barWidth;break;default:o=-e.bars.barWidth/2}dt.lineWidth=e.bars.lineWidth,dt.strokeStyle=n,A(i[0],i[1],i[2]||0,o,o+e.bars.barWidth,function(){return a},e.xaxis,e.yaxis,dt,e.bars.horizontal,e.bars.lineWidth)}function it(e,i,o,n){if("string"==typeof e)return e;for(var a=lt.createLinearGradient(0,o,0,i),r=0,s=e.colors.length;r<s;++r){var l=e.colors[r];if("string"!=typeof l){var d=t.color.parse(n);null!=l.brightness&&(d=d.scale("rgb",l.brightness)),null!=l.opacity&&(d.a*=l.opacity),l=d.toString()}a.addColorStop(r/(s-1),l)}return a}var ot=[],nt={colors:["#edc240","#afd8f8","#cb4b4b","#4da74d","#9440ed"],legend:{show:!0,noColumns:1,labelFormatter:null,labelBoxBorderColor:"#ccc",container:null,position:"ne",margin:5,backgroundColor:null,backgroundOpacity:.85,sorted:null},xaxis:{show:null,position:"bottom",mode:null,font:null,color:null,tickColor:null,transform:null,inverseTransform:null,min:null,max:null,autoscaleMargin:null,ticks:null,tickFormatter:null,labelWidth:null,labelHeight:null,reserveSpace:null,tickLength:null,alignTicksWithAxis:null,tickDecimals:null,tickSize:null,minTickSize:null},yaxis:{autoscaleMargin:.02,position:"left"},xaxes:[],yaxes:[],series:{points:{show:!1,radius:3,lineWidth:2,fill:!0,fillColor:"#ffffff",symbol:"circle"},lines:{lineWidth:2,fill:!1,fillColor:null,steps:!1},bars:{show:!1,lineWidth:2,barWidth:1,fill:!0,fillColor:null,align:"left",horizontal:!1,zero:!0},shadowSize:3,highlightColor:null},grid:{show:!0,aboveData:!1,color:"#545454",backgroundColor:null,borderColor:null,tickColor:null,margin:0,labelMargin:5,axisMargin:8,borderWidth:2,minBorderMargin:null,markings:null,markingsColor:"#f4f4f4",markingsLineWidth:2,clickable:!1,hoverable:!1,autoHighlight:!0,mouseActiveRadius:10},interaction:{redrawOverlayInterval:1e3/60},hooks:{}},at=null,rt=null,st=null,lt=null,dt=null,ct=[],ft=[],pt={left:0,right:0,top:0,bottom:0},ht=0,ut=0,mt={processOptions:[],processRawData:[],processDatapoints:[],processOffset:[],drawBackground:[],drawSeries:[],draw:[],bindEvents:[],drawOverlay:[],shutdown:[]},xt=this;xt.setData=c,xt.setupGrid=S,xt.draw=$,xt.getPlaceholder=function(){return i},xt.getCanvas=function(){return at.element},xt.getPlotOffset=function(){return pt},xt.width=function(){return ht},xt.height=function(){return ut},xt.offset=function(){var t=st.offset();return t.left+=pt.left,t.top+=pt.top,t},xt.getData=function(){return ot},xt.getAxes=function(){var e={};return t.each(ct.concat(ft),function(t,i){i&&(e[i.direction+(1!=i.n?i.n:"")+"axis"]=i)}),e},xt.getXAxes=function(){return ct},xt.getYAxes=function(){return ft},xt.c2p=u,xt.p2c=m,xt.getOptions=function(){return nt},xt.highlight=J,xt.unhighlight=K,xt.triggerRedrawOverlay=Q,xt.pointOffset=function(t){return{left:parseInt(ct[p(t,"x")-1].p2c(+t.x)+pt.left,10),top:parseInt(ft[p(t,"y")-1].p2c(+t.y)+pt.top,10)}},xt.shutdown=y,xt.destroy=function(){y(),i.removeData("plot").empty(),ot=[],nt=null,at=null,rt=null,st=null,lt=null,dt=null,ct=[],ft=[],mt=null,gt=[],xt=null},xt.resize=function(){var t=i.width(),e=i.height();at.resize(t,e),rt.resize(t,e)},xt.hooks=mt,l(xt),d(a),v(),c(n),S(),$(),b();var gt=[],wt=null}function o(t,e){return e*Math.floor(t/e)}var n=Object.prototype.hasOwnProperty;t.fn.detach||(t.fn.detach=function(){return this.each(function(){this.parentNode&&this.parentNode.removeChild(this)})}),e.prototype.resize=function(t,e){if(t<=0||e<=0)throw new Error("Invalid dimensions for plot, width = "+t+", height = "+e);var i=this.element,o=this.context,n=this.pixelRatio;this.width!=t&&(i.width=t*n,i.style.width=t+"px",this.width=t),this.height!=e&&(i.height=e*n,i.style.height=e+"px",this.height=e),o.restore(),o.save(),o.scale(n,n)},e.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},e.prototype.render=function(){var t=this._textCache;for(var e in t)if(n.call(t,e)){var i=this.getTextLayer(e),o=t[e];i.hide();for(var a in o)if(n.call(o,a)){var r=o[a];for(var s in r)if(n.call(r,s)){for(var l,d=r[s].positions,c=0;l=d[c];c++)l.active?l.rendered||(i.append(l.element),l.rendered=!0):(d.splice(c--,1),l.rendered&&l.element.detach());0==d.length&&delete r[s]}}i.show()}},e.prototype.getTextLayer=function(e){var i=this.text[e];return null==i&&(null==this.textContainer&&(this.textContainer=t("<div class='flot-text'></div>").css({position:"absolute",top:0,left:0,bottom:0,right:0,"font-size":"smaller",color:"#545454"}).insertAfter(this.element)),i=this.text[e]=t("<div></div>").addClass(e).css({position:"absolute",top:0,left:0,bottom:0,right:0}).appendTo(this.textContainer)),i},e.prototype.getTextInfo=function(e,i,o,n,a){var r,s,l,d;if(i=""+i,r="object"==typeof o?o.style+" "+o.variant+" "+o.weight+" "+o.size+"px/"+o.lineHeight+"px "+o.family:o,s=this._textCache[e],null==s&&(s=this._textCache[e]={}),l=s[r],null==l&&(l=s[r]={}),d=l[i],null==d){var c=t("<div></div>").html(i).css({position:"absolute","max-width":a,top:-9999}).appendTo(this.getTextLayer(e));"object"==typeof o?c.css({font:r,color:o.color}):"string"==typeof o&&c.addClass(o),d=l[i]={width:c.outerWidth(!0),height:c.outerHeight(!0),element:c,positions:[]},c.detach()}return d},e.prototype.addText=function(t,e,i,o,n,a,r,s,l){var d=this.getTextInfo(t,o,n,a,r),c=d.positions;"center"==s?e-=d.width/2:"right"==s&&(e-=d.width),"middle"==l?i-=d.height/2:"bottom"==l&&(i-=d.height);for(var f,p=0;f=c[p];p++)if(f.x==e&&f.y==i)return void(f.active=!0);f={active:!0,rendered:!1,element:c.length?d.element.clone():d.element,x:e,y:i},c.push(f),f.element.css({top:Math.round(i),left:Math.round(e),"text-align":s})},e.prototype.removeText=function(t,e,i,o,a,r){if(null==o){var s=this._textCache[t];if(null!=s)for(var l in s)if(n.call(s,l)){var d=s[l];for(var c in d)if(n.call(d,c))for(var f,p=d[c].positions,h=0;f=p[h];h++)f.active=!1}}else for(var f,p=this.getTextInfo(t,o,a,r).positions,h=0;f=p[h];h++)f.x==e&&f.y==i&&(f.active=!1)},t.plot=function(e,o,n){var a=new i(t(e),o,n,t.plot.plugins);return a},t.plot.version="0.8.3",t.plot.plugins=[],t.fn.plot=function(e,i){return this.each(function(){t.plot(this,e,i)})}}(jQuery),function(t,e,i){"$:nomunge";function o(i){s===!0&&(s=i||1);for(var l=a.length-1;l>=0;l--){var p=t(a[l]);if(p[0]==e||p.is(":visible")){var h=p.width(),u=p.height(),m=p.data(c);!m||h===m.w&&u===m.h||(p.trigger(d,[m.w=h,m.h=u]),s=i||!0)}else m=p.data(c),m.w=0,m.h=0}null!==n&&(s&&(null==i||i-s<1e3)?n=e.requestAnimationFrame(o):(n=setTimeout(o,r[f]),s=!1))}var n,a=[],r=t.resize=t.extend(t.resize,{}),s=!1,l="setTimeout",d="resize",c=d+"-special-event",f="pendingDelay",p="activeDelay",h="throttleWindow";r[f]=200,r[p]=20,r[h]=!0,t.event.special[d]={setup:function(){if(!r[h]&&this[l])return!1;var e=t(this);a.push(this),e.data(c,{w:e.width(),h:e.height()}),1===a.length&&(n=i,o())},teardown:function(){if(!r[h]&&this[l])return!1;for(var e=t(this),i=a.length-1;i>=0;i--)if(a[i]==this){a.splice(i,1);break}e.removeData(c),a.length||(s?cancelAnimationFrame(n):clearTimeout(n),n=null)},add:function(e){function o(e,o,a){var r=t(this),s=r.data(c)||{};s.w=o!==i?o:r.width(),s.h=a!==i?a:r.height(),n.apply(this,arguments)}if(!r[h]&&this[l])return!1;var n;return t.isFunction(e)?(n=e,o):(n=e.handler,void(e.handler=o))}},e.requestAnimationFrame||(e.requestAnimationFrame=function(){return e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.oRequestAnimationFrame||e.msRequestAnimationFrame||function(t,i){return e.setTimeout(function(){t((new Date).getTime())},r[p])}}()),e.cancelAnimationFrame||(e.cancelAnimationFrame=function(){return e.webkitCancelRequestAnimationFrame||e.mozCancelRequestAnimationFrame||e.oCancelRequestAnimationFrame||e.msCancelRequestAnimationFrame||clearTimeout}())}(jQuery,this),function(t){function e(t){function e(){var e=t.getPlaceholder();0!=e.width()&&0!=e.height()&&(t.resize(),t.setupGrid(),t.draw())}function i(t,i){t.getPlaceholder().resize(e)}function o(t,i){t.getPlaceholder().unbind("resize",e)}t.hooks.bindEvents.push(i),t.hooks.shutdown.push(o)}var i={};t.plot.plugins.push({init:e,options:i,name:"resize",version:"1.0"})}(jQuery),function(t){function e(){return!!document.createElement("canvas").getContext}function i(){if(!e())return!1;var t=document.createElement("canvas"),i=t.getContext("2d");return"function"==typeof i.fillText}function o(){var t=document.createElement("div");return"undefined"!=typeof t.style.MozTransition||"undefined"!=typeof t.style.OTransition||"undefined"!=typeof t.style.webkitTransition||"undefined"!=typeof t.style.transition}function n(t,e,i,o,n){this.axisName=t,this.position=e,this.padding=i,this.plot=o,this.opts=n,this.width=0,this.height=0}function a(t,e,i,o,a){n.prototype.constructor.call(this,t,e,i,o,a)}function r(t,e,i,o,a){n.prototype.constructor.call(this,t,e,i,o,a),this.elem=null}function s(t,e,i,o,n){r.prototype.constructor.call(this,t,e,i,o,n)}function l(t,e,i,o,n){s.prototype.constructor.call(this,t,e,i,o,n),this.requiresResize=!1}function d(e){e.hooks.processOptions.push(function(e,n){if(n.axisLabels.show){var d=!1,c={},f=2;e.hooks.draw.push(function(e,n){var p=!1;d?(d=!1,t.each(e.getAxes(),function(t,i){var o=i.options||e.getOptions()[t];o&&o.axisLabel&&i.show&&c[t].draw(i.box)})):(t.each(e.getAxes(),function(t,n){var d=n.options||e.getOptions()[t];if(t in c&&(n.labelHeight=n.labelHeight-c[t].height,n.labelWidth=n.labelWidth-c[t].width,d.labelHeight=n.labelHeight,d.labelWidth=n.labelWidth,c[t].cleanup(),delete c[t]),d&&d.axisLabel&&n.show){p=!0;var h=null;if(d.axisLabelUseHtml||"Microsoft Internet Explorer"!=navigator.appName)h=d.axisLabelUseHtml||!o()&&!i()&&!d.axisLabelUseCanvas?r:d.axisLabelUseCanvas||!o()?a:s;else{var u=navigator.userAgent,m=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");null!=m.exec(u)&&(rv=parseFloat(RegExp.$1)),h=rv>=9&&!d.axisLabelUseCanvas&&!d.axisLabelUseHtml?s:d.axisLabelUseCanvas||d.axisLabelUseHtml?d.axisLabelUseCanvas?a:r:l}var x=void 0===d.axisLabelPadding?f:d.axisLabelPadding;c[t]=new h(t,n.position,x,e,d),c[t].calculateSize(),d.labelHeight=n.labelHeight+c[t].height,d.labelWidth=n.labelWidth+c[t].width}}),p&&(d=!0,e.setupGrid(),e.draw()))})}})}var c={axisLabels:{show:!0}};n.prototype.cleanup=function(){},a.prototype=new n,a.prototype.constructor=a,a.prototype.calculateSize=function(){this.opts.axisLabelFontSizePixels||(this.opts.axisLabelFontSizePixels=14),this.opts.axisLabelFontFamily||(this.opts.axisLabelFontFamily="sans-serif");this.opts.axisLabelFontSizePixels+this.padding,this.opts.axisLabelFontSizePixels+this.padding;"left"==this.position||"right"==this.position?(this.width=this.opts.axisLabelFontSizePixels+this.padding,this.height=0):(this.width=0,this.height=this.opts.axisLabelFontSizePixels+this.padding)},a.prototype.draw=function(t){this.opts.axisLabelColour||(this.opts.axisLabelColour="black");var e=this.plot.getCanvas().getContext("2d");e.save(),e.font=this.opts.axisLabelFontSizePixels+"px "+this.opts.axisLabelFontFamily,e.fillStyle=this.opts.axisLabelColour;var i,o,n=e.measureText(this.opts.axisLabel).width,a=this.opts.axisLabelFontSizePixels,r=0;"top"==this.position?(i=t.left+t.width/2-n/2,o=t.top+.72*a):"bottom"==this.position?(i=t.left+t.width/2-n/2,o=t.top+t.height-.72*a):"left"==this.position?(i=t.left+.72*a,o=t.height/2+t.top+n/2,r=-Math.PI/2):"right"==this.position&&(i=t.left+t.width-.72*a,o=t.height/2+t.top-n/2,r=Math.PI/2),e.translate(i,o),e.rotate(r),e.fillText(this.opts.axisLabel,0,0),e.restore()},r.prototype=new n,r.prototype.constructor=r,r.prototype.calculateSize=function(){var e=t('<div class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>");this.plot.getPlaceholder().append(e),this.labelWidth=e.outerWidth(!0),this.labelHeight=e.outerHeight(!0),e.remove(),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelWidth+this.padding:this.height=this.labelHeight+this.padding},r.prototype.cleanup=function(){this.elem&&this.elem.remove()},r.prototype.draw=function(e){this.plot.getPlaceholder().find("#"+this.axisName+"Label").remove(),this.elem=t('<div id="'+this.axisName+'Label" " class="axisLabels" style="position:absolute;">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem),"top"==this.position?(this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px"),this.elem.css("top",e.top+"px")):"bottom"==this.position?(this.elem.css("left",e.left+e.width/2-this.labelWidth/2+"px"),this.elem.css("top",e.top+e.height-this.labelHeight+"px")):"left"==this.position?(this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px"),this.elem.css("left",e.left+"px")):"right"==this.position&&(this.elem.css("top",e.top+e.height/2-this.labelHeight/2+"px"),this.elem.css("left",e.left+e.width-this.labelWidth+"px"))},s.prototype=new r,s.prototype.constructor=s,s.prototype.calculateSize=function(){r.prototype.calculateSize.call(this),this.width=this.height=0,"left"==this.position||"right"==this.position?this.width=this.labelHeight+this.padding:this.height=this.labelHeight+this.padding},s.prototype.transforms=function(t,e,i){var o={"-moz-transform":"","-webkit-transform":"","-o-transform":"","-ms-transform":""};if(0!=e||0!=i){var n=" translate("+e+"px, "+i+"px)";o["-moz-transform"]+=n,o["-webkit-transform"]+=n,o["-o-transform"]+=n,o["-ms-transform"]+=n}if(0!=t){var a=" rotate("+t+"deg)";o["-moz-transform"]+=a,o["-webkit-transform"]+=a,o["-o-transform"]+=a,o["-ms-transform"]+=a}var r="top: 0; left: 0; ";for(var s in o)o[s]&&(r+=s+":"+o[s]+";");return r+=";"},s.prototype.calculateOffsets=function(t){var e={x:0,y:0,degrees:0};return"bottom"==this.position?(e.x=t.left+t.width/2-this.labelWidth/2,e.y=t.top+t.height-this.labelHeight):"top"==this.position?(e.x=t.left+t.width/2-this.labelWidth/2,e.y=t.top):"left"==this.position?(e.degrees=-90,e.x=t.left-this.labelWidth/2+this.labelHeight/2,e.y=t.height/2+t.top):"right"==this.position&&(e.degrees=90,e.x=t.left+t.width-this.labelWidth/2-this.labelHeight/2,e.y=t.height/2+t.top),e.x=Math.round(e.x),e.y=Math.round(e.y),e},s.prototype.draw=function(e){this.plot.getPlaceholder().find("."+this.axisName+"Label").remove();var i=this.calculateOffsets(e);this.elem=t('<div class="axisLabels '+this.axisName+'Label" style="position:absolute; '+this.transforms(i.degrees,i.x,i.y)+'">'+this.opts.axisLabel+"</div>"),this.plot.getPlaceholder().append(this.elem)},l.prototype=new s,l.prototype.constructor=l,l.prototype.transforms=function(t,e,i){var o="";if(0!=t){for(var n=t/90;n<0;)n+=4;o+=" filter: progid:DXImageTransform.Microsoft.BasicImage(rotation="+n+"); ",this.requiresResize="right"==this.position}return 0!=e&&(o+="left: "+e+"px; "),0!=i&&(o+="top: "+i+"px; "),o},l.prototype.calculateOffsets=function(t){var e=s.prototype.calculateOffsets.call(this,t);return"top"==this.position?e.y=t.top+1:"left"==this.position?(e.x=t.left,e.y=t.height/2+t.top-this.labelWidth/2):"right"==this.position&&(e.x=t.left+t.width-this.labelHeight,e.y=t.height/2+t.top-this.labelWidth/2),e},l.prototype.draw=function(t){s.prototype.draw.call(this,t),this.requiresResize&&(this.elem=this.plot.getPlaceholder().find("."+this.axisName+"Label"),this.elem.css("width",this.labelWidth),this.elem.css("height",this.labelHeight))},t.plot.plugins.push({init:d,options:c,name:"axisLabels",version:"2.0"})}(jQuery);