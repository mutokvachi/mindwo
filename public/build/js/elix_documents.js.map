{"version":3,"sources":["documents.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elix_documents.js","sourcesContent":["/**\r\n * Lotus Notes dokumentu meklēšanas lapas JavaScript funkcionalitāte\r\n * \r\n * @type _L4.Anonym$0|Function\r\n */\r\nvar PageDocuments = function()\r\n{\r\n    /**\r\n     * Meklēšanas rīku HTML formas elements\r\n     * \r\n     * @type Object\r\n     */\r\n    var form_elem = null;\r\n\r\n    /**\r\n     * Lotus Notes dokumentu meklēšanas bloka HTML elements\r\n     * \r\n     * @type type\r\n     */\r\n    var page_elem = null;\r\n\r\n    /**\r\n     * Parāda vai paslēpj saiti \"Notīrīt kritērijus\" atkarībā ir vai nav norādīts vismaz viens kritērijs\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var clearLinkShowHide = function() {\r\n        if (\r\n                getElementVal(page_elem, 'select[name=source_id]', 0) > 0 ||\r\n                getElementVal(page_elem, 'select[name=kind_id]', 0) > 0 ||\r\n                getElementVal(page_elem, 'input[name=criteria]', \"\") ||\r\n                getElementVal(page_elem, 'input[name=pick_date_from]', \"\") ||\r\n                getElementVal(page_elem, 'input[name=pick_date_to]', \"\")\r\n                )\r\n        {\r\n            page_elem.find(\".dx-clear-link\").show();\r\n        }\r\n        else\r\n        {\r\n            page_elem.find(\".dx-clear-link\").hide();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Notīra meklēšanas kritēriju lauku vērtības\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var clearFields = function() {\r\n\r\n        form_elem.find('input[name=pick_date_from]').val('');\r\n        form_elem.find('input[name=pick_date_to]').val('');\r\n        form_elem.find('input[name=criteria]').val('');\r\n\r\n        form_elem.find('select[name=source_id]').val(0);\r\n        form_elem.find('select[name=kind_id]').val(0);\r\n        \r\n        form_elem.find('#defaultrange input').val('');\r\n    };\r\n\r\n    /**\r\n     * Nodrošina saites \"Notīrīt\" funkcionalitāti - dzēš formas lauku vērtības\r\n     *\r\n     * @returns {undefined}\r\n     */\r\n    var handleLinkClear = function() {\r\n        page_elem.find(\".dx-clear-link\").click(function() {\r\n            clearFields();\r\n            clearLinkShowHide();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Inicializē vērtību notīrīšanas saites parādīšanu/paslēpšanu, mainoties formas lauku vērtībām\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var handleValueChange = function() {\r\n        form_elem.find(\"input\").keyup(function() {\r\n            clearLinkShowHide();\r\n        });\r\n\r\n        form_elem.find(\"select\").change(function() {\r\n            clearLinkShowHide();\r\n        });\r\n    };\r\n\r\n    /**\r\n     * Nodrošina dokumentu formas atvēršanu\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var handleDocLinks = function() {\r\n        $(\"a.dx-lotus-btn\").click(function() {\r\n            view_list_item(\"form\", $(this).attr('item_id'), $(this).attr('list_id'), 0, 0, \"\", \"\");            \r\n        });\r\n    };\r\n    \r\n    /**\r\n     * Inicializē meklēšnas rīku parādīšanu pie lapas ielādes - parāda, ja bija meklēšanas pēc kāda no redzamajiem formas laukiem\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var initSearchTools = function()\r\n    {\r\n        if (\r\n                getElementVal(page_elem, 'select[name=source_id]', 0) > 0 ||\r\n                getElementVal(page_elem, 'select[name=kind_id]', 0) > 0 ||\r\n                getElementVal(page_elem, 'input[name=pick_date_from]', \"\") ||\r\n                getElementVal(page_elem, 'input[name=pick_date_to]', \"\")\r\n                )\r\n        {\r\n            SearchTools.showHideTools();\r\n        }\r\n    };\r\n\r\n    /**\r\n     * Inicializē datuma intervāla uzstādīšanas komponenti\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var initDateRange = function() {\r\n        var arr_date_param = {\r\n            range_id: \"defaultrange\",\r\n            el_date_from: \"pick_date_from\",\r\n            el_date_to: \"pick_date_to\",\r\n            page_selector: \".dx-documents-page\",\r\n            form_selector: \".search-tools-form\",\r\n            arr_ranges: {}\r\n        };\r\n        \r\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_today')] = [moment(), moment()];\r\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_yesterday')] = [moment().subtract('days', 1), moment().subtract('days', 1)];\r\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_7')] = [moment().subtract('days', 6), moment()];\r\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_thism')] = [moment().startOf('month'), moment().endOf('month')];\r\n        arr_date_param[\"arr_ranges\"][Lang.get('date_range.flt_prevm')] = [moment().subtract('month', 1).startOf('month'), moment().subtract('month', 1).endOf('month')];\r\n        \r\n        DateRange.init(arr_date_param, clearLinkShowHide);\r\n    }\r\n\r\n    /**\r\n     * Inicializē dokumentu JavaScript funkcionalitāti\r\n     * \r\n     * @returns {undefined}\r\n     */\r\n    var initPage = function() {\r\n\r\n        page_elem = $(\".dx-documents-page\");\r\n\r\n        form_elem = page_elem.find('.search-tools-form');\r\n\r\n        SearchTools.init(clearLinkShowHide, clearFields);\r\n\r\n        handleValueChange();\r\n        handleLinkClear();\r\n\r\n        clearLinkShowHide();\r\n        initSearchTools();\r\n\r\n        initDateRange();\r\n        \r\n        handleDocLinks();\r\n    };\r\n\r\n    return {\r\n        init: function() {\r\n            initPage();\r\n        }\r\n    };\r\n}();\r\n\r\n$(document).ready(function() {\r\n    PageDocuments.init();\r\n});"]}