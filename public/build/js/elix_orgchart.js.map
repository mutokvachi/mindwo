{"version":3,"sources":["html2canvas.js","OrgChart.js","select2.min.js","select2_locale_multi.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC97GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxkEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"elix_orgchart.js","sourcesContent":["/*\r\n  html2canvas 0.5.0-beta3 <http://html2canvas.hertzen.com>\r\n  Copyright (c) 2016 Niklas von Hertzen\r\n\r\n  Released under  License\r\n*/\r\n\r\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.html2canvas=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\r\n(function (global){\r\n/*! http://mths.be/punycode v1.2.4 by @mathias */\r\n;(function(root) {\r\n\r\n\t/** Detect free variables */\r\n\tvar freeExports = typeof exports == 'object' && exports;\r\n\tvar freeModule = typeof module == 'object' && module &&\r\n\t\tmodule.exports == freeExports && module;\r\n\tvar freeGlobal = typeof global == 'object' && global;\r\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\r\n\t\troot = freeGlobal;\r\n\t}\r\n\r\n\t/**\r\n\t * The `punycode` object.\r\n\t * @name punycode\r\n\t * @type Object\r\n\t */\r\n\tvar punycode,\r\n\r\n\t/** Highest positive signed 32-bit float value */\r\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\r\n\r\n\t/** Bootstring parameters */\r\n\tbase = 36,\r\n\ttMin = 1,\r\n\ttMax = 26,\r\n\tskew = 38,\r\n\tdamp = 700,\r\n\tinitialBias = 72,\r\n\tinitialN = 128, // 0x80\r\n\tdelimiter = '-', // '\\x2D'\r\n\r\n\t/** Regular expressions */\r\n\tregexPunycode = /^xn--/,\r\n\tregexNonASCII = /[^ -~]/, // unprintable ASCII chars + non-ASCII chars\r\n\tregexSeparators = /\\x2E|\\u3002|\\uFF0E|\\uFF61/g, // RFC 3490 separators\r\n\r\n\t/** Error messages */\r\n\terrors = {\r\n\t\t'overflow': 'Overflow: input needs wider integers to process',\r\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\r\n\t\t'invalid-input': 'Invalid input'\r\n\t},\r\n\r\n\t/** Convenience shortcuts */\r\n\tbaseMinusTMin = base - tMin,\r\n\tfloor = Math.floor,\r\n\tstringFromCharCode = String.fromCharCode,\r\n\r\n\t/** Temporary variable */\r\n\tkey;\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/**\r\n\t * A generic error utility function.\r\n\t * @private\r\n\t * @param {String} type The error type.\r\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\r\n\t */\r\n\tfunction error(type) {\r\n\t\tthrow RangeError(errors[type]);\r\n\t}\r\n\r\n\t/**\r\n\t * A generic `Array#map` utility function.\r\n\t * @private\r\n\t * @param {Array} array The array to iterate over.\r\n\t * @param {Function} callback The function that gets called for every array\r\n\t * item.\r\n\t * @returns {Array} A new array of values returned by the callback function.\r\n\t */\r\n\tfunction map(array, fn) {\r\n\t\tvar length = array.length;\r\n\t\twhile (length--) {\r\n\t\t\tarray[length] = fn(array[length]);\r\n\t\t}\r\n\t\treturn array;\r\n\t}\r\n\r\n\t/**\r\n\t * A simple `Array#map`-like wrapper to work with domain name strings.\r\n\t * @private\r\n\t * @param {String} domain The domain name.\r\n\t * @param {Function} callback The function that gets called for every\r\n\t * character.\r\n\t * @returns {Array} A new string of characters returned by the callback\r\n\t * function.\r\n\t */\r\n\tfunction mapDomain(string, fn) {\r\n\t\treturn map(string.split(regexSeparators), fn).join('.');\r\n\t}\r\n\r\n\t/**\r\n\t * Creates an array containing the numeric code points of each Unicode\r\n\t * character in the string. While JavaScript uses UCS-2 internally,\r\n\t * this function will convert a pair of surrogate halves (each of which\r\n\t * UCS-2 exposes as separate characters) into a single code point,\r\n\t * matching UTF-16.\r\n\t * @see `punycode.ucs2.encode`\r\n\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\r\n\t * @memberOf punycode.ucs2\r\n\t * @name decode\r\n\t * @param {String} string The Unicode input string (UCS-2).\r\n\t * @returns {Array} The new array of code points.\r\n\t */\r\n\tfunction ucs2decode(string) {\r\n\t\tvar output = [],\r\n\t\t    counter = 0,\r\n\t\t    length = string.length,\r\n\t\t    value,\r\n\t\t    extra;\r\n\t\twhile (counter < length) {\r\n\t\t\tvalue = string.charCodeAt(counter++);\r\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\r\n\t\t\t\t// high surrogate, and there is a next character\r\n\t\t\t\textra = string.charCodeAt(counter++);\r\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\r\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\r\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\r\n\t\t\t\t\toutput.push(value);\r\n\t\t\t\t\tcounter--;\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\toutput.push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn output;\r\n\t}\r\n\r\n\t/**\r\n\t * Creates a string based on an array of numeric code points.\r\n\t * @see `punycode.ucs2.decode`\r\n\t * @memberOf punycode.ucs2\r\n\t * @name encode\r\n\t * @param {Array} codePoints The array of numeric code points.\r\n\t * @returns {String} The new Unicode string (UCS-2).\r\n\t */\r\n\tfunction ucs2encode(array) {\r\n\t\treturn map(array, function(value) {\r\n\t\t\tvar output = '';\r\n\t\t\tif (value > 0xFFFF) {\r\n\t\t\t\tvalue -= 0x10000;\r\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\r\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\r\n\t\t\t}\r\n\t\t\toutput += stringFromCharCode(value);\r\n\t\t\treturn output;\r\n\t\t}).join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a basic code point into a digit/integer.\r\n\t * @see `digitToBasic()`\r\n\t * @private\r\n\t * @param {Number} codePoint The basic numeric code point value.\r\n\t * @returns {Number} The numeric value of a basic code point (for use in\r\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\r\n\t * the code point does not represent a value.\r\n\t */\r\n\tfunction basicToDigit(codePoint) {\r\n\t\tif (codePoint - 48 < 10) {\r\n\t\t\treturn codePoint - 22;\r\n\t\t}\r\n\t\tif (codePoint - 65 < 26) {\r\n\t\t\treturn codePoint - 65;\r\n\t\t}\r\n\t\tif (codePoint - 97 < 26) {\r\n\t\t\treturn codePoint - 97;\r\n\t\t}\r\n\t\treturn base;\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a digit/integer into a basic code point.\r\n\t * @see `basicToDigit()`\r\n\t * @private\r\n\t * @param {Number} digit The numeric value of a basic code point.\r\n\t * @returns {Number} The basic code point whose value (when used for\r\n\t * representing integers) is `digit`, which needs to be in the range\r\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\r\n\t * used; else, the lowercase form is used. The behavior is undefined\r\n\t * if `flag` is non-zero and `digit` has no uppercase form.\r\n\t */\r\n\tfunction digitToBasic(digit, flag) {\r\n\t\t//  0..25 map to ASCII a..z or A..Z\r\n\t\t// 26..35 map to ASCII 0..9\r\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\r\n\t}\r\n\r\n\t/**\r\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\r\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\r\n\t * @private\r\n\t */\r\n\tfunction adapt(delta, numPoints, firstTime) {\r\n\t\tvar k = 0;\r\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\r\n\t\tdelta += floor(delta / numPoints);\r\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\r\n\t\t\tdelta = floor(delta / baseMinusTMin);\r\n\t\t}\r\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\r\n\t * symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The Punycode string of ASCII-only symbols.\r\n\t * @returns {String} The resulting string of Unicode symbols.\r\n\t */\r\n\tfunction decode(input) {\r\n\t\t// Don't use UCS-2\r\n\t\tvar output = [],\r\n\t\t    inputLength = input.length,\r\n\t\t    out,\r\n\t\t    i = 0,\r\n\t\t    n = initialN,\r\n\t\t    bias = initialBias,\r\n\t\t    basic,\r\n\t\t    j,\r\n\t\t    index,\r\n\t\t    oldi,\r\n\t\t    w,\r\n\t\t    k,\r\n\t\t    digit,\r\n\t\t    t,\r\n\t\t    /** Cached calculation results */\r\n\t\t    baseMinusT;\r\n\r\n\t\t// Handle the basic code points: let `basic` be the number of input code\r\n\t\t// points before the last delimiter, or `0` if there is none, then copy\r\n\t\t// the first basic code points to the output.\r\n\r\n\t\tbasic = input.lastIndexOf(delimiter);\r\n\t\tif (basic < 0) {\r\n\t\t\tbasic = 0;\r\n\t\t}\r\n\r\n\t\tfor (j = 0; j < basic; ++j) {\r\n\t\t\t// if it's not a basic code point\r\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\r\n\t\t\t\terror('not-basic');\r\n\t\t\t}\r\n\t\t\toutput.push(input.charCodeAt(j));\r\n\t\t}\r\n\r\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\r\n\t\t// points were copied; start at the beginning otherwise.\r\n\r\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\r\n\r\n\t\t\t// `index` is the index of the next character to be consumed.\r\n\t\t\t// Decode a generalized variable-length integer into `delta`,\r\n\t\t\t// which gets added to `i`. The overflow checking is easier\r\n\t\t\t// if we increase `i` as we go, then subtract off its starting\r\n\t\t\t// value at the end to obtain `delta`.\r\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\r\n\r\n\t\t\t\tif (index >= inputLength) {\r\n\t\t\t\t\terror('invalid-input');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\r\n\r\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\ti += digit * w;\r\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\r\n\t\t\t\tif (digit < t) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tw *= baseMinusT;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tout = output.length + 1;\r\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\r\n\r\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\r\n\t\t\t// incrementing `n` each time, so we'll fix that now:\r\n\t\t\tif (floor(i / out) > maxInt - n) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tn += floor(i / out);\r\n\t\t\ti %= out;\r\n\r\n\t\t\t// Insert `n` at position `i` of the output\r\n\t\t\toutput.splice(i++, 0, n);\r\n\r\n\t\t}\r\n\r\n\t\treturn ucs2encode(output);\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a string of Unicode symbols to a Punycode string of ASCII-only\r\n\t * symbols.\r\n\t * @memberOf punycode\r\n\t * @param {String} input The string of Unicode symbols.\r\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\r\n\t */\r\n\tfunction encode(input) {\r\n\t\tvar n,\r\n\t\t    delta,\r\n\t\t    handledCPCount,\r\n\t\t    basicLength,\r\n\t\t    bias,\r\n\t\t    j,\r\n\t\t    m,\r\n\t\t    q,\r\n\t\t    k,\r\n\t\t    t,\r\n\t\t    currentValue,\r\n\t\t    output = [],\r\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\r\n\t\t    inputLength,\r\n\t\t    /** Cached calculation results */\r\n\t\t    handledCPCountPlusOne,\r\n\t\t    baseMinusT,\r\n\t\t    qMinusT;\r\n\r\n\t\t// Convert the input in UCS-2 to Unicode\r\n\t\tinput = ucs2decode(input);\r\n\r\n\t\t// Cache the length\r\n\t\tinputLength = input.length;\r\n\r\n\t\t// Initialize the state\r\n\t\tn = initialN;\r\n\t\tdelta = 0;\r\n\t\tbias = initialBias;\r\n\r\n\t\t// Handle the basic code points\r\n\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\tcurrentValue = input[j];\r\n\t\t\tif (currentValue < 0x80) {\r\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\thandledCPCount = basicLength = output.length;\r\n\r\n\t\t// `handledCPCount` is the number of code points that have been handled;\r\n\t\t// `basicLength` is the number of basic code points.\r\n\r\n\t\t// Finish the basic string - if it is not empty - with a delimiter\r\n\t\tif (basicLength) {\r\n\t\t\toutput.push(delimiter);\r\n\t\t}\r\n\r\n\t\t// Main encoding loop:\r\n\t\twhile (handledCPCount < inputLength) {\r\n\r\n\t\t\t// All non-basic code points < n have been handled already. Find the next\r\n\t\t\t// larger one:\r\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\t\t\t\tif (currentValue >= n && currentValue < m) {\r\n\t\t\t\t\tm = currentValue;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\r\n\t\t\t// but guard against overflow\r\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\r\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\r\n\t\t\t\terror('overflow');\r\n\t\t\t}\r\n\r\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\r\n\t\t\tn = m;\r\n\r\n\t\t\tfor (j = 0; j < inputLength; ++j) {\r\n\t\t\t\tcurrentValue = input[j];\r\n\r\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\r\n\t\t\t\t\terror('overflow');\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif (currentValue == n) {\r\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\r\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\r\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\r\n\t\t\t\t\t\tif (q < t) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tqMinusT = q - t;\r\n\t\t\t\t\t\tbaseMinusT = base - t;\r\n\t\t\t\t\t\toutput.push(\r\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\r\n\t\t\t\t\t\t);\r\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\r\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\r\n\t\t\t\t\tdelta = 0;\r\n\t\t\t\t\t++handledCPCount;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t++delta;\r\n\t\t\t++n;\r\n\r\n\t\t}\r\n\t\treturn output.join('');\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Punycode string representing a domain name to Unicode. Only the\r\n\t * Punycoded parts of the domain name will be converted, i.e. it doesn't\r\n\t * matter if you call it on a string that has already been converted to\r\n\t * Unicode.\r\n\t * @memberOf punycode\r\n\t * @param {String} domain The Punycode domain name to convert to Unicode.\r\n\t * @returns {String} The Unicode representation of the given Punycode\r\n\t * string.\r\n\t */\r\n\tfunction toUnicode(domain) {\r\n\t\treturn mapDomain(domain, function(string) {\r\n\t\t\treturn regexPunycode.test(string)\r\n\t\t\t\t? decode(string.slice(4).toLowerCase())\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Converts a Unicode string representing a domain name to Punycode. Only the\r\n\t * non-ASCII parts of the domain name will be converted, i.e. it doesn't\r\n\t * matter if you call it with a domain that's already in ASCII.\r\n\t * @memberOf punycode\r\n\t * @param {String} domain The domain name to convert, as a Unicode string.\r\n\t * @returns {String} The Punycode representation of the given domain name.\r\n\t */\r\n\tfunction toASCII(domain) {\r\n\t\treturn mapDomain(domain, function(string) {\r\n\t\t\treturn regexNonASCII.test(string)\r\n\t\t\t\t? 'xn--' + encode(string)\r\n\t\t\t\t: string;\r\n\t\t});\r\n\t}\r\n\r\n\t/*--------------------------------------------------------------------------*/\r\n\r\n\t/** Define the public API */\r\n\tpunycode = {\r\n\t\t/**\r\n\t\t * A string representing the current Punycode.js version number.\r\n\t\t * @memberOf punycode\r\n\t\t * @type String\r\n\t\t */\r\n\t\t'version': '1.2.4',\r\n\t\t/**\r\n\t\t * An object of methods to convert from JavaScript's internal character\r\n\t\t * representation (UCS-2) to Unicode code points, and back.\r\n\t\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\r\n\t\t * @memberOf punycode\r\n\t\t * @type Object\r\n\t\t */\r\n\t\t'ucs2': {\r\n\t\t\t'decode': ucs2decode,\r\n\t\t\t'encode': ucs2encode\r\n\t\t},\r\n\t\t'decode': decode,\r\n\t\t'encode': encode,\r\n\t\t'toASCII': toASCII,\r\n\t\t'toUnicode': toUnicode\r\n\t};\r\n\r\n\t/** Expose `punycode` */\r\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\r\n\t// like the following:\r\n\tif (\r\n\t\ttypeof define == 'function' &&\r\n\t\ttypeof define.amd == 'object' &&\r\n\t\tdefine.amd\r\n\t) {\r\n\t\tdefine('punycode', function() {\r\n\t\t\treturn punycode;\r\n\t\t});\r\n\t} else if (freeExports && !freeExports.nodeType) {\r\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\r\n\t\t\tfreeModule.exports = punycode;\r\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\r\n\t\t\tfor (key in punycode) {\r\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\r\n\t\t\t}\r\n\t\t}\r\n\t} else { // in Rhino or a web browser\r\n\t\troot.punycode = punycode;\r\n\t}\r\n\r\n}(this));\r\n\r\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\r\n},{}],2:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction restoreOwnerScroll(ownerDocument, x, y) {\r\n    if (ownerDocument.defaultView && (x !== ownerDocument.defaultView.pageXOffset || y !== ownerDocument.defaultView.pageYOffset)) {\r\n        ownerDocument.defaultView.scrollTo(x, y);\r\n    }\r\n}\r\n\r\nfunction cloneCanvasContents(canvas, clonedCanvas) {\r\n    try {\r\n        if (clonedCanvas) {\r\n            clonedCanvas.width = canvas.width;\r\n            clonedCanvas.height = canvas.height;\r\n            clonedCanvas.getContext(\"2d\").putImageData(canvas.getContext(\"2d\").getImageData(0, 0, canvas.width, canvas.height), 0, 0);\r\n        }\r\n    } catch(e) {\r\n        log(\"Unable to copy canvas content from\", canvas, e);\r\n    }\r\n}\r\n\r\nfunction cloneNode(node, javascriptEnabled) {\r\n    var clone = node.nodeType === 3 ? document.createTextNode(node.nodeValue) : node.cloneNode(false);\r\n\r\n    var child = node.firstChild;\r\n    while(child) {\r\n        if (javascriptEnabled === true || child.nodeType !== 1 || child.nodeName !== 'SCRIPT') {\r\n            clone.appendChild(cloneNode(child, javascriptEnabled));\r\n        }\r\n        child = child.nextSibling;\r\n    }\r\n\r\n    if (node.nodeType === 1) {\r\n        clone._scrollTop = node.scrollTop;\r\n        clone._scrollLeft = node.scrollLeft;\r\n        if (node.nodeName === \"CANVAS\") {\r\n            cloneCanvasContents(node, clone);\r\n        } else if (node.nodeName === \"TEXTAREA\" || node.nodeName === \"SELECT\") {\r\n            clone.value = node.value;\r\n        }\r\n    }\r\n\r\n    return clone;\r\n}\r\n\r\nfunction initNode(node) {\r\n    if (node.nodeType === 1) {\r\n        node.scrollTop = node._scrollTop;\r\n        node.scrollLeft = node._scrollLeft;\r\n\r\n        var child = node.firstChild;\r\n        while(child) {\r\n            initNode(child);\r\n            child = child.nextSibling;\r\n        }\r\n    }\r\n}\r\n\r\nmodule.exports = function(ownerDocument, containerDocument, width, height, options, x ,y) {\r\n    var documentElement = cloneNode(ownerDocument.documentElement, options.javascriptEnabled);\r\n    var container = containerDocument.createElement(\"iframe\");\r\n\r\n    container.className = \"html2canvas-container\";\r\n    container.style.visibility = \"hidden\";\r\n    container.style.position = \"fixed\";\r\n    container.style.left = \"-10000px\";\r\n    container.style.top = \"0px\";\r\n    container.style.border = \"0\";\r\n    container.width = width;\r\n    container.height = height;\r\n    container.scrolling = \"no\"; // ios won't scroll without it\r\n    containerDocument.body.appendChild(container);\r\n\r\n    return new Promise(function(resolve) {\r\n        var documentClone = container.contentWindow.document;\r\n\r\n        /* Chrome doesn't detect relative background-images assigned in inline <style> sheets when fetched through getComputedStyle\r\n         if window url is about:blank, we can assign the url to current by writing onto the document\r\n         */\r\n        container.contentWindow.onload = container.onload = function() {\r\n            var interval = setInterval(function() {\r\n                if (documentClone.body.childNodes.length > 0) {\r\n                    initNode(documentClone.documentElement);\r\n                    clearInterval(interval);\r\n                    if (options.type === \"view\") {\r\n                        container.contentWindow.scrollTo(x, y);\r\n                        if ((/(iPad|iPhone|iPod)/g).test(navigator.userAgent) && (container.contentWindow.scrollY !== y || container.contentWindow.scrollX !== x)) {\r\n                            documentClone.documentElement.style.top = (-y) + \"px\";\r\n                            documentClone.documentElement.style.left = (-x) + \"px\";\r\n                            documentClone.documentElement.style.position = 'absolute';\r\n                        }\r\n                    }\r\n                    resolve(container);\r\n                }\r\n            }, 50);\r\n        };\r\n\r\n        documentClone.open();\r\n        documentClone.write(\"<!DOCTYPE html><html></html>\");\r\n        // Chrome scrolls the parent document for some reason after the write to the cloned window???\r\n        restoreOwnerScroll(ownerDocument, x, y);\r\n        documentClone.replaceChild(documentClone.adoptNode(documentElement), documentClone.documentElement);\r\n        documentClone.close();\r\n    });\r\n};\r\n\r\n},{\"./log\":13}],3:[function(_dereq_,module,exports){\r\n// http://dev.w3.org/csswg/css-color/\r\n\r\nfunction Color(value) {\r\n    this.r = 0;\r\n    this.g = 0;\r\n    this.b = 0;\r\n    this.a = null;\r\n    var result = this.fromArray(value) ||\r\n        this.namedColor(value) ||\r\n        this.rgb(value) ||\r\n        this.rgba(value) ||\r\n        this.hex6(value) ||\r\n        this.hex3(value);\r\n}\r\n\r\nColor.prototype.darken = function(amount) {\r\n    var a = 1 - amount;\r\n    return  new Color([\r\n        Math.round(this.r * a),\r\n        Math.round(this.g * a),\r\n        Math.round(this.b * a),\r\n        this.a\r\n    ]);\r\n};\r\n\r\nColor.prototype.isTransparent = function() {\r\n    return this.a === 0;\r\n};\r\n\r\nColor.prototype.isBlack = function() {\r\n    return this.r === 0 && this.g === 0 && this.b === 0;\r\n};\r\n\r\nColor.prototype.fromArray = function(array) {\r\n    if (Array.isArray(array)) {\r\n        this.r = Math.min(array[0], 255);\r\n        this.g = Math.min(array[1], 255);\r\n        this.b = Math.min(array[2], 255);\r\n        if (array.length > 3) {\r\n            this.a = array[3];\r\n        }\r\n    }\r\n\r\n    return (Array.isArray(array));\r\n};\r\n\r\nvar _hex3 = /^#([a-f0-9]{3})$/i;\r\n\r\nColor.prototype.hex3 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex3)) !== null) {\r\n        this.r = parseInt(match[1][0] + match[1][0], 16);\r\n        this.g = parseInt(match[1][1] + match[1][1], 16);\r\n        this.b = parseInt(match[1][2] + match[1][2], 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _hex6 = /^#([a-f0-9]{6})$/i;\r\n\r\nColor.prototype.hex6 = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_hex6)) !== null) {\r\n        this.r = parseInt(match[1].substring(0, 2), 16);\r\n        this.g = parseInt(match[1].substring(2, 4), 16);\r\n        this.b = parseInt(match[1].substring(4, 6), 16);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\n\r\nvar _rgb = /^rgb\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*\\)$/;\r\n\r\nColor.prototype.rgb = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgb)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nvar _rgba = /^rgba\\(\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d{1,3})\\s*,\\s*(\\d?\\.?\\d+)\\s*\\)$/;\r\n\r\nColor.prototype.rgba = function(value) {\r\n    var match = null;\r\n    if ((match = value.match(_rgba)) !== null) {\r\n        this.r = Number(match[1]);\r\n        this.g = Number(match[2]);\r\n        this.b = Number(match[3]);\r\n        this.a = Number(match[4]);\r\n    }\r\n    return match !== null;\r\n};\r\n\r\nColor.prototype.toString = function() {\r\n    return this.a !== null && this.a !== 1 ?\r\n    \"rgba(\" + [this.r, this.g, this.b, this.a].join(\",\") + \")\" :\r\n    \"rgb(\" + [this.r, this.g, this.b].join(\",\") + \")\";\r\n};\r\n\r\nColor.prototype.namedColor = function(value) {\r\n    value = value.toLowerCase();\r\n    var color = colors[value];\r\n    if (color) {\r\n        this.r = color[0];\r\n        this.g = color[1];\r\n        this.b = color[2];\r\n    } else if (value === \"transparent\") {\r\n        this.r = this.g = this.b = this.a = 0;\r\n        return true;\r\n    }\r\n\r\n    return !!color;\r\n};\r\n\r\nColor.prototype.isColor = true;\r\n\r\n// JSON.stringify([].slice.call($$('.named-color-table tr'), 1).map(function(row) { return [row.childNodes[3].textContent, row.childNodes[5].textContent.trim().split(\",\").map(Number)] }).reduce(function(data, row) {data[row[0]] = row[1]; return data}, {}))\r\nvar colors = {\r\n    \"aliceblue\": [240, 248, 255],\r\n    \"antiquewhite\": [250, 235, 215],\r\n    \"aqua\": [0, 255, 255],\r\n    \"aquamarine\": [127, 255, 212],\r\n    \"azure\": [240, 255, 255],\r\n    \"beige\": [245, 245, 220],\r\n    \"bisque\": [255, 228, 196],\r\n    \"black\": [0, 0, 0],\r\n    \"blanchedalmond\": [255, 235, 205],\r\n    \"blue\": [0, 0, 255],\r\n    \"blueviolet\": [138, 43, 226],\r\n    \"brown\": [165, 42, 42],\r\n    \"burlywood\": [222, 184, 135],\r\n    \"cadetblue\": [95, 158, 160],\r\n    \"chartreuse\": [127, 255, 0],\r\n    \"chocolate\": [210, 105, 30],\r\n    \"coral\": [255, 127, 80],\r\n    \"cornflowerblue\": [100, 149, 237],\r\n    \"cornsilk\": [255, 248, 220],\r\n    \"crimson\": [220, 20, 60],\r\n    \"cyan\": [0, 255, 255],\r\n    \"darkblue\": [0, 0, 139],\r\n    \"darkcyan\": [0, 139, 139],\r\n    \"darkgoldenrod\": [184, 134, 11],\r\n    \"darkgray\": [169, 169, 169],\r\n    \"darkgreen\": [0, 100, 0],\r\n    \"darkgrey\": [169, 169, 169],\r\n    \"darkkhaki\": [189, 183, 107],\r\n    \"darkmagenta\": [139, 0, 139],\r\n    \"darkolivegreen\": [85, 107, 47],\r\n    \"darkorange\": [255, 140, 0],\r\n    \"darkorchid\": [153, 50, 204],\r\n    \"darkred\": [139, 0, 0],\r\n    \"darksalmon\": [233, 150, 122],\r\n    \"darkseagreen\": [143, 188, 143],\r\n    \"darkslateblue\": [72, 61, 139],\r\n    \"darkslategray\": [47, 79, 79],\r\n    \"darkslategrey\": [47, 79, 79],\r\n    \"darkturquoise\": [0, 206, 209],\r\n    \"darkviolet\": [148, 0, 211],\r\n    \"deeppink\": [255, 20, 147],\r\n    \"deepskyblue\": [0, 191, 255],\r\n    \"dimgray\": [105, 105, 105],\r\n    \"dimgrey\": [105, 105, 105],\r\n    \"dodgerblue\": [30, 144, 255],\r\n    \"firebrick\": [178, 34, 34],\r\n    \"floralwhite\": [255, 250, 240],\r\n    \"forestgreen\": [34, 139, 34],\r\n    \"fuchsia\": [255, 0, 255],\r\n    \"gainsboro\": [220, 220, 220],\r\n    \"ghostwhite\": [248, 248, 255],\r\n    \"gold\": [255, 215, 0],\r\n    \"goldenrod\": [218, 165, 32],\r\n    \"gray\": [128, 128, 128],\r\n    \"green\": [0, 128, 0],\r\n    \"greenyellow\": [173, 255, 47],\r\n    \"grey\": [128, 128, 128],\r\n    \"honeydew\": [240, 255, 240],\r\n    \"hotpink\": [255, 105, 180],\r\n    \"indianred\": [205, 92, 92],\r\n    \"indigo\": [75, 0, 130],\r\n    \"ivory\": [255, 255, 240],\r\n    \"khaki\": [240, 230, 140],\r\n    \"lavender\": [230, 230, 250],\r\n    \"lavenderblush\": [255, 240, 245],\r\n    \"lawngreen\": [124, 252, 0],\r\n    \"lemonchiffon\": [255, 250, 205],\r\n    \"lightblue\": [173, 216, 230],\r\n    \"lightcoral\": [240, 128, 128],\r\n    \"lightcyan\": [224, 255, 255],\r\n    \"lightgoldenrodyellow\": [250, 250, 210],\r\n    \"lightgray\": [211, 211, 211],\r\n    \"lightgreen\": [144, 238, 144],\r\n    \"lightgrey\": [211, 211, 211],\r\n    \"lightpink\": [255, 182, 193],\r\n    \"lightsalmon\": [255, 160, 122],\r\n    \"lightseagreen\": [32, 178, 170],\r\n    \"lightskyblue\": [135, 206, 250],\r\n    \"lightslategray\": [119, 136, 153],\r\n    \"lightslategrey\": [119, 136, 153],\r\n    \"lightsteelblue\": [176, 196, 222],\r\n    \"lightyellow\": [255, 255, 224],\r\n    \"lime\": [0, 255, 0],\r\n    \"limegreen\": [50, 205, 50],\r\n    \"linen\": [250, 240, 230],\r\n    \"magenta\": [255, 0, 255],\r\n    \"maroon\": [128, 0, 0],\r\n    \"mediumaquamarine\": [102, 205, 170],\r\n    \"mediumblue\": [0, 0, 205],\r\n    \"mediumorchid\": [186, 85, 211],\r\n    \"mediumpurple\": [147, 112, 219],\r\n    \"mediumseagreen\": [60, 179, 113],\r\n    \"mediumslateblue\": [123, 104, 238],\r\n    \"mediumspringgreen\": [0, 250, 154],\r\n    \"mediumturquoise\": [72, 209, 204],\r\n    \"mediumvioletred\": [199, 21, 133],\r\n    \"midnightblue\": [25, 25, 112],\r\n    \"mintcream\": [245, 255, 250],\r\n    \"mistyrose\": [255, 228, 225],\r\n    \"moccasin\": [255, 228, 181],\r\n    \"navajowhite\": [255, 222, 173],\r\n    \"navy\": [0, 0, 128],\r\n    \"oldlace\": [253, 245, 230],\r\n    \"olive\": [128, 128, 0],\r\n    \"olivedrab\": [107, 142, 35],\r\n    \"orange\": [255, 165, 0],\r\n    \"orangered\": [255, 69, 0],\r\n    \"orchid\": [218, 112, 214],\r\n    \"palegoldenrod\": [238, 232, 170],\r\n    \"palegreen\": [152, 251, 152],\r\n    \"paleturquoise\": [175, 238, 238],\r\n    \"palevioletred\": [219, 112, 147],\r\n    \"papayawhip\": [255, 239, 213],\r\n    \"peachpuff\": [255, 218, 185],\r\n    \"peru\": [205, 133, 63],\r\n    \"pink\": [255, 192, 203],\r\n    \"plum\": [221, 160, 221],\r\n    \"powderblue\": [176, 224, 230],\r\n    \"purple\": [128, 0, 128],\r\n    \"rebeccapurple\": [102, 51, 153],\r\n    \"red\": [255, 0, 0],\r\n    \"rosybrown\": [188, 143, 143],\r\n    \"royalblue\": [65, 105, 225],\r\n    \"saddlebrown\": [139, 69, 19],\r\n    \"salmon\": [250, 128, 114],\r\n    \"sandybrown\": [244, 164, 96],\r\n    \"seagreen\": [46, 139, 87],\r\n    \"seashell\": [255, 245, 238],\r\n    \"sienna\": [160, 82, 45],\r\n    \"silver\": [192, 192, 192],\r\n    \"skyblue\": [135, 206, 235],\r\n    \"slateblue\": [106, 90, 205],\r\n    \"slategray\": [112, 128, 144],\r\n    \"slategrey\": [112, 128, 144],\r\n    \"snow\": [255, 250, 250],\r\n    \"springgreen\": [0, 255, 127],\r\n    \"steelblue\": [70, 130, 180],\r\n    \"tan\": [210, 180, 140],\r\n    \"teal\": [0, 128, 128],\r\n    \"thistle\": [216, 191, 216],\r\n    \"tomato\": [255, 99, 71],\r\n    \"turquoise\": [64, 224, 208],\r\n    \"violet\": [238, 130, 238],\r\n    \"wheat\": [245, 222, 179],\r\n    \"white\": [255, 255, 255],\r\n    \"whitesmoke\": [245, 245, 245],\r\n    \"yellow\": [255, 255, 0],\r\n    \"yellowgreen\": [154, 205, 50]\r\n};\r\n\r\nmodule.exports = Color;\r\n\r\n},{}],4:[function(_dereq_,module,exports){\r\nvar Support = _dereq_('./support');\r\nvar CanvasRenderer = _dereq_('./renderers/canvas');\r\nvar ImageLoader = _dereq_('./imageloader');\r\nvar NodeParser = _dereq_('./nodeparser');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar log = _dereq_('./log');\r\nvar utils = _dereq_('./utils');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\nvar getBounds = utils.getBounds;\r\n\r\nvar html2canvasNodeAttribute = \"data-html2canvas-node\";\r\nvar html2canvasCloneIndex = 0;\r\n\r\nfunction html2canvas(nodeList, options) {\r\n    var index = html2canvasCloneIndex++;\r\n    options = options || {};\r\n    if (options.logging) {\r\n        log.options.logging = true;\r\n        log.options.start = Date.now();\r\n    }\r\n\r\n    options.async = typeof(options.async) === \"undefined\" ? true : options.async;\r\n    options.allowTaint = typeof(options.allowTaint) === \"undefined\" ? false : options.allowTaint;\r\n    options.removeContainer = typeof(options.removeContainer) === \"undefined\" ? true : options.removeContainer;\r\n    options.javascriptEnabled = typeof(options.javascriptEnabled) === \"undefined\" ? false : options.javascriptEnabled;\r\n    options.imageTimeout = typeof(options.imageTimeout) === \"undefined\" ? 10000 : options.imageTimeout;\r\n    options.renderer = typeof(options.renderer) === \"function\" ? options.renderer : CanvasRenderer;\r\n    options.strict = !!options.strict;\r\n\r\n    if (typeof(nodeList) === \"string\") {\r\n        if (typeof(options.proxy) !== \"string\") {\r\n            return Promise.reject(\"Proxy must be used when rendering url\");\r\n        }\r\n        var width = options.width != null ? options.width : window.innerWidth;\r\n        var height = options.height != null ? options.height : window.innerHeight;\r\n        return loadUrlDocument(absoluteUrl(nodeList), options.proxy, document, width, height, options).then(function(container) {\r\n            return renderWindow(container.contentWindow.document.documentElement, container, options, width, height);\r\n        });\r\n    }\r\n\r\n    var node = ((nodeList === undefined) ? [document.documentElement] : ((nodeList.length) ? nodeList : [nodeList]))[0];\r\n    node.setAttribute(html2canvasNodeAttribute + index, index);\r\n    return renderDocument(node.ownerDocument, options, node.ownerDocument.defaultView.innerWidth, node.ownerDocument.defaultView.innerHeight, index).then(function(canvas) {\r\n        if (typeof(options.onrendered) === \"function\") {\r\n            log(\"options.onrendered is deprecated, html2canvas returns a Promise containing the canvas\");\r\n            options.onrendered(canvas);\r\n        }\r\n        return canvas;\r\n    });\r\n}\r\n\r\nhtml2canvas.CanvasRenderer = CanvasRenderer;\r\nhtml2canvas.NodeContainer = NodeContainer;\r\nhtml2canvas.log = log;\r\nhtml2canvas.utils = utils;\r\n\r\nvar html2canvasExport = (typeof(document) === \"undefined\" || typeof(Object.create) !== \"function\" || typeof(document.createElement(\"canvas\").getContext) !== \"function\") ? function() {\r\n    return Promise.reject(\"No canvas support\");\r\n} : html2canvas;\r\n\r\nmodule.exports = html2canvasExport;\r\n\r\nif (typeof(define) === 'function' && define.amd) {\r\n    define('html2canvas', [], function() {\r\n        return html2canvasExport;\r\n    });\r\n}\r\n\r\nfunction renderDocument(document, options, windowWidth, windowHeight, html2canvasIndex) {\r\n    return createWindowClone(document, document, windowWidth, windowHeight, options, document.defaultView.pageXOffset, document.defaultView.pageYOffset).then(function(container) {\r\n        log(\"Document cloned\");\r\n        var attributeName = html2canvasNodeAttribute + html2canvasIndex;\r\n        var selector = \"[\" + attributeName + \"='\" + html2canvasIndex + \"']\";\r\n        document.querySelector(selector).removeAttribute(attributeName);\r\n        var clonedWindow = container.contentWindow;\r\n        var node = clonedWindow.document.querySelector(selector);\r\n        var oncloneHandler = (typeof(options.onclone) === \"function\") ? Promise.resolve(options.onclone(clonedWindow.document)) : Promise.resolve(true);\r\n        return oncloneHandler.then(function() {\r\n            return renderWindow(node, container, options, windowWidth, windowHeight);\r\n        });\r\n    });\r\n}\r\n\r\nfunction renderWindow(node, container, options, windowWidth, windowHeight) {\r\n    var clonedWindow = container.contentWindow;\r\n    var support = new Support(clonedWindow.document);\r\n    var imageLoader = new ImageLoader(options, support);\r\n    var bounds = getBounds(node);\r\n    var width = options.type === \"view\" ? windowWidth : documentWidth(clonedWindow.document);\r\n    var height = options.type === \"view\" ? windowHeight : documentHeight(clonedWindow.document);\r\n    var renderer = new options.renderer(width, height, imageLoader, options, document);\r\n    var parser = new NodeParser(node, renderer, support, imageLoader, options);\r\n    return parser.ready.then(function() {\r\n        log(\"Finished rendering\");\r\n        var canvas;\r\n\r\n        if (options.type === \"view\") {\r\n            canvas = crop(renderer.canvas, {width: renderer.canvas.width, height: renderer.canvas.height, top: 0, left: 0, x: 0, y: 0});\r\n        } else if (node === clonedWindow.document.body || node === clonedWindow.document.documentElement || options.canvas != null) {\r\n            canvas = renderer.canvas;\r\n        } else {\r\n            canvas = crop(renderer.canvas, {width:  options.width != null ? options.width : bounds.width, height: options.height != null ? options.height : bounds.height, top: bounds.top, left: bounds.left, x: 0, y: 0});\r\n        }\r\n\r\n        cleanupContainer(container, options);\r\n        return canvas;\r\n    });\r\n}\r\n\r\nfunction cleanupContainer(container, options) {\r\n    if (options.removeContainer) {\r\n        container.parentNode.removeChild(container);\r\n        log(\"Cleaned up container\");\r\n    }\r\n}\r\n\r\nfunction crop(canvas, bounds) {\r\n    var croppedCanvas = document.createElement(\"canvas\");\r\n    var x1 = Math.min(canvas.width - 1, Math.max(0, bounds.left));\r\n    var x2 = Math.min(canvas.width, Math.max(1, bounds.left + bounds.width));\r\n    var y1 = Math.min(canvas.height - 1, Math.max(0, bounds.top));\r\n    var y2 = Math.min(canvas.height, Math.max(1, bounds.top + bounds.height));\r\n    croppedCanvas.width = bounds.width;\r\n    croppedCanvas.height =  bounds.height;\r\n    var width = x2-x1;\r\n    var height = y2-y1;\r\n    log(\"Cropping canvas at:\", \"left:\", bounds.left, \"top:\", bounds.top, \"width:\", width, \"height:\", height);\r\n    log(\"Resulting crop with width\", bounds.width, \"and height\", bounds.height, \"with x\", x1, \"and y\", y1);\r\n    croppedCanvas.getContext(\"2d\").drawImage(canvas, x1, y1, width, height, bounds.x, bounds.y, width, height);\r\n    return croppedCanvas;\r\n}\r\n\r\nfunction documentWidth (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollWidth, doc.documentElement.scrollWidth),\r\n        Math.max(doc.body.offsetWidth, doc.documentElement.offsetWidth),\r\n        Math.max(doc.body.clientWidth, doc.documentElement.clientWidth)\r\n    );\r\n}\r\n\r\nfunction documentHeight (doc) {\r\n    return Math.max(\r\n        Math.max(doc.body.scrollHeight, doc.documentElement.scrollHeight),\r\n        Math.max(doc.body.offsetHeight, doc.documentElement.offsetHeight),\r\n        Math.max(doc.body.clientHeight, doc.documentElement.clientHeight)\r\n    );\r\n}\r\n\r\nfunction absoluteUrl(url) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = url;\r\n    link.href = link.href;\r\n    return link;\r\n}\r\n\r\n},{\"./clone\":2,\"./imageloader\":11,\"./log\":13,\"./nodecontainer\":14,\"./nodeparser\":15,\"./proxy\":16,\"./renderers/canvas\":20,\"./support\":22,\"./utils\":26}],5:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction DummyImageContainer(src) {\r\n    this.src = src;\r\n    log(\"DummyImageContainer for\", src);\r\n    if (!this.promise || !this.image) {\r\n        log(\"Initiating DummyImageContainer\");\r\n        DummyImageContainer.prototype.image = new Image();\r\n        var image = this.image;\r\n        DummyImageContainer.prototype.promise = new Promise(function(resolve, reject) {\r\n            image.onload = resolve;\r\n            image.onerror = reject;\r\n            image.src = smallImage();\r\n            if (image.complete === true) {\r\n                resolve(image);\r\n            }\r\n        });\r\n    }\r\n}\r\n\r\nmodule.exports = DummyImageContainer;\r\n\r\n},{\"./log\":13,\"./utils\":26}],6:[function(_dereq_,module,exports){\r\nvar smallImage = _dereq_('./utils').smallImage;\r\n\r\nfunction Font(family, size) {\r\n    var container = document.createElement('div'),\r\n        img = document.createElement('img'),\r\n        span = document.createElement('span'),\r\n        sampleText = 'Hidden Text',\r\n        baseline,\r\n        middle;\r\n\r\n    container.style.visibility = \"hidden\";\r\n    container.style.fontFamily = family;\r\n    container.style.fontSize = size;\r\n    container.style.margin = 0;\r\n    container.style.padding = 0;\r\n\r\n    document.body.appendChild(container);\r\n\r\n    img.src = smallImage();\r\n    img.width = 1;\r\n    img.height = 1;\r\n\r\n    img.style.margin = 0;\r\n    img.style.padding = 0;\r\n    img.style.verticalAlign = \"baseline\";\r\n\r\n    span.style.fontFamily = family;\r\n    span.style.fontSize = size;\r\n    span.style.margin = 0;\r\n    span.style.padding = 0;\r\n\r\n    span.appendChild(document.createTextNode(sampleText));\r\n    container.appendChild(span);\r\n    container.appendChild(img);\r\n    baseline = (img.offsetTop - span.offsetTop) + 1;\r\n\r\n    container.removeChild(span);\r\n    container.appendChild(document.createTextNode(sampleText));\r\n\r\n    container.style.lineHeight = \"normal\";\r\n    img.style.verticalAlign = \"super\";\r\n\r\n    middle = (img.offsetTop-container.offsetTop) + 1;\r\n\r\n    document.body.removeChild(container);\r\n\r\n    this.baseline = baseline;\r\n    this.lineWidth = 1;\r\n    this.middle = middle;\r\n}\r\n\r\nmodule.exports = Font;\r\n\r\n},{\"./utils\":26}],7:[function(_dereq_,module,exports){\r\nvar Font = _dereq_('./font');\r\n\r\nfunction FontMetrics() {\r\n    this.data = {};\r\n}\r\n\r\nFontMetrics.prototype.getMetrics = function(family, size) {\r\n    if (this.data[family + \"-\" + size] === undefined) {\r\n        this.data[family + \"-\" + size] = new Font(family, size);\r\n    }\r\n    return this.data[family + \"-\" + size];\r\n};\r\n\r\nmodule.exports = FontMetrics;\r\n\r\n},{\"./font\":6}],8:[function(_dereq_,module,exports){\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar loadUrlDocument = _dereq_('./proxy').loadUrlDocument;\r\n\r\nfunction FrameContainer(container, sameOrigin, options) {\r\n    this.image = null;\r\n    this.src = container;\r\n    var self = this;\r\n    var bounds = getBounds(container);\r\n    this.promise = (!sameOrigin ? this.proxyLoad(options.proxy, bounds, options) : new Promise(function(resolve) {\r\n        if (container.contentWindow.document.URL === \"about:blank\" || container.contentWindow.document.documentElement == null) {\r\n            container.contentWindow.onload = container.onload = function() {\r\n                resolve(container);\r\n            };\r\n        } else {\r\n            resolve(container);\r\n        }\r\n    })).then(function(container) {\r\n        var html2canvas = _dereq_('./core');\r\n        return html2canvas(container.contentWindow.document.documentElement, {type: 'view', width: container.width, height: container.height, proxy: options.proxy, javascriptEnabled: options.javascriptEnabled, removeContainer: options.removeContainer, allowTaint: options.allowTaint, imageTimeout: options.imageTimeout / 2});\r\n    }).then(function(canvas) {\r\n        return self.image = canvas;\r\n    });\r\n}\r\n\r\nFrameContainer.prototype.proxyLoad = function(proxy, bounds, options) {\r\n    var container = this.src;\r\n    return loadUrlDocument(container.src, proxy, container.ownerDocument, bounds.width, bounds.height, options);\r\n};\r\n\r\nmodule.exports = FrameContainer;\r\n\r\n},{\"./core\":4,\"./proxy\":16,\"./utils\":26}],9:[function(_dereq_,module,exports){\r\nfunction GradientContainer(imageData) {\r\n    this.src = imageData.value;\r\n    this.colorStops = [];\r\n    this.type = null;\r\n    this.x0 = 0.5;\r\n    this.y0 = 0.5;\r\n    this.x1 = 0.5;\r\n    this.y1 = 0.5;\r\n    this.promise = Promise.resolve(true);\r\n}\r\n\r\nGradientContainer.TYPES = {\r\n    LINEAR: 1,\r\n    RADIAL: 2\r\n};\r\n\r\n// TODO: support hsl[a], negative %/length values\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nGradientContainer.REGEXP_COLORSTOP = /^\\s*(rgba?\\(\\s*\\d{1,3},\\s*\\d{1,3},\\s*\\d{1,3}(?:,\\s*[0-9\\.]+)?\\s*\\)|[a-z]{3,20}|#[a-f0-9]{3,6})(?:\\s+(\\d{1,3}(?:\\.\\d+)?)(%|px)?)?(?:\\s|$)/i;\r\n\r\nmodule.exports = GradientContainer;\r\n\r\n},{}],10:[function(_dereq_,module,exports){\r\nfunction ImageContainer(src, cors) {\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.tainted = null;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        if (cors) {\r\n            self.image.crossOrigin = \"anonymous\";\r\n        }\r\n        self.image.src = src;\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    });\r\n}\r\n\r\nmodule.exports = ImageContainer;\r\n\r\n},{}],11:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar ImageContainer = _dereq_('./imagecontainer');\r\nvar DummyImageContainer = _dereq_('./dummyimagecontainer');\r\nvar ProxyImageContainer = _dereq_('./proxyimagecontainer');\r\nvar FrameContainer = _dereq_('./framecontainer');\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\nvar SVGNodeContainer = _dereq_('./svgnodecontainer');\r\nvar LinearGradientContainer = _dereq_('./lineargradientcontainer');\r\nvar WebkitGradientContainer = _dereq_('./webkitgradientcontainer');\r\nvar bind = _dereq_('./utils').bind;\r\n\r\nfunction ImageLoader(options, support) {\r\n    this.link = null;\r\n    this.options = options;\r\n    this.support = support;\r\n    this.origin = this.getOrigin(window.location.href);\r\n}\r\n\r\nImageLoader.prototype.findImages = function(nodes) {\r\n    var images = [];\r\n    nodes.reduce(function(imageNodes, container) {\r\n        switch(container.node.nodeName) {\r\n        case \"IMG\":\r\n            return imageNodes.concat([{\r\n                args: [container.node.src],\r\n                method: \"url\"\r\n            }]);\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            return imageNodes.concat([{\r\n                args: [container.node],\r\n                method: container.node.nodeName\r\n            }]);\r\n        }\r\n        return imageNodes;\r\n    }, []).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.findBackgroundImage = function(images, container) {\r\n    container.parseBackgroundImages().filter(this.hasImageBackground).forEach(this.addImage(images, this.loadImage), this);\r\n    return images;\r\n};\r\n\r\nImageLoader.prototype.addImage = function(images, callback) {\r\n    return function(newImage) {\r\n        newImage.args.forEach(function(image) {\r\n            if (!this.imageExists(images, image)) {\r\n                images.splice(0, 0, callback.call(this, newImage));\r\n                log('Added image #' + (images.length), typeof(image) === \"string\" ? image.substring(0, 100) : image);\r\n            }\r\n        }, this);\r\n    };\r\n};\r\n\r\nImageLoader.prototype.hasImageBackground = function(imageData) {\r\n    return imageData.method !== \"none\";\r\n};\r\n\r\nImageLoader.prototype.loadImage = function(imageData) {\r\n    if (imageData.method === \"url\") {\r\n        var src = imageData.args[0];\r\n        if (this.isSVG(src) && !this.support.svg && !this.options.allowTaint) {\r\n            return new SVGContainer(src);\r\n        } else if (src.match(/data:image\\/.*;base64,/i)) {\r\n            return new ImageContainer(src.replace(/url\\(['\"]{0,}|['\"]{0,}\\)$/ig, ''), false);\r\n        } else if (this.isSameOrigin(src) || this.options.allowTaint === true || this.isSVG(src)) {\r\n            return new ImageContainer(src, false);\r\n        } else if (this.support.cors && !this.options.allowTaint && this.options.useCORS) {\r\n            return new ImageContainer(src, true);\r\n        } else if (this.options.proxy) {\r\n            return new ProxyImageContainer(src, this.options.proxy);\r\n        } else {\r\n            return new DummyImageContainer(src);\r\n        }\r\n    } else if (imageData.method === \"linear-gradient\") {\r\n        return new LinearGradientContainer(imageData);\r\n    } else if (imageData.method === \"gradient\") {\r\n        return new WebkitGradientContainer(imageData);\r\n    } else if (imageData.method === \"svg\") {\r\n        return new SVGNodeContainer(imageData.args[0], this.support.svg);\r\n    } else if (imageData.method === \"IFRAME\") {\r\n        return new FrameContainer(imageData.args[0], this.isSameOrigin(imageData.args[0].src), this.options);\r\n    } else {\r\n        return new DummyImageContainer(imageData);\r\n    }\r\n};\r\n\r\nImageLoader.prototype.isSVG = function(src) {\r\n    return src.substring(src.length - 3).toLowerCase() === \"svg\" || SVGContainer.prototype.isInline(src);\r\n};\r\n\r\nImageLoader.prototype.imageExists = function(images, src) {\r\n    return images.some(function(image) {\r\n        return image.src === src;\r\n    });\r\n};\r\n\r\nImageLoader.prototype.isSameOrigin = function(url) {\r\n    return (this.getOrigin(url) === this.origin);\r\n};\r\n\r\nImageLoader.prototype.getOrigin = function(url) {\r\n    var link = this.link || (this.link = document.createElement(\"a\"));\r\n    link.href = url;\r\n    link.href = link.href; // IE9, LOL! - http://jsfiddle.net/niklasvh/2e48b/\r\n    return link.protocol + link.hostname + link.port;\r\n};\r\n\r\nImageLoader.prototype.getPromise = function(container) {\r\n    return this.timeout(container, this.options.imageTimeout)['catch'](function() {\r\n        var dummy = new DummyImageContainer(container.src);\r\n        return dummy.promise.then(function(image) {\r\n            container.image = image;\r\n        });\r\n    });\r\n};\r\n\r\nImageLoader.prototype.get = function(src) {\r\n    var found = null;\r\n    return this.images.some(function(img) {\r\n        return (found = img).src === src;\r\n    }) ? found : null;\r\n};\r\n\r\nImageLoader.prototype.fetch = function(nodes) {\r\n    this.images = nodes.reduce(bind(this.findBackgroundImage, this), this.findImages(nodes));\r\n    this.images.forEach(function(image, index) {\r\n        image.promise.then(function() {\r\n            log(\"Succesfully loaded image #\"+ (index+1), image);\r\n        }, function(e) {\r\n            log(\"Failed loading image #\"+ (index+1), image, e);\r\n        });\r\n    });\r\n    this.ready = Promise.all(this.images.map(this.getPromise, this));\r\n    log(\"Finished searching images\");\r\n    return this;\r\n};\r\n\r\nImageLoader.prototype.timeout = function(container, timeout) {\r\n    var timer;\r\n    var promise = Promise.race([container.promise, new Promise(function(res, reject) {\r\n        timer = setTimeout(function() {\r\n            log(\"Timed out loading image\", container);\r\n            reject(container);\r\n        }, timeout);\r\n    })]).then(function(container) {\r\n        clearTimeout(timer);\r\n        return container;\r\n    });\r\n    promise['catch'](function() {\r\n        clearTimeout(timer);\r\n    });\r\n    return promise;\r\n};\r\n\r\nmodule.exports = ImageLoader;\r\n\r\n},{\"./dummyimagecontainer\":5,\"./framecontainer\":8,\"./imagecontainer\":10,\"./lineargradientcontainer\":12,\"./log\":13,\"./proxyimagecontainer\":17,\"./svgcontainer\":23,\"./svgnodecontainer\":24,\"./utils\":26,\"./webkitgradientcontainer\":27}],12:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\nvar Color = _dereq_('./color');\r\n\r\nfunction LinearGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = GradientContainer.TYPES.LINEAR;\r\n\r\n    var hasDirection = LinearGradientContainer.REGEXP_DIRECTION.test( imageData.args[0] ) ||\r\n        !GradientContainer.REGEXP_COLORSTOP.test( imageData.args[0] );\r\n\r\n    if (hasDirection) {\r\n        imageData.args[0].split(/\\s+/).reverse().forEach(function(position, index) {\r\n            switch(position) {\r\n            case \"left\":\r\n                this.x0 = 0;\r\n                this.x1 = 1;\r\n                break;\r\n            case \"top\":\r\n                this.y0 = 0;\r\n                this.y1 = 1;\r\n                break;\r\n            case \"right\":\r\n                this.x0 = 1;\r\n                this.x1 = 0;\r\n                break;\r\n            case \"bottom\":\r\n                this.y0 = 1;\r\n                this.y1 = 0;\r\n                break;\r\n            case \"to\":\r\n                var y0 = this.y0;\r\n                var x0 = this.x0;\r\n                this.y0 = this.y1;\r\n                this.x0 = this.x1;\r\n                this.x1 = x0;\r\n                this.y1 = y0;\r\n                break;\r\n            case \"center\":\r\n                break; // centered by default\r\n            // Firefox internally converts position keywords to percentages:\r\n            // http://www.w3.org/TR/2010/WD-CSS2-20101207/colors.html#propdef-background-position\r\n            default: // percentage or absolute length\r\n                // TODO: support absolute start point positions (e.g., use bounds to convert px to a ratio)\r\n                var ratio = parseFloat(position, 10) * 1e-2;\r\n                if (isNaN(ratio)) { // invalid or unhandled value\r\n                    break;\r\n                }\r\n                if (index === 0) {\r\n                    this.y0 = ratio;\r\n                    this.y1 = 1 - this.y0;\r\n                } else {\r\n                    this.x0 = ratio;\r\n                    this.x1 = 1 - this.x0;\r\n                }\r\n                break;\r\n            }\r\n        }, this);\r\n    } else {\r\n        this.y0 = 0;\r\n        this.y1 = 1;\r\n    }\r\n\r\n    this.colorStops = imageData.args.slice(hasDirection ? 1 : 0).map(function(colorStop) {\r\n        var colorStopMatch = colorStop.match(GradientContainer.REGEXP_COLORSTOP);\r\n        var value = +colorStopMatch[2];\r\n        var unit = value === 0 ? \"%\" : colorStopMatch[3]; // treat \"0\" as \"0%\"\r\n        return {\r\n            color: new Color(colorStopMatch[1]),\r\n            // TODO: support absolute stop positions (e.g., compute gradient line length & convert px to ratio)\r\n            stop: unit === \"%\" ? value / 100 : null\r\n        };\r\n    });\r\n\r\n    if (this.colorStops[0].stop === null) {\r\n        this.colorStops[0].stop = 0;\r\n    }\r\n\r\n    if (this.colorStops[this.colorStops.length - 1].stop === null) {\r\n        this.colorStops[this.colorStops.length - 1].stop = 1;\r\n    }\r\n\r\n    // calculates and fills-in explicit stop positions when omitted from rule\r\n    this.colorStops.forEach(function(colorStop, index) {\r\n        if (colorStop.stop === null) {\r\n            this.colorStops.slice(index).some(function(find, count) {\r\n                if (find.stop !== null) {\r\n                    colorStop.stop = ((find.stop - this.colorStops[index - 1].stop) / (count + 1)) + this.colorStops[index - 1].stop;\r\n                    return true;\r\n                } else {\r\n                    return false;\r\n                }\r\n            }, this);\r\n        }\r\n    }, this);\r\n}\r\n\r\nLinearGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\n// TODO: support <angle> (e.g. -?\\d{1,3}(?:\\.\\d+)deg, etc. : https://developer.mozilla.org/docs/Web/CSS/angle )\r\nLinearGradientContainer.REGEXP_DIRECTION = /^\\s*(?:to|left|right|top|bottom|center|\\d{1,3}(?:\\.\\d+)?%?)(?:\\s|$)/i;\r\n\r\nmodule.exports = LinearGradientContainer;\r\n\r\n},{\"./color\":3,\"./gradientcontainer\":9}],13:[function(_dereq_,module,exports){\r\nvar logger = function() {\r\n    if (logger.options.logging && window.console && window.console.log) {\r\n        Function.prototype.bind.call(window.console.log, (window.console)).apply(window.console, [(Date.now() - logger.options.start) + \"ms\", \"html2canvas:\"].concat([].slice.call(arguments, 0)));\r\n    }\r\n};\r\n\r\nlogger.options = {logging: false};\r\nmodule.exports = logger;\r\n\r\n},{}],14:[function(_dereq_,module,exports){\r\nvar Color = _dereq_('./color');\r\nvar utils = _dereq_('./utils');\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeContainer(node, parent) {\r\n    this.node = node;\r\n    this.parent = parent;\r\n    this.stack = null;\r\n    this.bounds = null;\r\n    this.borders = null;\r\n    this.clip = [];\r\n    this.backgroundClip = [];\r\n    this.offsetBounds = null;\r\n    this.visible = null;\r\n    this.computedStyles = null;\r\n    this.colors = {};\r\n    this.styles = {};\r\n    this.backgroundImages = null;\r\n    this.transformData = null;\r\n    this.transformMatrix = null;\r\n    this.isPseudoElement = false;\r\n    this.opacity = null;\r\n}\r\n\r\nNodeContainer.prototype.cloneTo = function(stack) {\r\n    stack.visible = this.visible;\r\n    stack.borders = this.borders;\r\n    stack.bounds = this.bounds;\r\n    stack.clip = this.clip;\r\n    stack.backgroundClip = this.backgroundClip;\r\n    stack.computedStyles = this.computedStyles;\r\n    stack.styles = this.styles;\r\n    stack.backgroundImages = this.backgroundImages;\r\n    stack.opacity = this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.getOpacity = function() {\r\n    return this.opacity === null ? (this.opacity = this.cssFloat('opacity')) : this.opacity;\r\n};\r\n\r\nNodeContainer.prototype.assignStack = function(stack) {\r\n    this.stack = stack;\r\n    stack.children.push(this);\r\n};\r\n\r\nNodeContainer.prototype.isElementVisible = function() {\r\n    return this.node.nodeType === Node.TEXT_NODE ? this.parent.visible : (\r\n        this.css('display') !== \"none\" &&\r\n        this.css('visibility') !== \"hidden\" &&\r\n        !this.node.hasAttribute(\"data-html2canvas-ignore\") &&\r\n        (this.node.nodeName !== \"INPUT\" || this.node.getAttribute(\"type\") !== \"hidden\")\r\n    );\r\n};\r\n\r\nNodeContainer.prototype.css = function(attribute) {\r\n    if (!this.computedStyles) {\r\n        this.computedStyles = this.isPseudoElement ? this.parent.computedStyle(this.before ? \":before\" : \":after\") : this.computedStyle(null);\r\n    }\r\n\r\n    return this.styles[attribute] || (this.styles[attribute] = this.computedStyles[attribute]);\r\n};\r\n\r\nNodeContainer.prototype.prefixedCss = function(attribute) {\r\n    var prefixes = [\"webkit\", \"moz\", \"ms\", \"o\"];\r\n    var value = this.css(attribute);\r\n    if (value === undefined) {\r\n        prefixes.some(function(prefix) {\r\n            value = this.css(prefix + attribute.substr(0, 1).toUpperCase() + attribute.substr(1));\r\n            return value !== undefined;\r\n        }, this);\r\n    }\r\n    return value === undefined ? null : value;\r\n};\r\n\r\nNodeContainer.prototype.computedStyle = function(type) {\r\n    return this.node.ownerDocument.defaultView.getComputedStyle(this.node, type);\r\n};\r\n\r\nNodeContainer.prototype.cssInt = function(attribute) {\r\n    var value = parseInt(this.css(attribute), 10);\r\n    return (isNaN(value)) ? 0 : value; // borders in old IE are throwing 'medium' for demo.html\r\n};\r\n\r\nNodeContainer.prototype.color = function(attribute) {\r\n    return this.colors[attribute] || (this.colors[attribute] = new Color(this.css(attribute)));\r\n};\r\n\r\nNodeContainer.prototype.cssFloat = function(attribute) {\r\n    var value = parseFloat(this.css(attribute));\r\n    return (isNaN(value)) ? 0 : value;\r\n};\r\n\r\nNodeContainer.prototype.fontWeight = function() {\r\n    var weight = this.css(\"fontWeight\");\r\n    switch(parseInt(weight, 10)){\r\n    case 401:\r\n        weight = \"bold\";\r\n        break;\r\n    case 400:\r\n        weight = \"normal\";\r\n        break;\r\n    }\r\n    return weight;\r\n};\r\n\r\nNodeContainer.prototype.parseClip = function() {\r\n    var matches = this.css('clip').match(this.CLIP);\r\n    if (matches) {\r\n        return {\r\n            top: parseInt(matches[1], 10),\r\n            right: parseInt(matches[2], 10),\r\n            bottom: parseInt(matches[3], 10),\r\n            left: parseInt(matches[4], 10)\r\n        };\r\n    }\r\n    return null;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundImages = function() {\r\n    return this.backgroundImages || (this.backgroundImages = parseBackgrounds(this.css(\"backgroundImage\")));\r\n};\r\n\r\nNodeContainer.prototype.cssList = function(property, index) {\r\n    var value = (this.css(property) || '').split(',');\r\n    value = value[index || 0] || value[0] || 'auto';\r\n    value = value.trim().split(' ');\r\n    if (value.length === 1) {\r\n        value = [value[0], isPercentage(value[0]) ? 'auto' : value[0]];\r\n    }\r\n    return value;\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundSize = function(bounds, image, index) {\r\n    var size = this.cssList(\"backgroundSize\", index);\r\n    var width, height;\r\n\r\n    if (isPercentage(size[0])) {\r\n        width = bounds.width * parseFloat(size[0]) / 100;\r\n    } else if (/contain|cover/.test(size[0])) {\r\n        var targetRatio = bounds.width / bounds.height, currentRatio = image.width / image.height;\r\n        return (targetRatio < currentRatio ^ size[0] === 'contain') ?  {width: bounds.height * currentRatio, height: bounds.height} : {width: bounds.width, height: bounds.width / currentRatio};\r\n    } else {\r\n        width = parseInt(size[0], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto' && size[1] === 'auto') {\r\n        height = image.height;\r\n    } else if (size[1] === 'auto') {\r\n        height = width / image.width * image.height;\r\n    } else if (isPercentage(size[1])) {\r\n        height =  bounds.height * parseFloat(size[1]) / 100;\r\n    } else {\r\n        height = parseInt(size[1], 10);\r\n    }\r\n\r\n    if (size[0] === 'auto') {\r\n        width = height / image.height * image.width;\r\n    }\r\n\r\n    return {width: width, height: height};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundPosition = function(bounds, image, index, backgroundSize) {\r\n    var position = this.cssList('backgroundPosition', index);\r\n    var left, top;\r\n\r\n    if (isPercentage(position[0])){\r\n        left = (bounds.width - (backgroundSize || image).width) * (parseFloat(position[0]) / 100);\r\n    } else {\r\n        left = parseInt(position[0], 10);\r\n    }\r\n\r\n    if (position[1] === 'auto') {\r\n        top = left / image.width * image.height;\r\n    } else if (isPercentage(position[1])){\r\n        top =  (bounds.height - (backgroundSize || image).height) * parseFloat(position[1]) / 100;\r\n    } else {\r\n        top = parseInt(position[1], 10);\r\n    }\r\n\r\n    if (position[0] === 'auto') {\r\n        left = top / image.height * image.width;\r\n    }\r\n\r\n    return {left: left, top: top};\r\n};\r\n\r\nNodeContainer.prototype.parseBackgroundRepeat = function(index) {\r\n    return this.cssList(\"backgroundRepeat\", index)[0];\r\n};\r\n\r\nNodeContainer.prototype.parseTextShadows = function() {\r\n    var textShadow = this.css(\"textShadow\");\r\n    var results = [];\r\n\r\n    if (textShadow && textShadow !== 'none') {\r\n        var shadows = textShadow.match(this.TEXT_SHADOW_PROPERTY);\r\n        for (var i = 0; shadows && (i < shadows.length); i++) {\r\n            var s = shadows[i].match(this.TEXT_SHADOW_VALUES);\r\n            results.push({\r\n                color: new Color(s[0]),\r\n                offsetX: s[1] ? parseFloat(s[1].replace('px', '')) : 0,\r\n                offsetY: s[2] ? parseFloat(s[2].replace('px', '')) : 0,\r\n                blur: s[3] ? s[3].replace('px', '') : 0\r\n            });\r\n        }\r\n    }\r\n    return results;\r\n};\r\n\r\nNodeContainer.prototype.parseTransform = function() {\r\n    if (!this.transformData) {\r\n        if (this.hasTransform()) {\r\n            var offset = this.parseBounds();\r\n            var origin = this.prefixedCss(\"transformOrigin\").split(\" \").map(removePx).map(asFloat);\r\n            origin[0] += offset.left;\r\n            origin[1] += offset.top;\r\n            this.transformData = {\r\n                origin: origin,\r\n                matrix: this.parseTransformMatrix()\r\n            };\r\n        } else {\r\n            this.transformData = {\r\n                origin: [0, 0],\r\n                matrix: [1, 0, 0, 1, 0, 0]\r\n            };\r\n        }\r\n    }\r\n    return this.transformData;\r\n};\r\n\r\nNodeContainer.prototype.parseTransformMatrix = function() {\r\n    if (!this.transformMatrix) {\r\n        var transform = this.prefixedCss(\"transform\");\r\n        var matrix = transform ? parseMatrix(transform.match(this.MATRIX_PROPERTY)) : null;\r\n        this.transformMatrix = matrix ? matrix : [1, 0, 0, 1, 0, 0];\r\n    }\r\n    return this.transformMatrix;\r\n};\r\n\r\nNodeContainer.prototype.parseBounds = function() {\r\n    return this.bounds || (this.bounds = this.hasTransform() ? offsetBounds(this.node) : getBounds(this.node));\r\n};\r\n\r\nNodeContainer.prototype.hasTransform = function() {\r\n    return this.parseTransformMatrix().join(\",\") !== \"1,0,0,1,0,0\" || (this.parent && this.parent.hasTransform());\r\n};\r\n\r\nNodeContainer.prototype.getValue = function() {\r\n    var value = this.node.value || \"\";\r\n    if (this.node.tagName === \"SELECT\") {\r\n        value = selectionValue(this.node);\r\n    } else if (this.node.type === \"password\") {\r\n        value = Array(value.length + 1).join('\\u2022'); // jshint ignore:line\r\n    }\r\n    return value.length === 0 ? (this.node.placeholder || \"\") : value;\r\n};\r\n\r\nNodeContainer.prototype.MATRIX_PROPERTY = /(matrix|matrix3d)\\((.+)\\)/;\r\nNodeContainer.prototype.TEXT_SHADOW_PROPERTY = /((rgba|rgb)\\([^\\)]+\\)(\\s-?\\d+px){0,})/g;\r\nNodeContainer.prototype.TEXT_SHADOW_VALUES = /(-?\\d+px)|(#.+)|(rgb\\(.+\\))|(rgba\\(.+\\))/g;\r\nNodeContainer.prototype.CLIP = /^rect\\((\\d+)px,? (\\d+)px,? (\\d+)px,? (\\d+)px\\)$/;\r\n\r\nfunction selectionValue(node) {\r\n    var option = node.options[node.selectedIndex || 0];\r\n    return option ? (option.text || \"\") : \"\";\r\n}\r\n\r\nfunction parseMatrix(match) {\r\n    if (match && match[1] === \"matrix\") {\r\n        return match[2].split(\",\").map(function(s) {\r\n            return parseFloat(s.trim());\r\n        });\r\n    } else if (match && match[1] === \"matrix3d\") {\r\n        var matrix3d = match[2].split(\",\").map(function(s) {\r\n          return parseFloat(s.trim());\r\n        });\r\n        return [matrix3d[0], matrix3d[1], matrix3d[4], matrix3d[5], matrix3d[12], matrix3d[13]];\r\n    }\r\n}\r\n\r\nfunction isPercentage(value) {\r\n    return value.toString().indexOf(\"%\") !== -1;\r\n}\r\n\r\nfunction removePx(str) {\r\n    return str.replace(\"px\", \"\");\r\n}\r\n\r\nfunction asFloat(str) {\r\n    return parseFloat(str);\r\n}\r\n\r\nmodule.exports = NodeContainer;\r\n\r\n},{\"./color\":3,\"./utils\":26}],15:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\nvar punycode = _dereq_('punycode');\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\nvar TextContainer = _dereq_('./textcontainer');\r\nvar PseudoElementContainer = _dereq_('./pseudoelementcontainer');\r\nvar FontMetrics = _dereq_('./fontmetrics');\r\nvar Color = _dereq_('./color');\r\nvar StackingContext = _dereq_('./stackingcontext');\r\nvar utils = _dereq_('./utils');\r\nvar bind = utils.bind;\r\nvar getBounds = utils.getBounds;\r\nvar parseBackgrounds = utils.parseBackgrounds;\r\nvar offsetBounds = utils.offsetBounds;\r\n\r\nfunction NodeParser(element, renderer, support, imageLoader, options) {\r\n    log(\"Starting NodeParser\");\r\n    this.renderer = renderer;\r\n    this.options = options;\r\n    this.range = null;\r\n    this.support = support;\r\n    this.renderQueue = [];\r\n    this.stack = new StackingContext(true, 1, element.ownerDocument, null);\r\n    var parent = new NodeContainer(element, null);\r\n    if (options.background) {\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, new Color(options.background));\r\n    }\r\n    if (element === element.ownerDocument.documentElement) {\r\n        // http://www.w3.org/TR/css3-background/#special-backgrounds\r\n        var canvasBackground = new NodeContainer(parent.color('backgroundColor').isTransparent() ? element.ownerDocument.body : element.ownerDocument.documentElement, null);\r\n        renderer.rectangle(0, 0, renderer.width, renderer.height, canvasBackground.color('backgroundColor'));\r\n    }\r\n    parent.visibile = parent.isElementVisible();\r\n    this.createPseudoHideStyles(element.ownerDocument);\r\n    this.disableAnimations(element.ownerDocument);\r\n    this.nodes = flatten([parent].concat(this.getChildren(parent)).filter(function(container) {\r\n        return container.visible = container.isElementVisible();\r\n    }).map(this.getPseudoElements, this));\r\n    this.fontMetrics = new FontMetrics();\r\n    log(\"Fetched nodes, total:\", this.nodes.length);\r\n    log(\"Calculate overflow clips\");\r\n    this.calculateOverflowClips();\r\n    log(\"Start fetching images\");\r\n    this.images = imageLoader.fetch(this.nodes.filter(isElement));\r\n    this.ready = this.images.ready.then(bind(function() {\r\n        log(\"Images loaded, starting parsing\");\r\n        log(\"Creating stacking contexts\");\r\n        this.createStackingContexts();\r\n        log(\"Sorting stacking contexts\");\r\n        this.sortStackingContexts(this.stack);\r\n        this.parse(this.stack);\r\n        log(\"Render queue created with \" + this.renderQueue.length + \" items\");\r\n        return new Promise(bind(function(resolve) {\r\n            if (!options.async) {\r\n                this.renderQueue.forEach(this.paint, this);\r\n                resolve();\r\n            } else if (typeof(options.async) === \"function\") {\r\n                options.async.call(this, this.renderQueue, resolve);\r\n            } else if (this.renderQueue.length > 0){\r\n                this.renderIndex = 0;\r\n                this.asyncRenderer(this.renderQueue, resolve);\r\n            } else {\r\n                resolve();\r\n            }\r\n        }, this));\r\n    }, this));\r\n}\r\n\r\nNodeParser.prototype.calculateOverflowClips = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container)) {\r\n            if (isPseudoElement(container)) {\r\n                container.appendToDOM();\r\n            }\r\n            container.borders = this.parseBorders(container);\r\n            var clip = (container.css('overflow') === \"hidden\") ? [container.borders.clip] : [];\r\n            var cssClip = container.parseClip();\r\n            if (cssClip && [\"absolute\", \"fixed\"].indexOf(container.css('position')) !== -1) {\r\n                clip.push([[\"rect\",\r\n                        container.bounds.left + cssClip.left,\r\n                        container.bounds.top + cssClip.top,\r\n                        cssClip.right - cssClip.left,\r\n                        cssClip.bottom - cssClip.top\r\n                ]]);\r\n            }\r\n            container.clip = hasParentClip(container) ? container.parent.clip.concat(clip) : clip;\r\n            container.backgroundClip = (container.css('overflow') !== \"hidden\") ? container.clip.concat([container.borders.clip]) : container.clip;\r\n            if (isPseudoElement(container)) {\r\n                container.cleanDOM();\r\n            }\r\n        } else if (isTextNode(container)) {\r\n            container.clip = hasParentClip(container) ? container.parent.clip : [];\r\n        }\r\n        if (!isPseudoElement(container)) {\r\n            container.bounds = null;\r\n        }\r\n    }, this);\r\n};\r\n\r\nfunction hasParentClip(container) {\r\n    return container.parent && container.parent.clip.length;\r\n}\r\n\r\nNodeParser.prototype.asyncRenderer = function(queue, resolve, asyncTimer) {\r\n    asyncTimer = asyncTimer || Date.now();\r\n    this.paint(queue[this.renderIndex++]);\r\n    if (queue.length === this.renderIndex) {\r\n        resolve();\r\n    } else if (asyncTimer + 20 > Date.now()) {\r\n        this.asyncRenderer(queue, resolve, asyncTimer);\r\n    } else {\r\n        setTimeout(bind(function() {\r\n            this.asyncRenderer(queue, resolve);\r\n        }, this), 0);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.createPseudoHideStyles = function(document) {\r\n    this.createStyles(document, '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + ':before { content: \"\" !important; display: none !important; }' +\r\n        '.' + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER + ':after { content: \"\" !important; display: none !important; }');\r\n};\r\n\r\nNodeParser.prototype.disableAnimations = function(document) {\r\n    this.createStyles(document, '* { -webkit-animation: none !important; -moz-animation: none !important; -o-animation: none !important; animation: none !important; ' +\r\n        '-webkit-transition: none !important; -moz-transition: none !important; -o-transition: none !important; transition: none !important;}');\r\n};\r\n\r\nNodeParser.prototype.createStyles = function(document, styles) {\r\n    var hidePseudoElements = document.createElement('style');\r\n    hidePseudoElements.innerHTML = styles;\r\n    document.body.appendChild(hidePseudoElements);\r\n};\r\n\r\nNodeParser.prototype.getPseudoElements = function(container) {\r\n    var nodes = [[container]];\r\n    if (container.node.nodeType === Node.ELEMENT_NODE) {\r\n        var before = this.getPseudoElement(container, \":before\");\r\n        var after = this.getPseudoElement(container, \":after\");\r\n\r\n        if (before) {\r\n            nodes.push(before);\r\n        }\r\n\r\n        if (after) {\r\n            nodes.push(after);\r\n        }\r\n    }\r\n    return flatten(nodes);\r\n};\r\n\r\nfunction toCamelCase(str) {\r\n    return str.replace(/(\\-[a-z])/g, function(match){\r\n        return match.toUpperCase().replace('-','');\r\n    });\r\n}\r\n\r\nNodeParser.prototype.getPseudoElement = function(container, type) {\r\n    var style = container.computedStyle(type);\r\n    if(!style || !style.content || style.content === \"none\" || style.content === \"-moz-alt-content\" || style.display === \"none\") {\r\n        return null;\r\n    }\r\n\r\n    var content = stripQuotes(style.content);\r\n    var isImage = content.substr(0, 3) === 'url';\r\n    var pseudoNode = document.createElement(isImage ? 'img' : 'html2canvaspseudoelement');\r\n    var pseudoContainer = new PseudoElementContainer(pseudoNode, container, type);\r\n\r\n    for (var i = style.length-1; i >= 0; i--) {\r\n        var property = toCamelCase(style.item(i));\r\n        pseudoNode.style[property] = style[property];\r\n    }\r\n\r\n    pseudoNode.className = PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE + \" \" + PseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER;\r\n\r\n    if (isImage) {\r\n        pseudoNode.src = parseBackgrounds(content)[0].args[0];\r\n        return [pseudoContainer];\r\n    } else {\r\n        var text = document.createTextNode(content);\r\n        pseudoNode.appendChild(text);\r\n        return [pseudoContainer, new TextContainer(text, pseudoContainer)];\r\n    }\r\n};\r\n\r\n\r\nNodeParser.prototype.getChildren = function(parentContainer) {\r\n    return flatten([].filter.call(parentContainer.node.childNodes, renderableNode).map(function(node) {\r\n        var container = [node.nodeType === Node.TEXT_NODE ? new TextContainer(node, parentContainer) : new NodeContainer(node, parentContainer)].filter(nonIgnoredElement);\r\n        return node.nodeType === Node.ELEMENT_NODE && container.length && node.tagName !== \"TEXTAREA\" ? (container[0].isElementVisible() ? container.concat(this.getChildren(container[0])) : []) : container;\r\n    }, this));\r\n};\r\n\r\nNodeParser.prototype.newStackingContext = function(container, hasOwnStacking) {\r\n    var stack = new StackingContext(hasOwnStacking, container.getOpacity(), container.node, container.parent);\r\n    container.cloneTo(stack);\r\n    var parentStack = hasOwnStacking ? stack.getParentStack(this) : stack.parent.stack;\r\n    parentStack.contexts.push(stack);\r\n    container.stack = stack;\r\n};\r\n\r\nNodeParser.prototype.createStackingContexts = function() {\r\n    this.nodes.forEach(function(container) {\r\n        if (isElement(container) && (this.isRootElement(container) || hasOpacity(container) || isPositionedForStacking(container) || this.isBodyWithTransparentRoot(container) || container.hasTransform())) {\r\n            this.newStackingContext(container, true);\r\n        } else if (isElement(container) && ((isPositioned(container) && zIndex0(container)) || isInlineBlock(container) || isFloating(container))) {\r\n            this.newStackingContext(container, false);\r\n        } else {\r\n            container.assignStack(container.parent.stack);\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.isBodyWithTransparentRoot = function(container) {\r\n    return container.node.nodeName === \"BODY\" && container.parent.color('backgroundColor').isTransparent();\r\n};\r\n\r\nNodeParser.prototype.isRootElement = function(container) {\r\n    return container.parent === null;\r\n};\r\n\r\nNodeParser.prototype.sortStackingContexts = function(stack) {\r\n    stack.contexts.sort(zIndexSort(stack.contexts.slice(0)));\r\n    stack.contexts.forEach(this.sortStackingContexts, this);\r\n};\r\n\r\nNodeParser.prototype.parseTextBounds = function(container) {\r\n    return function(text, index, textList) {\r\n        if (container.parent.css(\"textDecoration\").substr(0, 4) !== \"none\" || text.trim().length !== 0) {\r\n            if (this.support.rangeBounds && !container.parent.hasTransform()) {\r\n                var offset = textList.slice(0, index).join(\"\").length;\r\n                return this.getRangeBounds(container.node, offset, text.length);\r\n            } else if (container.node && typeof(container.node.data) === \"string\") {\r\n                var replacementNode = container.node.splitText(text.length);\r\n                var bounds = this.getWrapperBounds(container.node, container.parent.hasTransform());\r\n                container.node = replacementNode;\r\n                return bounds;\r\n            }\r\n        } else if(!this.support.rangeBounds || container.parent.hasTransform()){\r\n            container.node = container.node.splitText(text.length);\r\n        }\r\n        return {};\r\n    };\r\n};\r\n\r\nNodeParser.prototype.getWrapperBounds = function(node, transform) {\r\n    var wrapper = node.ownerDocument.createElement('html2canvaswrapper');\r\n    var parent = node.parentNode,\r\n        backupText = node.cloneNode(true);\r\n\r\n    wrapper.appendChild(node.cloneNode(true));\r\n    parent.replaceChild(wrapper, node);\r\n    var bounds = transform ? offsetBounds(wrapper) : getBounds(wrapper);\r\n    parent.replaceChild(backupText, wrapper);\r\n    return bounds;\r\n};\r\n\r\nNodeParser.prototype.getRangeBounds = function(node, offset, length) {\r\n    var range = this.range || (this.range = node.ownerDocument.createRange());\r\n    range.setStart(node, offset);\r\n    range.setEnd(node, offset + length);\r\n    return range.getBoundingClientRect();\r\n};\r\n\r\nfunction ClearTransform() {}\r\n\r\nNodeParser.prototype.parse = function(stack) {\r\n    // http://www.w3.org/TR/CSS21/visuren.html#z-index\r\n    var negativeZindex = stack.contexts.filter(negativeZIndex); // 2. the child stacking contexts with negative stack levels (most negative first).\r\n    var descendantElements = stack.children.filter(isElement);\r\n    var descendantNonFloats = descendantElements.filter(not(isFloating));\r\n    var nonInlineNonPositionedDescendants = descendantNonFloats.filter(not(isPositioned)).filter(not(inlineLevel)); // 3 the in-flow, non-inline-level, non-positioned descendants.\r\n    var nonPositionedFloats = descendantElements.filter(not(isPositioned)).filter(isFloating); // 4. the non-positioned floats.\r\n    var inFlow = descendantNonFloats.filter(not(isPositioned)).filter(inlineLevel); // 5. the in-flow, inline-level, non-positioned descendants, including inline tables and inline blocks.\r\n    var stackLevel0 = stack.contexts.concat(descendantNonFloats.filter(isPositioned)).filter(zIndex0); // 6. the child stacking contexts with stack level 0 and the positioned descendants with stack level 0.\r\n    var text = stack.children.filter(isTextNode).filter(hasText);\r\n    var positiveZindex = stack.contexts.filter(positiveZIndex); // 7. the child stacking contexts with positive stack levels (least positive first).\r\n    negativeZindex.concat(nonInlineNonPositionedDescendants).concat(nonPositionedFloats)\r\n        .concat(inFlow).concat(stackLevel0).concat(text).concat(positiveZindex).forEach(function(container) {\r\n            this.renderQueue.push(container);\r\n            if (isStackingContext(container)) {\r\n                this.parse(container);\r\n                this.renderQueue.push(new ClearTransform());\r\n            }\r\n        }, this);\r\n};\r\n\r\nNodeParser.prototype.paint = function(container) {\r\n    try {\r\n        if (container instanceof ClearTransform) {\r\n            this.renderer.ctx.restore();\r\n        } else if (isTextNode(container)) {\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.appendToDOM();\r\n            }\r\n            this.paintText(container);\r\n            if (isPseudoElement(container.parent)) {\r\n                container.parent.cleanDOM();\r\n            }\r\n        } else {\r\n            this.paintNode(container);\r\n        }\r\n    } catch(e) {\r\n        log(e);\r\n        if (this.options.strict) {\r\n            throw e;\r\n        }\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintNode = function(container) {\r\n    if (isStackingContext(container)) {\r\n        this.renderer.setOpacity(container.opacity);\r\n        this.renderer.ctx.save();\r\n        if (container.hasTransform()) {\r\n            this.renderer.setTransform(container.parseTransform());\r\n        }\r\n    }\r\n\r\n    if (container.node.nodeName === \"INPUT\" && container.node.type === \"checkbox\") {\r\n        this.paintCheckbox(container);\r\n    } else if (container.node.nodeName === \"INPUT\" && container.node.type === \"radio\") {\r\n        this.paintRadio(container);\r\n    } else {\r\n        this.paintElement(container);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintElement = function(container) {\r\n    var bounds = container.parseBounds();\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.renderBackground(container, bounds, container.borders.borders.map(getWidth));\r\n    }, this);\r\n\r\n    this.renderer.clip(container.clip, function() {\r\n        this.renderer.renderBorders(container.borders.borders);\r\n    }, this);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        switch (container.node.nodeName) {\r\n        case \"svg\":\r\n        case \"IFRAME\":\r\n            var imgContainer = this.images.get(container.node);\r\n            if (imgContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imgContainer);\r\n            } else {\r\n                log(\"Error loading <\" + container.node.nodeName + \">\", container.node);\r\n            }\r\n            break;\r\n        case \"IMG\":\r\n            var imageContainer = this.images.get(container.node.src);\r\n            if (imageContainer) {\r\n                this.renderer.renderImage(container, bounds, container.borders, imageContainer);\r\n            } else {\r\n                log(\"Error loading <img>\", container.node.src);\r\n            }\r\n            break;\r\n        case \"CANVAS\":\r\n            this.renderer.renderImage(container, bounds, container.borders, {image: container.node});\r\n            break;\r\n        case \"SELECT\":\r\n        case \"INPUT\":\r\n        case \"TEXTAREA\":\r\n            this.paintFormValue(container);\r\n            break;\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintCheckbox = function(container) {\r\n    var b = container.parseBounds();\r\n\r\n    var size = Math.min(b.width, b.height);\r\n    var bounds = {width: size - 1, height: size - 1, top: b.top, left: b.left};\r\n    var r = [3, 3];\r\n    var radius = [r, r, r, r];\r\n    var borders = [1,1,1,1].map(function(w) {\r\n        return {color: new Color('#A5A5A5'), width: w};\r\n    });\r\n\r\n    var borderPoints = calculateCurvePoints(bounds, radius, borders);\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.rectangle(bounds.left + 1, bounds.top + 1, bounds.width - 2, bounds.height - 2, new Color(\"#DEDEDE\"));\r\n        this.renderer.renderBorders(calculateBorders(borders, bounds, borderPoints, radius));\r\n        if (container.node.checked) {\r\n            this.renderer.font(new Color('#424242'), 'normal', 'normal', 'bold', (size - 3) + \"px\", 'arial');\r\n            this.renderer.text(\"\\u2714\", bounds.left + size / 6, bounds.top + size - 1);\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintRadio = function(container) {\r\n    var bounds = container.parseBounds();\r\n\r\n    var size = Math.min(bounds.width, bounds.height) - 2;\r\n\r\n    this.renderer.clip(container.backgroundClip, function() {\r\n        this.renderer.circleStroke(bounds.left + 1, bounds.top + 1, size, new Color('#DEDEDE'), 1, new Color('#A5A5A5'));\r\n        if (container.node.checked) {\r\n            this.renderer.circle(Math.ceil(bounds.left + size / 4) + 1, Math.ceil(bounds.top + size / 4) + 1, Math.floor(size / 2), new Color('#424242'));\r\n        }\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.paintFormValue = function(container) {\r\n    var value = container.getValue();\r\n    if (value.length > 0) {\r\n        var document = container.node.ownerDocument;\r\n        var wrapper = document.createElement('html2canvaswrapper');\r\n        var properties = ['lineHeight', 'textAlign', 'fontFamily', 'fontWeight', 'fontSize', 'color',\r\n            'paddingLeft', 'paddingTop', 'paddingRight', 'paddingBottom',\r\n            'width', 'height', 'borderLeftStyle', 'borderTopStyle', 'borderLeftWidth', 'borderTopWidth',\r\n            'boxSizing', 'whiteSpace', 'wordWrap'];\r\n\r\n        properties.forEach(function(property) {\r\n            try {\r\n                wrapper.style[property] = container.css(property);\r\n            } catch(e) {\r\n                // Older IE has issues with \"border\"\r\n                log(\"html2canvas: Parse: Exception caught in renderFormValue: \" + e.message);\r\n            }\r\n        });\r\n        var bounds = container.parseBounds();\r\n        wrapper.style.position = \"fixed\";\r\n        wrapper.style.left = bounds.left + \"px\";\r\n        wrapper.style.top = bounds.top + \"px\";\r\n        wrapper.textContent = value;\r\n        document.body.appendChild(wrapper);\r\n        this.paintText(new TextContainer(wrapper.firstChild, container));\r\n        document.body.removeChild(wrapper);\r\n    }\r\n};\r\n\r\nNodeParser.prototype.paintText = function(container) {\r\n    container.applyTextTransform();\r\n    var characters = punycode.ucs2.decode(container.node.data);\r\n    var textList = (!this.options.letterRendering || noLetterSpacing(container)) && !hasUnicode(container.node.data) ? getWords(characters) : characters.map(function(character) {\r\n        return punycode.ucs2.encode([character]);\r\n    });\r\n\r\n    var weight = container.parent.fontWeight();\r\n    var size = container.parent.css('fontSize');\r\n    var family = container.parent.css('fontFamily');\r\n    var shadows = container.parent.parseTextShadows();\r\n\r\n    this.renderer.font(container.parent.color('color'), container.parent.css('fontStyle'), container.parent.css('fontVariant'), weight, size, family);\r\n    if (shadows.length) {\r\n        // TODO: support multiple text shadows\r\n        this.renderer.fontShadow(shadows[0].color, shadows[0].offsetX, shadows[0].offsetY, shadows[0].blur);\r\n    } else {\r\n        this.renderer.clearShadow();\r\n    }\r\n\r\n    this.renderer.clip(container.parent.clip, function() {\r\n        textList.map(this.parseTextBounds(container), this).forEach(function(bounds, index) {\r\n            if (bounds) {\r\n                this.renderer.text(textList[index], bounds.left, bounds.bottom);\r\n                this.renderTextDecoration(container.parent, bounds, this.fontMetrics.getMetrics(family, size));\r\n            }\r\n        }, this);\r\n    }, this);\r\n};\r\n\r\nNodeParser.prototype.renderTextDecoration = function(container, bounds, metrics) {\r\n    switch(container.css(\"textDecoration\").split(\" \")[0]) {\r\n    case \"underline\":\r\n        // Draws a line at the baseline of the font\r\n        // TODO As some browsers display the line as more than 1px if the font-size is big, need to take that into account both in position and size\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top + metrics.baseline + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"overline\":\r\n        this.renderer.rectangle(bounds.left, Math.round(bounds.top), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    case \"line-through\":\r\n        // TODO try and find exact position for line-through\r\n        this.renderer.rectangle(bounds.left, Math.ceil(bounds.top + metrics.middle + metrics.lineWidth), bounds.width, 1, container.color(\"color\"));\r\n        break;\r\n    }\r\n};\r\n\r\nvar borderColorTransforms = {\r\n    inset: [\r\n        [\"darken\", 0.60],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.10],\r\n        [\"darken\", 0.60]\r\n    ]\r\n};\r\n\r\nNodeParser.prototype.parseBorders = function(container) {\r\n    var nodeBounds = container.parseBounds();\r\n    var radius = getBorderRadiusData(container);\r\n    var borders = [\"Top\", \"Right\", \"Bottom\", \"Left\"].map(function(side, index) {\r\n        var style = container.css('border' + side + 'Style');\r\n        var color = container.color('border' + side + 'Color');\r\n        if (style === \"inset\" && color.isBlack()) {\r\n            color = new Color([255, 255, 255, color.a]); // this is wrong, but\r\n        }\r\n        var colorTransform = borderColorTransforms[style] ? borderColorTransforms[style][index] : null;\r\n        return {\r\n            width: container.cssInt('border' + side + 'Width'),\r\n            color: colorTransform ? color[colorTransform[0]](colorTransform[1]) : color,\r\n            args: null\r\n        };\r\n    });\r\n    var borderPoints = calculateCurvePoints(nodeBounds, radius, borders);\r\n\r\n    return {\r\n        clip: this.parseBackgroundClip(container, borderPoints, borders, radius, nodeBounds),\r\n        borders: calculateBorders(borders, nodeBounds, borderPoints, radius)\r\n    };\r\n};\r\n\r\nfunction calculateBorders(borders, nodeBounds, borderPoints, radius) {\r\n    return borders.map(function(border, borderSide) {\r\n        if (border.width > 0) {\r\n            var bx = nodeBounds.left;\r\n            var by = nodeBounds.top;\r\n            var bw = nodeBounds.width;\r\n            var bh = nodeBounds.height - (borders[2].width);\r\n\r\n            switch(borderSide) {\r\n            case 0:\r\n                // top border\r\n                bh = borders[0].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by],\r\n                        c2: [bx + bw, by],\r\n                        c3: [bx + bw - borders[1].width, by + bh],\r\n                        c4: [bx + borders[3].width, by + bh]\r\n                    }, radius[0], radius[1],\r\n                    borderPoints.topLeftOuter, borderPoints.topLeftInner, borderPoints.topRightOuter, borderPoints.topRightInner);\r\n                break;\r\n            case 1:\r\n                // right border\r\n                bx = nodeBounds.left + nodeBounds.width - (borders[1].width);\r\n                bw = borders[1].width;\r\n\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by],\r\n                        c2: [bx + bw, by + bh + borders[2].width],\r\n                        c3: [bx, by + bh],\r\n                        c4: [bx, by + borders[0].width]\r\n                    }, radius[1], radius[2],\r\n                    borderPoints.topRightOuter, borderPoints.topRightInner, borderPoints.bottomRightOuter, borderPoints.bottomRightInner);\r\n                break;\r\n            case 2:\r\n                // bottom border\r\n                by = (by + nodeBounds.height) - (borders[2].width);\r\n                bh = borders[2].width;\r\n                border.args = drawSide({\r\n                        c1: [bx + bw, by + bh],\r\n                        c2: [bx, by + bh],\r\n                        c3: [bx + borders[3].width, by],\r\n                        c4: [bx + bw - borders[3].width, by]\r\n                    }, radius[2], radius[3],\r\n                    borderPoints.bottomRightOuter, borderPoints.bottomRightInner, borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner);\r\n                break;\r\n            case 3:\r\n                // left border\r\n                bw = borders[3].width;\r\n                border.args = drawSide({\r\n                        c1: [bx, by + bh + borders[2].width],\r\n                        c2: [bx, by],\r\n                        c3: [bx + bw, by + borders[0].width],\r\n                        c4: [bx + bw, by + bh]\r\n                    }, radius[3], radius[0],\r\n                    borderPoints.bottomLeftOuter, borderPoints.bottomLeftInner, borderPoints.topLeftOuter, borderPoints.topLeftInner);\r\n                break;\r\n            }\r\n        }\r\n        return border;\r\n    });\r\n}\r\n\r\nNodeParser.prototype.parseBackgroundClip = function(container, borderPoints, borders, radius, bounds) {\r\n    var backgroundClip = container.css('backgroundClip'),\r\n        borderArgs = [];\r\n\r\n    switch(backgroundClip) {\r\n    case \"content-box\":\r\n    case \"padding-box\":\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftInner, borderPoints.topRightInner, bounds.left + borders[3].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightInner, borderPoints.bottomRightInner, bounds.left + bounds.width - borders[1].width, bounds.top + borders[0].width);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightInner, borderPoints.bottomLeftInner, bounds.left + bounds.width - borders[1].width, bounds.top + bounds.height - borders[2].width);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftInner, borderPoints.topLeftInner, bounds.left + borders[3].width, bounds.top + bounds.height - borders[2].width);\r\n        break;\r\n\r\n    default:\r\n        parseCorner(borderArgs, radius[0], radius[1], borderPoints.topLeftOuter, borderPoints.topRightOuter, bounds.left, bounds.top);\r\n        parseCorner(borderArgs, radius[1], radius[2], borderPoints.topRightOuter, borderPoints.bottomRightOuter, bounds.left + bounds.width, bounds.top);\r\n        parseCorner(borderArgs, radius[2], radius[3], borderPoints.bottomRightOuter, borderPoints.bottomLeftOuter, bounds.left + bounds.width, bounds.top + bounds.height);\r\n        parseCorner(borderArgs, radius[3], radius[0], borderPoints.bottomLeftOuter, borderPoints.topLeftOuter, bounds.left, bounds.top + bounds.height);\r\n        break;\r\n    }\r\n\r\n    return borderArgs;\r\n};\r\n\r\nfunction getCurvePoints(x, y, r1, r2) {\r\n    var kappa = 4 * ((Math.sqrt(2) - 1) / 3);\r\n    var ox = (r1) * kappa, // control point offset horizontal\r\n        oy = (r2) * kappa, // control point offset vertical\r\n        xm = x + r1, // x-middle\r\n        ym = y + r2; // y-middle\r\n    return {\r\n        topLeft: bezierCurve({x: x, y: ym}, {x: x, y: ym - oy}, {x: xm - ox, y: y}, {x: xm, y: y}),\r\n        topRight: bezierCurve({x: x, y: y}, {x: x + ox,y: y}, {x: xm, y: ym - oy}, {x: xm, y: ym}),\r\n        bottomRight: bezierCurve({x: xm, y: y}, {x: xm, y: y + oy}, {x: x + ox, y: ym}, {x: x, y: ym}),\r\n        bottomLeft: bezierCurve({x: xm, y: ym}, {x: xm - ox, y: ym}, {x: x, y: y + oy}, {x: x, y:y})\r\n    };\r\n}\r\n\r\nfunction calculateCurvePoints(bounds, borderRadius, borders) {\r\n    var x = bounds.left,\r\n        y = bounds.top,\r\n        width = bounds.width,\r\n        height = bounds.height,\r\n\r\n        tlh = borderRadius[0][0] < width / 2 ? borderRadius[0][0] : width / 2,\r\n        tlv = borderRadius[0][1] < height / 2 ? borderRadius[0][1] : height / 2,\r\n        trh = borderRadius[1][0] < width / 2 ? borderRadius[1][0] : width / 2,\r\n        trv = borderRadius[1][1] < height / 2 ? borderRadius[1][1] : height / 2,\r\n        brh = borderRadius[2][0] < width / 2 ? borderRadius[2][0] : width / 2,\r\n        brv = borderRadius[2][1] < height / 2 ? borderRadius[2][1] : height / 2,\r\n        blh = borderRadius[3][0] < width / 2 ? borderRadius[3][0] : width / 2,\r\n        blv = borderRadius[3][1] < height / 2 ? borderRadius[3][1] : height / 2;\r\n\r\n    var topWidth = width - trh,\r\n        rightHeight = height - brv,\r\n        bottomWidth = width - brh,\r\n        leftHeight = height - blv;\r\n\r\n    return {\r\n        topLeftOuter: getCurvePoints(x, y, tlh, tlv).topLeft.subdivide(0.5),\r\n        topLeftInner: getCurvePoints(x + borders[3].width, y + borders[0].width, Math.max(0, tlh - borders[3].width), Math.max(0, tlv - borders[0].width)).topLeft.subdivide(0.5),\r\n        topRightOuter: getCurvePoints(x + topWidth, y, trh, trv).topRight.subdivide(0.5),\r\n        topRightInner: getCurvePoints(x + Math.min(topWidth, width + borders[3].width), y + borders[0].width, (topWidth > width + borders[3].width) ? 0 :trh - borders[3].width, trv - borders[0].width).topRight.subdivide(0.5),\r\n        bottomRightOuter: getCurvePoints(x + bottomWidth, y + rightHeight, brh, brv).bottomRight.subdivide(0.5),\r\n        bottomRightInner: getCurvePoints(x + Math.min(bottomWidth, width - borders[3].width), y + Math.min(rightHeight, height + borders[0].width), Math.max(0, brh - borders[1].width),  brv - borders[2].width).bottomRight.subdivide(0.5),\r\n        bottomLeftOuter: getCurvePoints(x, y + leftHeight, blh, blv).bottomLeft.subdivide(0.5),\r\n        bottomLeftInner: getCurvePoints(x + borders[3].width, y + leftHeight, Math.max(0, blh - borders[3].width), blv - borders[2].width).bottomLeft.subdivide(0.5)\r\n    };\r\n}\r\n\r\nfunction bezierCurve(start, startControl, endControl, end) {\r\n    var lerp = function (a, b, t) {\r\n        return {\r\n            x: a.x + (b.x - a.x) * t,\r\n            y: a.y + (b.y - a.y) * t\r\n        };\r\n    };\r\n\r\n    return {\r\n        start: start,\r\n        startControl: startControl,\r\n        endControl: endControl,\r\n        end: end,\r\n        subdivide: function(t) {\r\n            var ab = lerp(start, startControl, t),\r\n                bc = lerp(startControl, endControl, t),\r\n                cd = lerp(endControl, end, t),\r\n                abbc = lerp(ab, bc, t),\r\n                bccd = lerp(bc, cd, t),\r\n                dest = lerp(abbc, bccd, t);\r\n            return [bezierCurve(start, ab, abbc, dest), bezierCurve(dest, bccd, cd, end)];\r\n        },\r\n        curveTo: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", startControl.x, startControl.y, endControl.x, endControl.y, end.x, end.y]);\r\n        },\r\n        curveToReversed: function(borderArgs) {\r\n            borderArgs.push([\"bezierCurve\", endControl.x, endControl.y, startControl.x, startControl.y, start.x, start.y]);\r\n        }\r\n    };\r\n}\r\n\r\nfunction drawSide(borderData, radius1, radius2, outer1, inner1, outer2, inner2) {\r\n    var borderArgs = [];\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", outer1[1].start.x, outer1[1].start.y]);\r\n        outer1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([ \"line\", borderData.c1[0], borderData.c1[1]]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", outer2[0].start.x, outer2[0].start.y]);\r\n        outer2[0].curveTo(borderArgs);\r\n        borderArgs.push([\"line\", inner2[0].end.x, inner2[0].end.y]);\r\n        inner2[0].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c2[0], borderData.c2[1]]);\r\n        borderArgs.push([\"line\", borderData.c3[0], borderData.c3[1]]);\r\n    }\r\n\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", inner1[1].end.x, inner1[1].end.y]);\r\n        inner1[1].curveToReversed(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", borderData.c4[0], borderData.c4[1]]);\r\n    }\r\n\r\n    return borderArgs;\r\n}\r\n\r\nfunction parseCorner(borderArgs, radius1, radius2, corner1, corner2, x, y) {\r\n    if (radius1[0] > 0 || radius1[1] > 0) {\r\n        borderArgs.push([\"line\", corner1[0].start.x, corner1[0].start.y]);\r\n        corner1[0].curveTo(borderArgs);\r\n        corner1[1].curveTo(borderArgs);\r\n    } else {\r\n        borderArgs.push([\"line\", x, y]);\r\n    }\r\n\r\n    if (radius2[0] > 0 || radius2[1] > 0) {\r\n        borderArgs.push([\"line\", corner2[0].start.x, corner2[0].start.y]);\r\n    }\r\n}\r\n\r\nfunction negativeZIndex(container) {\r\n    return container.cssInt(\"zIndex\") < 0;\r\n}\r\n\r\nfunction positiveZIndex(container) {\r\n    return container.cssInt(\"zIndex\") > 0;\r\n}\r\n\r\nfunction zIndex0(container) {\r\n    return container.cssInt(\"zIndex\") === 0;\r\n}\r\n\r\nfunction inlineLevel(container) {\r\n    return [\"inline\", \"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction isStackingContext(container) {\r\n    return (container instanceof StackingContext);\r\n}\r\n\r\nfunction hasText(container) {\r\n    return container.node.data.trim().length > 0;\r\n}\r\n\r\nfunction noLetterSpacing(container) {\r\n    return (/^(normal|none|0px)$/.test(container.parent.css(\"letterSpacing\")));\r\n}\r\n\r\nfunction getBorderRadiusData(container) {\r\n    return [\"TopLeft\", \"TopRight\", \"BottomRight\", \"BottomLeft\"].map(function(side) {\r\n        var value = container.css('border' + side + 'Radius');\r\n        var arr = value.split(\" \");\r\n        if (arr.length <= 1) {\r\n            arr[1] = arr[0];\r\n        }\r\n        return arr.map(asInt);\r\n    });\r\n}\r\n\r\nfunction renderableNode(node) {\r\n    return (node.nodeType === Node.TEXT_NODE || node.nodeType === Node.ELEMENT_NODE);\r\n}\r\n\r\nfunction isPositionedForStacking(container) {\r\n    var position = container.css(\"position\");\r\n    var zIndex = ([\"absolute\", \"relative\", \"fixed\"].indexOf(position) !== -1) ? container.css(\"zIndex\") : \"auto\";\r\n    return zIndex !== \"auto\";\r\n}\r\n\r\nfunction isPositioned(container) {\r\n    return container.css(\"position\") !== \"static\";\r\n}\r\n\r\nfunction isFloating(container) {\r\n    return container.css(\"float\") !== \"none\";\r\n}\r\n\r\nfunction isInlineBlock(container) {\r\n    return [\"inline-block\", \"inline-table\"].indexOf(container.css(\"display\")) !== -1;\r\n}\r\n\r\nfunction not(callback) {\r\n    var context = this;\r\n    return function() {\r\n        return !callback.apply(context, arguments);\r\n    };\r\n}\r\n\r\nfunction isElement(container) {\r\n    return container.node.nodeType === Node.ELEMENT_NODE;\r\n}\r\n\r\nfunction isPseudoElement(container) {\r\n    return container.isPseudoElement === true;\r\n}\r\n\r\nfunction isTextNode(container) {\r\n    return container.node.nodeType === Node.TEXT_NODE;\r\n}\r\n\r\nfunction zIndexSort(contexts) {\r\n    return function(a, b) {\r\n        return (a.cssInt(\"zIndex\") + (contexts.indexOf(a) / contexts.length)) - (b.cssInt(\"zIndex\") + (contexts.indexOf(b) / contexts.length));\r\n    };\r\n}\r\n\r\nfunction hasOpacity(container) {\r\n    return container.getOpacity() < 1;\r\n}\r\n\r\nfunction asInt(value) {\r\n    return parseInt(value, 10);\r\n}\r\n\r\nfunction getWidth(border) {\r\n    return border.width;\r\n}\r\n\r\nfunction nonIgnoredElement(nodeContainer) {\r\n    return (nodeContainer.node.nodeType !== Node.ELEMENT_NODE || [\"SCRIPT\", \"HEAD\", \"TITLE\", \"OBJECT\", \"BR\", \"OPTION\"].indexOf(nodeContainer.node.nodeName) === -1);\r\n}\r\n\r\nfunction flatten(arrays) {\r\n    return [].concat.apply([], arrays);\r\n}\r\n\r\nfunction stripQuotes(content) {\r\n    var first = content.substr(0, 1);\r\n    return (first === content.substr(content.length - 1) && first.match(/'|\"/)) ? content.substr(1, content.length - 2) : content;\r\n}\r\n\r\nfunction getWords(characters) {\r\n    var words = [], i = 0, onWordBoundary = false, word;\r\n    while(characters.length) {\r\n        if (isWordBoundary(characters[i]) === onWordBoundary) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n            onWordBoundary =! onWordBoundary;\r\n            i = 0;\r\n        } else {\r\n            i++;\r\n        }\r\n\r\n        if (i >= characters.length) {\r\n            word = characters.splice(0, i);\r\n            if (word.length) {\r\n                words.push(punycode.ucs2.encode(word));\r\n            }\r\n        }\r\n    }\r\n    return words;\r\n}\r\n\r\nfunction isWordBoundary(characterCode) {\r\n    return [\r\n        32, // <space>\r\n        13, // \\r\r\n        10, // \\n\r\n        9, // \\t\r\n        45 // -\r\n    ].indexOf(characterCode) !== -1;\r\n}\r\n\r\nfunction hasUnicode(string) {\r\n    return (/[^\\u0000-\\u00ff]/).test(string);\r\n}\r\n\r\nmodule.exports = NodeParser;\r\n\r\n},{\"./color\":3,\"./fontmetrics\":7,\"./log\":13,\"./nodecontainer\":14,\"./pseudoelementcontainer\":18,\"./stackingcontext\":21,\"./textcontainer\":25,\"./utils\":26,\"punycode\":1}],16:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar utils = _dereq_('./utils');\r\nvar log = _dereq_('./log');\r\nvar createWindowClone = _dereq_('./clone');\r\nvar decode64 = utils.decode64;\r\n\r\nfunction Proxy(src, proxyUrl, document) {\r\n    var supportsCORS = ('withCredentials' in new XMLHttpRequest());\r\n    if (!proxyUrl) {\r\n        return Promise.reject(\"No proxy configured\");\r\n    }\r\n    var callback = createCallback(supportsCORS);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n\r\n    return supportsCORS ? XHR(url) : (jsonp(document, url, callback).then(function(response) {\r\n        return decode64(response.content);\r\n    }));\r\n}\r\nvar proxyCount = 0;\r\n\r\nfunction ProxyURL(src, proxyUrl, document) {\r\n    var supportsCORSImage = ('crossOrigin' in new Image());\r\n    var callback = createCallback(supportsCORSImage);\r\n    var url = createProxyUrl(proxyUrl, src, callback);\r\n    return (supportsCORSImage ? Promise.resolve(url) : jsonp(document, url, callback).then(function(response) {\r\n        return \"data:\" + response.type + \";base64,\" + response.content;\r\n    }));\r\n}\r\n\r\nfunction jsonp(document, url, callback) {\r\n    return new Promise(function(resolve, reject) {\r\n        var s = document.createElement(\"script\");\r\n        var cleanup = function() {\r\n            delete window.html2canvas.proxy[callback];\r\n            document.body.removeChild(s);\r\n        };\r\n        window.html2canvas.proxy[callback] = function(response) {\r\n            cleanup();\r\n            resolve(response);\r\n        };\r\n        s.src = url;\r\n        s.onerror = function(e) {\r\n            cleanup();\r\n            reject(e);\r\n        };\r\n        document.body.appendChild(s);\r\n    });\r\n}\r\n\r\nfunction createCallback(useCORS) {\r\n    return !useCORS ? \"html2canvas_\" + Date.now() + \"_\" + (++proxyCount) + \"_\" + Math.round(Math.random() * 100000) : \"\";\r\n}\r\n\r\nfunction createProxyUrl(proxyUrl, src, callback) {\r\n    return proxyUrl + \"?url=\" + encodeURIComponent(src) + (callback.length ? \"&callback=html2canvas.proxy.\" + callback : \"\");\r\n}\r\n\r\nfunction documentFromHTML(src) {\r\n    return function(html) {\r\n        var parser = new DOMParser(), doc;\r\n        try {\r\n            doc = parser.parseFromString(html, \"text/html\");\r\n        } catch(e) {\r\n            log(\"DOMParser not supported, falling back to createHTMLDocument\");\r\n            doc = document.implementation.createHTMLDocument(\"\");\r\n            try {\r\n                doc.open();\r\n                doc.write(html);\r\n                doc.close();\r\n            } catch(ee) {\r\n                log(\"createHTMLDocument write not supported, falling back to document.body.innerHTML\");\r\n                doc.body.innerHTML = html; // ie9 doesnt support writing to documentElement\r\n            }\r\n        }\r\n\r\n        var b = doc.querySelector(\"base\");\r\n        if (!b || !b.href.host) {\r\n            var base = doc.createElement(\"base\");\r\n            base.href = src;\r\n            doc.head.insertBefore(base, doc.head.firstChild);\r\n        }\r\n\r\n        return doc;\r\n    };\r\n}\r\n\r\nfunction loadUrlDocument(src, proxy, document, width, height, options) {\r\n    return new Proxy(src, proxy, window.document).then(documentFromHTML(src)).then(function(doc) {\r\n        return createWindowClone(doc, document, width, height, options, 0, 0);\r\n    });\r\n}\r\n\r\nexports.Proxy = Proxy;\r\nexports.ProxyURL = ProxyURL;\r\nexports.loadUrlDocument = loadUrlDocument;\r\n\r\n},{\"./clone\":2,\"./log\":13,\"./utils\":26,\"./xhr\":28}],17:[function(_dereq_,module,exports){\r\nvar ProxyURL = _dereq_('./proxy').ProxyURL;\r\n\r\nfunction ProxyImageContainer(src, proxy) {\r\n    var link = document.createElement(\"a\");\r\n    link.href = src;\r\n    src = link.href;\r\n    this.src = src;\r\n    this.image = new Image();\r\n    var self = this;\r\n    this.promise = new Promise(function(resolve, reject) {\r\n        self.image.crossOrigin = \"Anonymous\";\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n\r\n        new ProxyURL(src, proxy, document).then(function(url) {\r\n            self.image.src = url;\r\n        })['catch'](reject);\r\n    });\r\n}\r\n\r\nmodule.exports = ProxyImageContainer;\r\n\r\n},{\"./proxy\":16}],18:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction PseudoElementContainer(node, parent, type) {\r\n    NodeContainer.call(this, node, parent);\r\n    this.isPseudoElement = true;\r\n    this.before = type === \":before\";\r\n}\r\n\r\nPseudoElementContainer.prototype.cloneTo = function(stack) {\r\n    PseudoElementContainer.prototype.cloneTo.call(this, stack);\r\n    stack.isPseudoElement = true;\r\n    stack.before = this.before;\r\n};\r\n\r\nPseudoElementContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nPseudoElementContainer.prototype.appendToDOM = function() {\r\n    if (this.before) {\r\n        this.parent.node.insertBefore(this.node, this.parent.node.firstChild);\r\n    } else {\r\n        this.parent.node.appendChild(this.node);\r\n    }\r\n    this.parent.node.className += \" \" + this.getHideClass();\r\n};\r\n\r\nPseudoElementContainer.prototype.cleanDOM = function() {\r\n    this.node.parentNode.removeChild(this.node);\r\n    this.parent.node.className = this.parent.node.className.replace(this.getHideClass(), \"\");\r\n};\r\n\r\nPseudoElementContainer.prototype.getHideClass = function() {\r\n    return this[\"PSEUDO_HIDE_ELEMENT_CLASS_\" + (this.before ? \"BEFORE\" : \"AFTER\")];\r\n};\r\n\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_BEFORE = \"___html2canvas___pseudoelement_before\";\r\nPseudoElementContainer.prototype.PSEUDO_HIDE_ELEMENT_CLASS_AFTER = \"___html2canvas___pseudoelement_after\";\r\n\r\nmodule.exports = PseudoElementContainer;\r\n\r\n},{\"./nodecontainer\":14}],19:[function(_dereq_,module,exports){\r\nvar log = _dereq_('./log');\r\n\r\nfunction Renderer(width, height, images, options, document) {\r\n    this.width = width;\r\n    this.height = height;\r\n    this.images = images;\r\n    this.options = options;\r\n    this.document = document;\r\n}\r\n\r\nRenderer.prototype.renderImage = function(container, bounds, borderData, imageContainer) {\r\n    var paddingLeft = container.cssInt('paddingLeft'),\r\n        paddingTop = container.cssInt('paddingTop'),\r\n        paddingRight = container.cssInt('paddingRight'),\r\n        paddingBottom = container.cssInt('paddingBottom'),\r\n        borders = borderData.borders;\r\n\r\n    var width = bounds.width - (borders[1].width + borders[3].width + paddingLeft + paddingRight);\r\n    var height = bounds.height - (borders[0].width + borders[2].width + paddingTop + paddingBottom);\r\n    this.drawImage(\r\n        imageContainer,\r\n        0,\r\n        0,\r\n        imageContainer.image.width || width,\r\n        imageContainer.image.height || height,\r\n        bounds.left + paddingLeft + borders[3].width,\r\n        bounds.top + paddingTop + borders[0].width,\r\n        width,\r\n        height\r\n    );\r\n};\r\n\r\nRenderer.prototype.renderBackground = function(container, bounds, borderData) {\r\n    if (bounds.height > 0 && bounds.width > 0) {\r\n        this.renderBackgroundColor(container, bounds);\r\n        this.renderBackgroundImage(container, bounds, borderData);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundColor = function(container, bounds) {\r\n    var color = container.color(\"backgroundColor\");\r\n    if (!color.isTransparent()) {\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, color);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBorders = function(borders) {\r\n    borders.forEach(this.renderBorder, this);\r\n};\r\n\r\nRenderer.prototype.renderBorder = function(data) {\r\n    if (!data.color.isTransparent() && data.args !== null) {\r\n        this.drawShape(data.args, data.color);\r\n    }\r\n};\r\n\r\nRenderer.prototype.renderBackgroundImage = function(container, bounds, borderData) {\r\n    var backgroundImages = container.parseBackgroundImages();\r\n    backgroundImages.reverse().forEach(function(backgroundImage, index, arr) {\r\n        switch(backgroundImage.method) {\r\n        case \"url\":\r\n            var image = this.images.get(backgroundImage.args[0]);\r\n            if (image) {\r\n                this.renderBackgroundRepeating(container, bounds, image, arr.length - (index+1), borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"linear-gradient\":\r\n        case \"gradient\":\r\n            var gradientImage = this.images.get(backgroundImage.value);\r\n            if (gradientImage) {\r\n                this.renderBackgroundGradient(gradientImage, bounds, borderData);\r\n            } else {\r\n                log(\"Error loading background-image\", backgroundImage.args[0]);\r\n            }\r\n            break;\r\n        case \"none\":\r\n            break;\r\n        default:\r\n            log(\"Unknown background-image type\", backgroundImage.args[0]);\r\n        }\r\n    }, this);\r\n};\r\n\r\nRenderer.prototype.renderBackgroundRepeating = function(container, bounds, imageContainer, index, borderData) {\r\n    var size = container.parseBackgroundSize(bounds, imageContainer.image, index);\r\n    var position = container.parseBackgroundPosition(bounds, imageContainer.image, index, size);\r\n    var repeat = container.parseBackgroundRepeat(index);\r\n    switch (repeat) {\r\n    case \"repeat-x\":\r\n    case \"repeat no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + borderData[3], bounds.top + position.top + borderData[0], 99999, size.height, borderData);\r\n        break;\r\n    case \"repeat-y\":\r\n    case \"no-repeat repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + borderData[0], size.width, 99999, borderData);\r\n        break;\r\n    case \"no-repeat\":\r\n        this.backgroundRepeatShape(imageContainer, position, size, bounds, bounds.left + position.left + borderData[3], bounds.top + position.top + borderData[0], size.width, size.height, borderData);\r\n        break;\r\n    default:\r\n        this.renderBackgroundRepeat(imageContainer, position, size, {top: bounds.top, left: bounds.left}, borderData[3], borderData[0]);\r\n        break;\r\n    }\r\n};\r\n\r\nmodule.exports = Renderer;\r\n\r\n},{\"./log\":13}],20:[function(_dereq_,module,exports){\r\nvar Renderer = _dereq_('../renderer');\r\nvar LinearGradientContainer = _dereq_('../lineargradientcontainer');\r\nvar log = _dereq_('../log');\r\n\r\nfunction CanvasRenderer(width, height) {\r\n    Renderer.apply(this, arguments);\r\n    this.canvas = this.options.canvas || this.document.createElement(\"canvas\");\r\n    if (!this.options.canvas) {\r\n        this.canvas.width = width;\r\n        this.canvas.height = height;\r\n    }\r\n    this.ctx = this.canvas.getContext(\"2d\");\r\n    this.taintCtx = this.document.createElement(\"canvas\").getContext(\"2d\");\r\n    this.ctx.textBaseline = \"bottom\";\r\n    this.variables = {};\r\n    log(\"Initialized CanvasRenderer with size\", width, \"x\", height);\r\n}\r\n\r\nCanvasRenderer.prototype = Object.create(Renderer.prototype);\r\n\r\nCanvasRenderer.prototype.setFillStyle = function(fillStyle) {\r\n    this.ctx.fillStyle = typeof(fillStyle) === \"object\" && !!fillStyle.isColor ? fillStyle.toString() : fillStyle;\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.rectangle = function(left, top, width, height, color) {\r\n    this.setFillStyle(color).fillRect(left, top, width, height);\r\n};\r\n\r\nCanvasRenderer.prototype.circle = function(left, top, size, color) {\r\n    this.setFillStyle(color);\r\n    this.ctx.beginPath();\r\n    this.ctx.arc(left + size / 2, top + size / 2, size / 2, 0, Math.PI*2, true);\r\n    this.ctx.closePath();\r\n    this.ctx.fill();\r\n};\r\n\r\nCanvasRenderer.prototype.circleStroke = function(left, top, size, color, stroke, strokeColor) {\r\n    this.circle(left, top, size, color);\r\n    this.ctx.strokeStyle = strokeColor.toString();\r\n    this.ctx.stroke();\r\n};\r\n\r\nCanvasRenderer.prototype.drawShape = function(shape, color) {\r\n    this.shape(shape);\r\n    this.setFillStyle(color).fill();\r\n};\r\n\r\nCanvasRenderer.prototype.taints = function(imageContainer) {\r\n    if (imageContainer.tainted === null) {\r\n        this.taintCtx.drawImage(imageContainer.image, 0, 0);\r\n        try {\r\n            this.taintCtx.getImageData(0, 0, 1, 1);\r\n            imageContainer.tainted = false;\r\n        } catch(e) {\r\n            this.taintCtx = document.createElement(\"canvas\").getContext(\"2d\");\r\n            imageContainer.tainted = true;\r\n        }\r\n    }\r\n\r\n    return imageContainer.tainted;\r\n};\r\n\r\nCanvasRenderer.prototype.drawImage = function(imageContainer, sx, sy, sw, sh, dx, dy, dw, dh) {\r\n    if (!this.taints(imageContainer) || this.options.allowTaint) {\r\n        this.ctx.drawImage(imageContainer.image, sx, sy, sw, sh, dx, dy, dw, dh);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.clip = function(shapes, callback, context) {\r\n    this.ctx.save();\r\n    shapes.filter(hasEntries).forEach(function(shape) {\r\n        this.shape(shape).clip();\r\n    }, this);\r\n    callback.call(context);\r\n    this.ctx.restore();\r\n};\r\n\r\nCanvasRenderer.prototype.shape = function(shape) {\r\n    this.ctx.beginPath();\r\n    shape.forEach(function(point, index) {\r\n        if (point[0] === \"rect\") {\r\n            this.ctx.rect.apply(this.ctx, point.slice(1));\r\n        } else {\r\n            this.ctx[(index === 0) ? \"moveTo\" : point[0] + \"To\" ].apply(this.ctx, point.slice(1));\r\n        }\r\n    }, this);\r\n    this.ctx.closePath();\r\n    return this.ctx;\r\n};\r\n\r\nCanvasRenderer.prototype.font = function(color, style, variant, weight, size, family) {\r\n    this.setFillStyle(color).font = [style, variant, weight, size, family].join(\" \").split(\",\")[0];\r\n};\r\n\r\nCanvasRenderer.prototype.fontShadow = function(color, offsetX, offsetY, blur) {\r\n    this.setVariable(\"shadowColor\", color.toString())\r\n        .setVariable(\"shadowOffsetY\", offsetX)\r\n        .setVariable(\"shadowOffsetX\", offsetY)\r\n        .setVariable(\"shadowBlur\", blur);\r\n};\r\n\r\nCanvasRenderer.prototype.clearShadow = function() {\r\n    this.setVariable(\"shadowColor\", \"rgba(0,0,0,0)\");\r\n};\r\n\r\nCanvasRenderer.prototype.setOpacity = function(opacity) {\r\n    this.ctx.globalAlpha = opacity;\r\n};\r\n\r\nCanvasRenderer.prototype.setTransform = function(transform) {\r\n    this.ctx.translate(transform.origin[0], transform.origin[1]);\r\n    this.ctx.transform.apply(this.ctx, transform.matrix);\r\n    this.ctx.translate(-transform.origin[0], -transform.origin[1]);\r\n};\r\n\r\nCanvasRenderer.prototype.setVariable = function(property, value) {\r\n    if (this.variables[property] !== value) {\r\n        this.variables[property] = this.ctx[property] = value;\r\n    }\r\n\r\n    return this;\r\n};\r\n\r\nCanvasRenderer.prototype.text = function(text, left, bottom) {\r\n    this.ctx.fillText(text, left, bottom);\r\n};\r\n\r\nCanvasRenderer.prototype.backgroundRepeatShape = function(imageContainer, backgroundPosition, size, bounds, left, top, width, height, borderData) {\r\n    var shape = [\r\n        [\"line\", Math.round(left), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(top)],\r\n        [\"line\", Math.round(left + width), Math.round(height + top)],\r\n        [\"line\", Math.round(left), Math.round(height + top)]\r\n    ];\r\n    this.clip([shape], function() {\r\n        this.renderBackgroundRepeat(imageContainer, backgroundPosition, size, bounds, borderData[3], borderData[0]);\r\n    }, this);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundRepeat = function(imageContainer, backgroundPosition, size, bounds, borderLeft, borderTop) {\r\n    var offsetX = Math.round(bounds.left + backgroundPosition.left + borderLeft), offsetY = Math.round(bounds.top + backgroundPosition.top + borderTop);\r\n    this.setFillStyle(this.ctx.createPattern(this.resizeImage(imageContainer, size), \"repeat\"));\r\n    this.ctx.translate(offsetX, offsetY);\r\n    this.ctx.fill();\r\n    this.ctx.translate(-offsetX, -offsetY);\r\n};\r\n\r\nCanvasRenderer.prototype.renderBackgroundGradient = function(gradientImage, bounds) {\r\n    if (gradientImage instanceof LinearGradientContainer) {\r\n        var gradient = this.ctx.createLinearGradient(\r\n            bounds.left + bounds.width * gradientImage.x0,\r\n            bounds.top + bounds.height * gradientImage.y0,\r\n            bounds.left +  bounds.width * gradientImage.x1,\r\n            bounds.top +  bounds.height * gradientImage.y1);\r\n        gradientImage.colorStops.forEach(function(colorStop) {\r\n            gradient.addColorStop(colorStop.stop, colorStop.color.toString());\r\n        });\r\n        this.rectangle(bounds.left, bounds.top, bounds.width, bounds.height, gradient);\r\n    }\r\n};\r\n\r\nCanvasRenderer.prototype.resizeImage = function(imageContainer, size) {\r\n    var image = imageContainer.image;\r\n    if(image.width === size.width && image.height === size.height) {\r\n        return image;\r\n    }\r\n\r\n    var ctx, canvas = document.createElement('canvas');\r\n    canvas.width = size.width;\r\n    canvas.height = size.height;\r\n    ctx = canvas.getContext(\"2d\");\r\n    ctx.drawImage(image, 0, 0, image.width, image.height, 0, 0, size.width, size.height );\r\n    return canvas;\r\n};\r\n\r\nfunction hasEntries(array) {\r\n    return array.length > 0;\r\n}\r\n\r\nmodule.exports = CanvasRenderer;\r\n\r\n},{\"../lineargradientcontainer\":12,\"../log\":13,\"../renderer\":19}],21:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction StackingContext(hasOwnStacking, opacity, element, parent) {\r\n    NodeContainer.call(this, element, parent);\r\n    this.ownStacking = hasOwnStacking;\r\n    this.contexts = [];\r\n    this.children = [];\r\n    this.opacity = (this.parent ? this.parent.stack.opacity : 1) * opacity;\r\n}\r\n\r\nStackingContext.prototype = Object.create(NodeContainer.prototype);\r\n\r\nStackingContext.prototype.getParentStack = function(context) {\r\n    var parentStack = (this.parent) ? this.parent.stack : null;\r\n    return parentStack ? (parentStack.ownStacking ? parentStack : parentStack.getParentStack(context)) : context.stack;\r\n};\r\n\r\nmodule.exports = StackingContext;\r\n\r\n},{\"./nodecontainer\":14}],22:[function(_dereq_,module,exports){\r\nfunction Support(document) {\r\n    this.rangeBounds = this.testRangeBounds(document);\r\n    this.cors = this.testCORS();\r\n    this.svg = this.testSVG();\r\n}\r\n\r\nSupport.prototype.testRangeBounds = function(document) {\r\n    var range, testElement, rangeBounds, rangeHeight, support = false;\r\n\r\n    if (document.createRange) {\r\n        range = document.createRange();\r\n        if (range.getBoundingClientRect) {\r\n            testElement = document.createElement('boundtest');\r\n            testElement.style.height = \"123px\";\r\n            testElement.style.display = \"block\";\r\n            document.body.appendChild(testElement);\r\n\r\n            range.selectNode(testElement);\r\n            rangeBounds = range.getBoundingClientRect();\r\n            rangeHeight = rangeBounds.height;\r\n\r\n            if (rangeHeight === 123) {\r\n                support = true;\r\n            }\r\n            document.body.removeChild(testElement);\r\n        }\r\n    }\r\n\r\n    return support;\r\n};\r\n\r\nSupport.prototype.testCORS = function() {\r\n    return typeof((new Image()).crossOrigin) !== \"undefined\";\r\n};\r\n\r\nSupport.prototype.testSVG = function() {\r\n    var img = new Image();\r\n    var canvas = document.createElement(\"canvas\");\r\n    var ctx =  canvas.getContext(\"2d\");\r\n    img.src = \"data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>\";\r\n\r\n    try {\r\n        ctx.drawImage(img, 0, 0);\r\n        canvas.toDataURL();\r\n    } catch(e) {\r\n        return false;\r\n    }\r\n    return true;\r\n};\r\n\r\nmodule.exports = Support;\r\n\r\n},{}],23:[function(_dereq_,module,exports){\r\nvar XHR = _dereq_('./xhr');\r\nvar decode64 = _dereq_('./utils').decode64;\r\n\r\nfunction SVGContainer(src) {\r\n    this.src = src;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = this.hasFabric().then(function() {\r\n        return (self.isInline(src) ? Promise.resolve(self.inlineFormatting(src)) : XHR(src));\r\n    }).then(function(svg) {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.loadSVGFromString(svg, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGContainer.prototype.hasFabric = function() {\r\n    return !window.html2canvas.svg || !window.html2canvas.svg.fabric ? Promise.reject(new Error(\"html2canvas.svg.js is not loaded, cannot render svg\")) : Promise.resolve();\r\n};\r\n\r\nSVGContainer.prototype.inlineFormatting = function(src) {\r\n    return (/^data:image\\/svg\\+xml;base64,/.test(src)) ? this.decode64(this.removeContentType(src)) : this.removeContentType(src);\r\n};\r\n\r\nSVGContainer.prototype.removeContentType = function(src) {\r\n    return src.replace(/^data:image\\/svg\\+xml(;base64)?,/,'');\r\n};\r\n\r\nSVGContainer.prototype.isInline = function(src) {\r\n    return (/^data:image\\/svg\\+xml/i.test(src));\r\n};\r\n\r\nSVGContainer.prototype.createCanvas = function(resolve) {\r\n    var self = this;\r\n    return function (objects, options) {\r\n        var canvas = new window.html2canvas.svg.fabric.StaticCanvas('c');\r\n        self.image = canvas.lowerCanvasEl;\r\n        canvas\r\n            .setWidth(options.width)\r\n            .setHeight(options.height)\r\n            .add(window.html2canvas.svg.fabric.util.groupSVGElements(objects, options))\r\n            .renderAll();\r\n        resolve(canvas.lowerCanvasEl);\r\n    };\r\n};\r\n\r\nSVGContainer.prototype.decode64 = function(str) {\r\n    return (typeof(window.atob) === \"function\") ? window.atob(str) : decode64(str);\r\n};\r\n\r\nmodule.exports = SVGContainer;\r\n\r\n},{\"./utils\":26,\"./xhr\":28}],24:[function(_dereq_,module,exports){\r\nvar SVGContainer = _dereq_('./svgcontainer');\r\n\r\nfunction SVGNodeContainer(node, _native) {\r\n    this.src = node;\r\n    this.image = null;\r\n    var self = this;\r\n\r\n    this.promise = _native ? new Promise(function(resolve, reject) {\r\n        self.image = new Image();\r\n        self.image.onload = resolve;\r\n        self.image.onerror = reject;\r\n        self.image.src = \"data:image/svg+xml,\" + (new XMLSerializer()).serializeToString(node);\r\n        if (self.image.complete === true) {\r\n            resolve(self.image);\r\n        }\r\n    }) : this.hasFabric().then(function() {\r\n        return new Promise(function(resolve) {\r\n            window.html2canvas.svg.fabric.parseSVGDocument(node, self.createCanvas.call(self, resolve));\r\n        });\r\n    });\r\n}\r\n\r\nSVGNodeContainer.prototype = Object.create(SVGContainer.prototype);\r\n\r\nmodule.exports = SVGNodeContainer;\r\n\r\n},{\"./svgcontainer\":23}],25:[function(_dereq_,module,exports){\r\nvar NodeContainer = _dereq_('./nodecontainer');\r\n\r\nfunction TextContainer(node, parent) {\r\n    NodeContainer.call(this, node, parent);\r\n}\r\n\r\nTextContainer.prototype = Object.create(NodeContainer.prototype);\r\n\r\nTextContainer.prototype.applyTextTransform = function() {\r\n    this.node.data = this.transform(this.parent.css(\"textTransform\"));\r\n};\r\n\r\nTextContainer.prototype.transform = function(transform) {\r\n    var text = this.node.data;\r\n    switch(transform){\r\n        case \"lowercase\":\r\n            return text.toLowerCase();\r\n        case \"capitalize\":\r\n            return text.replace(/(^|\\s|:|-|\\(|\\))([a-z])/g, capitalize);\r\n        case \"uppercase\":\r\n            return text.toUpperCase();\r\n        default:\r\n            return text;\r\n    }\r\n};\r\n\r\nfunction capitalize(m, p1, p2) {\r\n    if (m.length > 0) {\r\n        return p1 + p2.toUpperCase();\r\n    }\r\n}\r\n\r\nmodule.exports = TextContainer;\r\n\r\n},{\"./nodecontainer\":14}],26:[function(_dereq_,module,exports){\r\nexports.smallImage = function smallImage() {\r\n    return \"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7\";\r\n};\r\n\r\nexports.bind = function(callback, context) {\r\n    return function() {\r\n        return callback.apply(context, arguments);\r\n    };\r\n};\r\n\r\n/*\r\n * base64-arraybuffer\r\n * https://github.com/niklasvh/base64-arraybuffer\r\n *\r\n * Copyright (c) 2012 Niklas von Hertzen\r\n * Licensed under the MIT license.\r\n */\r\n\r\nexports.decode64 = function(base64) {\r\n    var chars = \"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";\r\n    var len = base64.length, i, encoded1, encoded2, encoded3, encoded4, byte1, byte2, byte3;\r\n\r\n    var output = \"\";\r\n\r\n    for (i = 0; i < len; i+=4) {\r\n        encoded1 = chars.indexOf(base64[i]);\r\n        encoded2 = chars.indexOf(base64[i+1]);\r\n        encoded3 = chars.indexOf(base64[i+2]);\r\n        encoded4 = chars.indexOf(base64[i+3]);\r\n\r\n        byte1 = (encoded1 << 2) | (encoded2 >> 4);\r\n        byte2 = ((encoded2 & 15) << 4) | (encoded3 >> 2);\r\n        byte3 = ((encoded3 & 3) << 6) | encoded4;\r\n        if (encoded3 === 64) {\r\n            output += String.fromCharCode(byte1);\r\n        } else if (encoded4 === 64 || encoded4 === -1) {\r\n            output += String.fromCharCode(byte1, byte2);\r\n        } else{\r\n            output += String.fromCharCode(byte1, byte2, byte3);\r\n        }\r\n    }\r\n\r\n    return output;\r\n};\r\n\r\nexports.getBounds = function(node) {\r\n    if (node.getBoundingClientRect) {\r\n        var clientRect = node.getBoundingClientRect();\r\n        var width = node.offsetWidth == null ? clientRect.width : node.offsetWidth;\r\n        return {\r\n            top: clientRect.top,\r\n            bottom: clientRect.bottom || (clientRect.top + clientRect.height),\r\n            right: clientRect.left + width,\r\n            left: clientRect.left,\r\n            width:  width,\r\n            height: node.offsetHeight == null ? clientRect.height : node.offsetHeight\r\n        };\r\n    }\r\n    return {};\r\n};\r\n\r\nexports.offsetBounds = function(node) {\r\n    var parent = node.offsetParent ? exports.offsetBounds(node.offsetParent) : {top: 0, left: 0};\r\n\r\n    return {\r\n        top: node.offsetTop + parent.top,\r\n        bottom: node.offsetTop + node.offsetHeight + parent.top,\r\n        right: node.offsetLeft + parent.left + node.offsetWidth,\r\n        left: node.offsetLeft + parent.left,\r\n        width: node.offsetWidth,\r\n        height: node.offsetHeight\r\n    };\r\n};\r\n\r\nexports.parseBackgrounds = function(backgroundImage) {\r\n    var whitespace = ' \\r\\n\\t',\r\n        method, definition, prefix, prefix_i, block, results = [],\r\n        mode = 0, numParen = 0, quote, args;\r\n    var appendResult = function() {\r\n        if(method) {\r\n            if (definition.substr(0, 1) === '\"') {\r\n                definition = definition.substr(1, definition.length - 2);\r\n            }\r\n            if (definition) {\r\n                args.push(definition);\r\n            }\r\n            if (method.substr(0, 1) === '-' && (prefix_i = method.indexOf('-', 1 ) + 1) > 0) {\r\n                prefix = method.substr(0, prefix_i);\r\n                method = method.substr(prefix_i);\r\n            }\r\n            results.push({\r\n                prefix: prefix,\r\n                method: method.toLowerCase(),\r\n                value: block,\r\n                args: args,\r\n                image: null\r\n            });\r\n        }\r\n        args = [];\r\n        method = prefix = definition = block = '';\r\n    };\r\n    args = [];\r\n    method = prefix = definition = block = '';\r\n    backgroundImage.split(\"\").forEach(function(c) {\r\n        if (mode === 0 && whitespace.indexOf(c) > -1) {\r\n            return;\r\n        }\r\n        switch(c) {\r\n        case '\"':\r\n            if(!quote) {\r\n                quote = c;\r\n            } else if(quote === c) {\r\n                quote = null;\r\n            }\r\n            break;\r\n        case '(':\r\n            if(quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                mode = 1;\r\n                block += c;\r\n                return;\r\n            } else {\r\n                numParen++;\r\n            }\r\n            break;\r\n        case ')':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 1) {\r\n                if(numParen === 0) {\r\n                    mode = 0;\r\n                    block += c;\r\n                    appendResult();\r\n                    return;\r\n                } else {\r\n                    numParen--;\r\n                }\r\n            }\r\n            break;\r\n\r\n        case ',':\r\n            if (quote) {\r\n                break;\r\n            } else if(mode === 0) {\r\n                appendResult();\r\n                return;\r\n            } else if (mode === 1) {\r\n                if (numParen === 0 && !method.match(/^url$/i)) {\r\n                    args.push(definition);\r\n                    definition = '';\r\n                    block += c;\r\n                    return;\r\n                }\r\n            }\r\n            break;\r\n        }\r\n\r\n        block += c;\r\n        if (mode === 0) {\r\n            method += c;\r\n        } else {\r\n            definition += c;\r\n        }\r\n    });\r\n\r\n    appendResult();\r\n    return results;\r\n};\r\n\r\n},{}],27:[function(_dereq_,module,exports){\r\nvar GradientContainer = _dereq_('./gradientcontainer');\r\n\r\nfunction WebkitGradientContainer(imageData) {\r\n    GradientContainer.apply(this, arguments);\r\n    this.type = imageData.args[0] === \"linear\" ? GradientContainer.TYPES.LINEAR : GradientContainer.TYPES.RADIAL;\r\n}\r\n\r\nWebkitGradientContainer.prototype = Object.create(GradientContainer.prototype);\r\n\r\nmodule.exports = WebkitGradientContainer;\r\n\r\n},{\"./gradientcontainer\":9}],28:[function(_dereq_,module,exports){\r\nfunction XHR(url) {\r\n    return new Promise(function(resolve, reject) {\r\n        var xhr = new XMLHttpRequest();\r\n        xhr.open('GET', url);\r\n\r\n        xhr.onload = function() {\r\n            if (xhr.status === 200) {\r\n                resolve(xhr.responseText);\r\n            } else {\r\n                reject(new Error(xhr.statusText));\r\n            }\r\n        };\r\n\r\n        xhr.onerror = function() {\r\n            reject(new Error(\"Network Error\"));\r\n        };\r\n\r\n        xhr.send();\r\n    });\r\n}\r\n\r\nmodule.exports = XHR;\r\n\r\n},{}]},{},[4])(4)\r\n});","(function webpackUniversalModuleDefinition(root, factory) {\r\n\tif(typeof exports === 'object' && typeof module === 'object')\r\n\t\tmodule.exports = factory();\r\n\telse if(typeof define === 'function' && define.amd)\r\n\t\tdefine(\"OrgChart\", [], factory);\r\n\telse if(typeof exports === 'object')\r\n\t\texports[\"OrgChart\"] = factory();\r\n\telse\r\n\t\troot[\"OrgChart\"] = factory();\r\n})(this, function() {\r\nreturn /******/ (function(modules) { // webpackBootstrap\r\n/******/ \t// The module cache\r\n/******/ \tvar installedModules = {};\r\n/******/\r\n/******/ \t// The require function\r\n/******/ \tfunction __webpack_require__(moduleId) {\r\n/******/\r\n/******/ \t\t// Check if module is in cache\r\n/******/ \t\tif(installedModules[moduleId])\r\n/******/ \t\t\treturn installedModules[moduleId].exports;\r\n/******/\r\n/******/ \t\t// Create a new module (and put it into the cache)\r\n/******/ \t\tvar module = installedModules[moduleId] = {\r\n/******/ \t\t\texports: {},\r\n/******/ \t\t\tid: moduleId,\r\n/******/ \t\t\tloaded: false\r\n/******/ \t\t};\r\n/******/\r\n/******/ \t\t// Execute the module function\r\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\r\n/******/\r\n/******/ \t\t// Flag the module as loaded\r\n/******/ \t\tmodule.loaded = true;\r\n/******/\r\n/******/ \t\t// Return the exports of the module\r\n/******/ \t\treturn module.exports;\r\n/******/ \t}\r\n/******/\r\n/******/\r\n/******/ \t// expose the modules object (__webpack_modules__)\r\n/******/ \t__webpack_require__.m = modules;\r\n/******/\r\n/******/ \t// expose the module cache\r\n/******/ \t__webpack_require__.c = installedModules;\r\n/******/\r\n/******/ \t// __webpack_public_path__\r\n/******/ \t__webpack_require__.p = \"\";\r\n/******/\r\n/******/ \t// Load entry module and return exports\r\n/******/ \treturn __webpack_require__(0);\r\n/******/ })\r\n/************************************************************************/\r\n/******/ ([\r\n/* 0 */\r\n/***/ function(module, exports) {\r\n\r\n\t'use strict';\r\n\t\r\n\tObject.defineProperty(exports, \"__esModule\", {\r\n\t  value: true\r\n\t});\r\n\t\r\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\r\n\t\r\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\r\n\t\r\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\r\n\t\r\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\r\n\t\r\n\tvar OrgChart = function () {\r\n\t  function OrgChart(options) {\r\n\t    _classCallCheck(this, OrgChart);\r\n\t\r\n\t    this._name = 'OrgChart';\r\n\t    Promise.prototype.finally = function (callback) {\r\n\t      var P = this.constructor;\r\n\t\r\n\t      return this.then(function (value) {\r\n\t        return P.resolve(callback()).then(function () {\r\n\t          return value;\r\n\t        });\r\n\t      }, function (reason) {\r\n\t        return P.resolve(callback()).then(function () {\r\n\t          throw reason;\r\n\t        });\r\n\t      });\r\n\t    };\r\n\t\r\n\t    var that = this,\r\n\t        defaultOptions = {\r\n\t      'nodeTitle': 'name',\r\n\t      'nodeId': 'id',\r\n\t      'toggleSiblingsResp': false,\r\n\t      'depth': 999,\r\n\t      'chartClass': '',\r\n\t      'exportButton': false,\r\n\t      'exportFilename': 'OrgChart',\r\n\t      'parentNodeSymbol': 'fa-users',\r\n\t      'draggable': false,\r\n\t      'direction': 't2b',\r\n\t      'pan': false,\r\n\t      'zoom': false\r\n\t    },\r\n\t        opts = Object.assign(defaultOptions, options),\r\n\t        data = opts.data,\r\n\t        chart = document.createElement('div'),\r\n\t        chartContainer = document.querySelector(opts.chartContainer);\r\n\t\r\n\t    this.options = opts;\r\n\t    delete this.options.data;\r\n\t    this.chart = chart;\r\n\t    this.chartContainer = chartContainer;\r\n\t    chart.dataset.options = JSON.stringify(opts);\r\n\t    chart.setAttribute('class', 'orgchart' + (opts.chartClass !== '' ? ' ' + opts.chartClass : '') + (opts.direction !== 't2b' ? ' ' + opts.direction : ''));\r\n\t    if ((typeof data === 'undefined' ? 'undefined' : _typeof(data)) === 'object') {\r\n\t      // local json datasource\r\n\t      this.buildHierarchy(chart, opts.ajaxURL ? data : this._attachRel(data, '00'), 0);\r\n\t    } else if (typeof data === 'string' && data.startsWith('#')) {\r\n\t      // ul datasource\r\n\t      this.buildHierarchy(chart, this._buildJsonDS(document.querySelector(data).children[0]), 0);\r\n\t    } else {\r\n\t      // ajax datasource\r\n\t      var spinner = document.createElement('i');\r\n\t\r\n\t      spinner.setAttribute('class', 'fa fa-circle-o-notch fa-spin spinner');\r\n\t      chart.appendChild(spinner);\r\n\t      this._getJSON(data).then(function (resp) {\r\n\t        that.buildHierarchy(chart, opts.ajaxURL ? resp : that._attachRel(resp, '00'), 0);\r\n\t      }).catch(function (err) {\r\n\t        console.error('failed to fetch datasource for orgchart', err);\r\n\t      }).finally(function () {\r\n\t        var spinner = chart.querySelector('.spinner');\r\n\t\r\n\t        spinner.parentNode.removeChild(spinner);\r\n\t      });\r\n\t    }\r\n\t    chart.addEventListener('click', this._clickChart.bind(this));\r\n\t    // append the export button to the chart-container\r\n\t    if (opts.exportButton && !chartContainer.querySelector('.oc-export-btn')) {\r\n                var exportBtn = document.createElement('button'),\r\n                downloadBtn = document.createElement('a');\r\n                \r\n                exportBtn.setAttribute('class', 'oc-export-btn' + (opts.chartClass !== '' ? ' ' + opts.chartClass : ''));\r\n                exportBtn.innerHTML = '<i class=\"fa fa-download\"></i> Export';\r\n                exportBtn.addEventListener('click', this._clickExportButton.bind(this));\r\n                downloadBtn.setAttribute('class', 'oc-download-btn' + (opts.chartClass !== '' ? ' ' + opts.chartClass : ''));\r\n                downloadBtn.setAttribute('download', opts.exportFilename + '.png');\r\n                chartContainer.appendChild(exportBtn);\r\n                chartContainer.appendChild(downloadBtn);\r\n\t    }\r\n\t\r\n\t    if (opts.pan) {\r\n\t      chartContainer.style.overflow = 'hidden';\r\n\t      chart.addEventListener('mousedown', this._onPanStart.bind(this));\r\n\t      chart.addEventListener('touchstart', this._onPanStart.bind(this));\r\n\t      document.body.addEventListener('mouseup', this._onPanEnd.bind(this));\r\n\t      document.body.addEventListener('touchend', this._onPanEnd.bind(this));\r\n\t    }\r\n\t\r\n\t    if (opts.zoom) {\r\n\t      chartContainer.addEventListener('wheel', this._onWheeling.bind(this));\r\n\t      chartContainer.addEventListener('touchstart', this._onTouchStart.bind(this));\r\n\t      document.body.addEventListener('touchmove', this._onTouchMove.bind(this));\r\n\t      document.body.addEventListener('touchend', this._onTouchEnd.bind(this));\r\n\t    }\r\n\t\r\n\t    chartContainer.appendChild(chart);\r\n\t  }\r\n\t\r\n\t  _createClass(OrgChart, [{\r\n\t    key: '_closest',\r\n\t    value: function _closest(el, fn) {\r\n\t      return el && (fn(el) && el !== this.chart ? el : this._closest(el.parentNode, fn));\r\n\t    }\r\n\t  }, {\r\n\t    key: '_siblings',\r\n\t    value: function _siblings(el, expr) {\r\n\t      return Array.from(el.parentNode.children).filter(function (child) {\r\n\t        if (child !== el) {\r\n\t          if (expr) {\r\n\t            return el.matches(expr);\r\n\t          }\r\n\t          return true;\r\n\t        }\r\n\t        return false;\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_prevAll',\r\n\t    value: function _prevAll(el, expr) {\r\n\t      var sibs = [],\r\n\t          prevSib = el.previousElementSibling;\r\n\t\r\n\t      while (prevSib) {\r\n\t        if (!expr || prevSib.matches(expr)) {\r\n\t          sibs.push(prevSib);\r\n\t        }\r\n\t        prevSib = prevSib.previousElementSibling;\r\n\t      }\r\n\t      return sibs;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_nextAll',\r\n\t    value: function _nextAll(el, expr) {\r\n\t      var sibs = [];\r\n\t      var nextSib = el.nextElementSibling;\r\n\t\r\n\t      while (nextSib) {\r\n\t        if (!expr || nextSib.matches(expr)) {\r\n\t          sibs.push(nextSib);\r\n\t        }\r\n\t        nextSib = nextSib.nextElementSibling;\r\n\t      }\r\n\t      return sibs;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_isVisible',\r\n\t    value: function _isVisible(el) {\r\n\t      return el.offsetParent !== null;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_addClass',\r\n\t    value: function _addClass(elements, classNames) {\r\n\t      elements.forEach(function (el) {\r\n\t        if (classNames.indexOf(' ') > 0) {\r\n\t          classNames.split(' ').forEach(function (className) {\r\n\t            return el.classList.add(className);\r\n\t          });\r\n\t        } else {\r\n\t          el.classList.add(classNames);\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_removeClass',\r\n\t    value: function _removeClass(elements, classNames) {\r\n\t      elements.forEach(function (el) {\r\n\t        if (classNames.indexOf(' ') > 0) {\r\n\t          classNames.split(' ').forEach(function (className) {\r\n\t            return el.classList.remove(className);\r\n\t          });\r\n\t        } else {\r\n\t          el.classList.remove(classNames);\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_css',\r\n\t    value: function _css(elements, prop, val) {\r\n\t      elements.forEach(function (el) {\r\n\t        el.style[prop] = val;\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_removeAttr',\r\n\t    value: function _removeAttr(elements, attr) {\r\n\t      elements.forEach(function (el) {\r\n\t        el.removeAttribute(attr);\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_one',\r\n\t    value: function _one(el, type, listener, self) {\r\n\t      var one = function one(event) {\r\n\t        try {\r\n\t          listener.call(self, event);\r\n\t        } finally {\r\n\t          el.removeEventListener(type, one);\r\n\t        }\r\n\t      };\r\n\t\r\n\t      el.addEventListener(type, one);\r\n\t    }\r\n\t  }, {\r\n\t    key: '_getDescElements',\r\n\t    value: function _getDescElements(ancestors, selector) {\r\n\t      var results = [];\r\n\t\r\n\t      ancestors.forEach(function (el) {\r\n\t        return results.push.apply(results, _toConsumableArray(el.querySelectorAll(selector)));\r\n\t      });\r\n\t      return results;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_getJSON',\r\n\t    value: function _getJSON(url) {\r\n\t      return new Promise(function (resolve, reject) {\r\n\t        var xhr = new XMLHttpRequest();\r\n\t\r\n\t        function handler() {\r\n\t          if (this.readyState !== 4) {\r\n\t            return;\r\n\t          }\r\n\t          if (this.status === 200) {\r\n\t          \t\r\n\t          \t// Fixed issue with JSON parse error\r\n\t          \tvar response = (typeof this.response == 'object') ? this.response : JSON.parse(this.response);\r\n\t            \r\n\t          \tresolve(response);\r\n\t          } else {\r\n\t            reject(new Error(this.statusText));\r\n\t          }\r\n\t        }\r\n\t        xhr.open('GET', url);\r\n\t        xhr.onreadystatechange = handler;\r\n\t        xhr.responseType = 'json';\r\n\t        // xhr.setRequestHeader('Accept', 'application/json');\r\n\t        xhr.setRequestHeader('Content-Type', 'application/json');\r\n\t        xhr.send();\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_buildJsonDS',\r\n\t    value: function _buildJsonDS(li) {\r\n\t      var _this = this;\r\n\t\r\n\t      var subObj = {\r\n\t        'name': li.firstChild.textContent.trim(),\r\n\t        'relationship': (li.parentNode.parentNode.nodeName === 'LI' ? '1' : '0') + (li.parentNode.children.length > 1 ? 1 : 0) + (li.children.length ? 1 : 0)\r\n\t      };\r\n\t\r\n\t      if (li.id) {\r\n\t        subObj.id = li.id;\r\n\t      }\r\n\t      if (li.querySelector('ul')) {\r\n\t        Array.from(li.querySelector('ul').children).forEach(function (el) {\r\n\t          if (!subObj.children) {\r\n\t            subObj.children = [];\r\n\t          }\r\n\t          subObj.children.push(_this._buildJsonDS(el));\r\n\t        });\r\n\t      }\r\n\t      return subObj;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_attachRel',\r\n\t    value: function _attachRel(data, flags) {\r\n\t      data.relationship = flags + (data.children && data.children.length > 0 ? 1 : 0);\r\n\t      if (data.children) {\r\n\t        var _iteratorNormalCompletion = true;\r\n\t        var _didIteratorError = false;\r\n\t        var _iteratorError = undefined;\r\n\t\r\n\t        try {\r\n\t          for (var _iterator = data.children[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\r\n\t            var item = _step.value;\r\n\t\r\n\t            this._attachRel(item, '1' + (data.children.length > 1 ? 1 : 0));\r\n\t          }\r\n\t        } catch (err) {\r\n\t          _didIteratorError = true;\r\n\t          _iteratorError = err;\r\n\t        } finally {\r\n\t          try {\r\n\t            if (!_iteratorNormalCompletion && _iterator.return) {\r\n\t              _iterator.return();\r\n\t            }\r\n\t          } finally {\r\n\t            if (_didIteratorError) {\r\n\t              throw _iteratorError;\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t      return data;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_repaint',\r\n\t    value: function _repaint(node) {\r\n\t      if (node) {\r\n\t        node.style.offsetWidth = node.offsetWidth;\r\n\t      }\r\n\t    }\r\n\t    // whether the cursor is hovering over the node\r\n\t\r\n\t  }, {\r\n\t    key: '_isInAction',\r\n\t    value: function _isInAction(node) {\r\n\t      return node.querySelector(':scope > .edge').className.indexOf('fa-') > -1;\r\n\t    }\r\n\t    // detect the exist/display state of related node\r\n\t\r\n\t  }, {\r\n\t    key: '_getNodeState',\r\n\t    value: function _getNodeState(node, relation) {\r\n\t      var _this2 = this;\r\n\t\r\n\t      var criteria = void 0,\r\n\t          state = { 'exist': false, 'visible': false };\r\n\t\r\n\t      if (relation === 'parent') {\r\n\t        criteria = this._closest(node, function (el) {\r\n\t          return el.classList && el.classList.contains('nodes');\r\n\t        });\r\n\t        if (criteria) {\r\n\t          state.exist = true;\r\n\t        }\r\n\t        if (state.exist && this._isVisible(criteria.parentNode.children[0])) {\r\n\t          state.visible = true;\r\n\t        }\r\n\t      } else if (relation === 'children') {\r\n\t        criteria = this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TR';\r\n\t        }).nextElementSibling;\r\n\t        if (criteria) {\r\n\t          state.exist = true;\r\n\t        }\r\n\t        if (state.exist && this._isVisible(criteria)) {\r\n\t          state.visible = true;\r\n\t        }\r\n\t      } else if (relation === 'siblings') {\r\n\t        criteria = this._siblings(this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode);\r\n\t        if (criteria.length) {\r\n\t          state.exist = true;\r\n\t        }\r\n\t        if (state.exist && criteria.some(function (el) {\r\n\t          return _this2._isVisible(el);\r\n\t        })) {\r\n\t          state.visible = true;\r\n\t        }\r\n\t      }\r\n\t\r\n\t      return state;\r\n\t    }\r\n\t    // find the related nodes\r\n\t\r\n\t  }, {\r\n\t    key: 'getRelatedNodes',\r\n\t    value: function getRelatedNodes(node, relation) {\r\n\t      if (relation === 'parent') {\r\n\t        return this._closest(node, function (el) {\r\n\t          return el.classList.contains('nodes');\r\n\t        }).parentNode.children[0].querySelector('.node');\r\n\t      } else if (relation === 'children') {\r\n\t        return Array.from(this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).lastChild.children).map(function (el) {\r\n\t          return el.querySelector('.node');\r\n\t        });\r\n\t      } else if (relation === 'siblings') {\r\n\t        return this._siblings(this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode).map(function (el) {\r\n\t          return el.querySelector('.node');\r\n\t        });\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_switchHorizontalArrow',\r\n\t    value: function _switchHorizontalArrow(node) {\r\n\t      var opts = this.options,\r\n\t          leftEdge = node.querySelector('.leftEdge'),\r\n\t          rightEdge = node.querySelector('.rightEdge'),\r\n\t          temp = this._closest(node, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }).parentNode;\r\n\t\r\n\t      if (opts.toggleSiblingsResp && (typeof opts.ajaxURL === 'undefined' || this._closest(node, function (el) {\r\n\t        return el.classList.contains('.nodes');\r\n\t      }).dataset.siblingsLoaded)) {\r\n\t        var prevSib = temp.previousElementSibling,\r\n\t            nextSib = temp.nextElementSibling;\r\n\t\r\n\t        if (prevSib) {\r\n\t          if (prevSib.classList.contains('hidden')) {\r\n\t            leftEdge.classList.add('fa-chevron-left');\r\n\t            leftEdge.classList.remove('fa-chevron-right');\r\n\t          } else {\r\n\t            leftEdge.classList.add('fa-chevron-right');\r\n\t            leftEdge.classList.remove('fa-chevron-left');\r\n\t          }\r\n\t        }\r\n\t        if (nextSib) {\r\n\t          if (nextSib.classList.contains('hidden')) {\r\n\t            rightEdge.classList.add('fa-chevron-right');\r\n\t            rightEdge.classList.remove('fa-chevron-left');\r\n\t          } else {\r\n\t            rightEdge.classList.add('fa-chevron-left');\r\n\t            rightEdge.classList.remove('fa-chevron-right');\r\n\t          }\r\n\t        }\r\n\t      } else {\r\n\t        var sibs = this._siblings(temp),\r\n\t            sibsVisible = sibs.length ? !sibs.some(function (el) {\r\n\t          return el.classList.contains('hidden');\r\n\t        }) : false;\r\n\t\r\n\t        leftEdge.classList.toggle('fa-chevron-right', sibsVisible);\r\n\t        leftEdge.classList.toggle('fa-chevron-left', !sibsVisible);\r\n\t        rightEdge.classList.toggle('fa-chevron-left', sibsVisible);\r\n\t        rightEdge.classList.toggle('fa-chevron-right', !sibsVisible);\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_hoverNode',\r\n\t    value: function _hoverNode(event) {\r\n\t      var node = event.target,\r\n\t          flag = false,\r\n\t          topEdge = node.querySelector(':scope > .topEdge'),\r\n\t          bottomEdge = node.querySelector(':scope > .bottomEdge'),\r\n\t          leftEdge = node.querySelector(':scope > .leftEdge');\r\n\t\r\n\t      if (event.type === 'mouseenter') {\r\n\t        if (topEdge) {\r\n\t          flag = this._getNodeState(node, 'parent').visible;\r\n\t          topEdge.classList.toggle('fa-chevron-up', !flag);\r\n\t          topEdge.classList.toggle('fa-chevron-down', flag);\r\n\t        }\r\n\t        if (bottomEdge) {\r\n\t          flag = this._getNodeState(node, 'children').visible;\r\n\t          bottomEdge.classList.toggle('fa-chevron-down', !flag);\r\n\t          bottomEdge.classList.toggle('fa-chevron-up', flag);\r\n\t        }\r\n\t        if (leftEdge) {\r\n\t          this._switchHorizontalArrow(node);\r\n\t        }\r\n\t      } else {\r\n\t        Array.from(node.querySelectorAll(':scope > .edge')).forEach(function (el) {\r\n\t          el.classList.remove('fa-chevron-up', 'fa-chevron-down', 'fa-chevron-right', 'fa-chevron-left');\r\n\t        });\r\n\t      }\r\n\t    }\r\n\t    // define node click event handler\r\n\t\r\n\t  }, {\r\n\t    key: '_clickNode',\r\n\t    value: function _clickNode(event) {\r\n\t      var clickedNode = event.currentTarget,\r\n\t          focusedNode = this.chart.querySelector('.focused');\r\n\t\r\n\t      if (focusedNode) {\r\n\t        focusedNode.classList.remove('focused');\r\n\t      }\r\n\t      clickedNode.classList.add('focused');\r\n\t    }\r\n\t    // build the parent node of specific node\r\n\t\r\n\t  }, {\r\n\t    key: '_buildParentNode',\r\n\t    value: function _buildParentNode(currentRoot, nodeData, callback) {\r\n\t      var that = this,\r\n\t          table = document.createElement('table');\r\n\t\r\n\t      //nodeData.relationship = '001';\r\n\t      \r\n\t      this._createNode(nodeData, 0).then(function (nodeDiv) {\r\n\t        var chart = that.chart;\r\n\t\r\n\t        nodeDiv.classList.remove('slide-up');\r\n\t        nodeDiv.classList.add('slide-down');\r\n\t        var parentTr = document.createElement('tr'),\r\n\t            superiorLine = document.createElement('tr'),\r\n\t            inferiorLine = document.createElement('tr'),\r\n\t            childrenTr = document.createElement('tr');\r\n\t\r\n\t        parentTr.setAttribute('class', 'hidden');\r\n\t        parentTr.innerHTML = '<td colspan=\"2\"></td>';\r\n\t        table.appendChild(parentTr);\r\n\t        superiorLine.setAttribute('class', 'lines hidden');\r\n\t        superiorLine.innerHTML = '<td colspan=\"2\"><div class=\"downLine\"></div></td>';\r\n\t        table.appendChild(superiorLine);\r\n\t        inferiorLine.setAttribute('class', 'lines hidden');\r\n\t        inferiorLine.innerHTML = '<td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td>';\r\n\t        table.appendChild(inferiorLine);\r\n\t        childrenTr.setAttribute('class', 'nodes');\r\n\t        childrenTr.innerHTML = '<td colspan=\"2\"></td>';\r\n\t        table.appendChild(childrenTr);\r\n\t        table.querySelector('td').appendChild(nodeDiv);\r\n\t        chart.insertBefore(table, chart.children[0]);\r\n\t        table.children[3].children[0].appendChild(chart.lastChild);\r\n\t        callback();\r\n\t      }).catch(function (err) {\r\n\t        console.error('Failed to create parent node', err);\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_switchVerticalArrow',\r\n\t    value: function _switchVerticalArrow(arrow) {\r\n\t      arrow.classList.toggle('fa-chevron-up');\r\n\t      arrow.classList.toggle('fa-chevron-down');\r\n\t    }\r\n\t    // show the parent node of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'showParent',\r\n\t    value: function showParent(node) {\r\n\t      // just show only one superior level\r\n\t      var temp = this._prevAll(this._closest(node, function (el) {\r\n\t        return el.classList.contains('nodes');\r\n\t      }));\r\n\t\r\n\t      this._removeClass(temp, 'hidden');\r\n\t      // just show only one line\r\n\t      this._addClass(Array(temp[0].children).slice(1, -1), 'hidden');\r\n\t      // show parent node with animation\r\n\t      var parent = temp[2].querySelector('.node');\r\n\t\r\n\t      this._one(parent, 'transitionend', function () {\r\n\t        parent.classList.remove('slide');\r\n\t        if (this._isInAction(node)) {\r\n\t          this._switchVerticalArrow(node.querySelector(':scope > .topEdge'));\r\n\t        }\r\n\t      }, this);\r\n\t      this._repaint(parent);\r\n\t      parent.classList.add('slide');\r\n\t      parent.classList.remove('slide-down');\r\n\t    }\r\n\t    // show the sibling nodes of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'showSiblings',\r\n\t    value: function showSiblings(node, direction) {\r\n\t      var _this3 = this;\r\n\t\r\n\t      // firstly, show the sibling td tags\r\n\t      var siblings = [],\r\n\t          temp = this._closest(node, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }).parentNode;\r\n\t\r\n\t      if (direction) {\r\n\t        siblings = direction === 'left' ? this._prevAll(temp) : this._nextAll(temp);\r\n\t      } else {\r\n\t        siblings = this._siblings(temp);\r\n\t      }\r\n\t      this._removeClass(siblings, 'hidden');\r\n\t      // secondly, show the lines\r\n\t      var upperLevel = this._prevAll(this._closest(node, function (el) {\r\n\t        return el.classList.contains('nodes');\r\n\t      }));\r\n\t\r\n\t      temp = Array.from(upperLevel[0].querySelectorAll(':scope > .hidden'));\r\n\t      if (direction) {\r\n\t        this._removeClass(temp.slice(0, siblings.length * 2), 'hidden');\r\n\t      } else {\r\n\t        this._removeClass(temp, 'hidden');\r\n\t      }\r\n\t      // thirdly, do some cleaning stuff\r\n\t      if (!this._getNodeState(node, 'parent').visible) {\r\n\t        this._removeClass(upperLevel, 'hidden');\r\n\t        var parent = upperLevel[2].querySelector('.node');\r\n\t\r\n\t        this._one(parent, 'transitionend', function (event) {\r\n\t          event.target.classList.remove('slide');\r\n\t        }, this);\r\n\t        this._repaint(parent);\r\n\t        parent.classList.add('slide');\r\n\t        parent.classList.remove('slide-down');\r\n\t      }\r\n\t      // lastly, show the sibling nodes with animation\r\n\t      siblings.forEach(function (sib) {\r\n\t        Array.from(sib.querySelectorAll('.node')).forEach(function (node) {\r\n\t          if (_this3._isVisible(node)) {\r\n\t            node.classList.add('slide');\r\n\t            node.classList.remove('slide-left', 'slide-right');\r\n\t          }\r\n\t        });\r\n\t      });\r\n\t      this._one(siblings[0].querySelector('.slide'), 'transitionend', function () {\r\n\t        var _this4 = this;\r\n\t\r\n\t        siblings.forEach(function (sib) {\r\n\t          _this4._removeClass(Array.from(sib.querySelectorAll('.slide')), 'slide');\r\n\t        });\r\n\t        if (this._isInAction(node)) {\r\n\t          this._switchHorizontalArrow(node);\r\n\t          node.querySelector('.topEdge').classList.remove('fa-chevron-up');\r\n\t          node.querySelector('.topEdge').classList.add('fa-chevron-down');\r\n\t        }\r\n\t      }, this);\r\n\t    }\r\n\t    // hide the sibling nodes of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'hideSiblings',\r\n\t    value: function hideSiblings(node, direction) {\r\n\t      var _this5 = this;\r\n\t\r\n\t      var nodeContainer = this._closest(node, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }).parentNode,\r\n\t          siblings = this._siblings(nodeContainer);\r\n\t\r\n\t      siblings.forEach(function (sib) {\r\n\t        if (sib.querySelector('.spinner')) {\r\n\t          _this5.chart.dataset.inAjax = false;\r\n\t        }\r\n\t      });\r\n\t\r\n\t      if (!direction || direction && direction === 'left') {\r\n\t        var preSibs = this._prevAll(nodeContainer);\r\n\t\r\n\t        preSibs.forEach(function (sib) {\r\n\t          Array.from(sib.querySelectorAll('.node')).forEach(function (node) {\r\n\t            if (_this5._isVisible(node)) {\r\n\t              node.classList.add('slide', 'slide-right');\r\n\t            }\r\n\t          });\r\n\t        });\r\n\t      }\r\n\t      if (!direction || direction && direction !== 'left') {\r\n\t        var nextSibs = this._nextAll(nodeContainer);\r\n\t\r\n\t        nextSibs.forEach(function (sib) {\r\n\t          Array.from(sib.querySelectorAll('.node')).forEach(function (node) {\r\n\t            if (_this5._isVisible(node)) {\r\n\t              node.classList.add('slide', 'slide-left');\r\n\t            }\r\n\t          });\r\n\t        });\r\n\t      }\r\n\t\r\n\t      var animatedNodes = [];\r\n\t\r\n\t      this._siblings(nodeContainer).forEach(function (sib) {\r\n\t        Array.prototype.push.apply(animatedNodes, Array.from(sib.querySelectorAll('.slide')));\r\n\t      });\r\n\t      var lines = [];\r\n\t\r\n\t      var _iteratorNormalCompletion2 = true;\r\n\t      var _didIteratorError2 = false;\r\n\t      var _iteratorError2 = undefined;\r\n\t\r\n\t      try {\r\n\t        for (var _iterator2 = animatedNodes[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\r\n\t          var _node = _step2.value;\r\n\t\r\n\t          var temp = this._closest(_node, function (el) {\r\n\t            return el.classList.contains('nodes');\r\n\t          }).previousElementSibling;\r\n\t\r\n\t          lines.push(temp);\r\n\t          lines.push(temp.previousElementSibling);\r\n\t        }\r\n\t      } catch (err) {\r\n\t        _didIteratorError2 = true;\r\n\t        _iteratorError2 = err;\r\n\t      } finally {\r\n\t        try {\r\n\t          if (!_iteratorNormalCompletion2 && _iterator2.return) {\r\n\t            _iterator2.return();\r\n\t          }\r\n\t        } finally {\r\n\t          if (_didIteratorError2) {\r\n\t            throw _iteratorError2;\r\n\t          }\r\n\t        }\r\n\t      }\r\n\t\r\n\t      lines = [].concat(_toConsumableArray(new Set(lines)));\r\n\t      lines.forEach(function (line) {\r\n\t        line.style.visibility = 'hidden';\r\n\t      });\r\n\t\r\n\t      this._one(animatedNodes[0], 'transitionend', function (event) {\r\n\t        var _this6 = this;\r\n\t\r\n\t        lines.forEach(function (line) {\r\n\t          line.removeAttribute('style');\r\n\t        });\r\n\t        var sibs = [];\r\n\t\r\n\t        if (direction) {\r\n\t          if (direction === 'left') {\r\n\t            sibs = this._prevAll(nodeContainer, ':not(.hidden)');\r\n\t          } else {\r\n\t            sibs = this._nextAll(nodeContainer, ':not(.hidden)');\r\n\t          }\r\n\t        } else {\r\n\t          sibs = this._siblings(nodeContainer);\r\n\t        }\r\n\t        var temp = Array.from(this._closest(nodeContainer, function (el) {\r\n\t          return el.classList.contains('nodes');\r\n\t        }).previousElementSibling.querySelectorAll(':scope > :not(.hidden)'));\r\n\t\r\n\t        var someLines = temp.slice(1, direction ? sibs.length * 2 + 1 : -1);\r\n\t\r\n\t        this._addClass(someLines, 'hidden');\r\n\t        this._removeClass(animatedNodes, 'slide');\r\n\t        sibs.forEach(function (sib) {\r\n\t          Array.from(sib.querySelectorAll('.node')).slice(1).forEach(function (node) {\r\n\t            if (_this6._isVisible(node)) {\r\n\t              node.classList.remove('slide-left', 'slide-right');\r\n\t              node.classList.add('slide-up');\r\n\t            }\r\n\t          });\r\n\t        });\r\n\t        sibs.forEach(function (sib) {\r\n\t          _this6._addClass(Array.from(sib.querySelectorAll('.lines')), 'hidden');\r\n\t          _this6._addClass(Array.from(sib.querySelectorAll('.nodes')), 'hidden');\r\n\t          _this6._addClass(Array.from(sib.querySelectorAll('.verticalNodes')), 'hidden');\r\n\t        });\r\n\t        this._addClass(sibs, 'hidden');\r\n\t\r\n\t        if (this._isInAction(node)) {\r\n\t          this._switchHorizontalArrow(node);\r\n\t        }\r\n\t      }, this);\r\n\t    }\r\n\t    // recursively hide the ancestor node and sibling nodes of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'hideAncestorsSiblings',\r\n\t    value: function hideAncestorsSiblings(node) {\r\n\t      var temp = Array.from(this._closest(node, function (el) {\r\n\t        return el.classList.contains('nodes');\r\n\t      }).parentNode.children).slice(0, 3);\r\n\t\r\n\t      if (temp[0].querySelector('.spinner')) {\r\n\t        this.chart.dataset.inAjax = false;\r\n\t      }\r\n\t      // hide the sibling nodes\r\n\t      if (this._getNodeState(node, 'siblings').visible) {\r\n\t        this.hideSiblings(node);\r\n\t      }\r\n\t      // hide the lines\r\n\t      var lines = temp.slice(1);\r\n\t\r\n\t      this._css(lines, 'visibility', 'hidden');\r\n\t      // hide the superior nodes with transition\r\n\t      var parent = temp[0].querySelector('.node'),\r\n\t          grandfatherVisible = this._getNodeState(parent, 'parent').visible;\r\n\t\r\n\t      if (parent && this._isVisible(parent)) {\r\n\t        parent.classList.add('slide', 'slide-down');\r\n\t        this._one(parent, 'transitionend', function () {\r\n\t          parent.classList.remove('slide');\r\n\t          this._removeAttr(lines, 'style');\r\n\t          this._addClass(temp, 'hidden');\r\n\t        }, this);\r\n\t      }\r\n\t      // if the current node has the parent node, hide it recursively\r\n\t      if (parent && grandfatherVisible) {\r\n\t        this.hideAncestorsSiblings(parent);\r\n\t      }\r\n\t    }\r\n\t    // exposed method\r\n\t\r\n\t  }, {\r\n\t    key: 'addParent',\r\n\t    value: function addParent(currentRoot, data) {\r\n\t      var that = this;\r\n\t\r\n\t      this._buildParentNode(currentRoot, data, function () {\r\n\t        if (!currentRoot.querySelector(':scope > .topEdge')) {\r\n\t          var topEdge = document.createElement('i');\r\n\t\r\n\t          topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\r\n\t          currentRoot.appendChild(topEdge);\r\n\t        }\r\n\t        that.showParent(currentRoot);\r\n\t      });\r\n\t    }\r\n\t    // start up loading status for requesting new nodes\r\n\t\r\n\t  }, {\r\n\t    key: '_startLoading',\r\n\t    value: function _startLoading(arrow, node) {\r\n\t      var opts = this.options,\r\n\t          chart = this.chart;\r\n\t\r\n\t      if (typeof chart.dataset.inAjax !== 'undefined' && chart.dataset.inAjax === 'true') {\r\n\t        return false;\r\n\t      }\r\n\t\r\n\t      arrow.classList.add('hidden');\r\n\t      var spinner = document.createElement('i');\r\n\t\r\n\t      spinner.setAttribute('class', 'fa fa-circle-o-notch fa-spin spinner');\r\n\t      node.appendChild(spinner);\r\n\t      this._addClass(Array.from(node.querySelectorAll(':scope > *:not(.spinner)')), 'hazy');\r\n\t      chart.dataset.inAjax = true;\r\n\t\r\n\t      var exportBtn = this.chartContainer.querySelector('.oc-export-btn' + (opts.chartClass !== '' ? '.' + opts.chartClass : ''));\r\n\t\r\n\t      if (exportBtn) {\r\n\t        exportBtn.disabled = true;\r\n\t      }\r\n\t      return true;\r\n\t    }\r\n\t    // terminate loading status for requesting new nodes\r\n\t\r\n\t  }, {\r\n\t    key: '_endLoading',\r\n\t    value: function _endLoading(arrow, node) {\r\n\t      var opts = this.options;\r\n\t\r\n\t      arrow.classList.remove('hidden');\r\n\t      node.querySelector(':scope > .spinner').remove();\r\n\t      this._removeClass(Array.from(node.querySelectorAll(':scope > .hazy')), 'hazy');\r\n\t      this.chart.dataset.inAjax = false;\r\n\t      var exportBtn = this.chartContainer.querySelector('.oc-export-btn' + (opts.chartClass !== '' ? '.' + opts.chartClass : ''));\r\n\t\r\n\t      if (exportBtn) {\r\n\t        exportBtn.disabled = false;\r\n\t      }\r\n\t    }\r\n\t    // define click event handler for the top edge\r\n\t\r\n\t  }, {\r\n\t    key: '_clickTopEdge',\r\n\t    value: function _clickTopEdge(event) {\r\n\t      event.stopPropagation();\r\n\t      var that = this,\r\n\t          topEdge = event.target,\r\n\t          node = topEdge.parentNode,\r\n\t          parentState = this._getNodeState(node, 'parent'),\r\n\t          opts = this.options;\r\n\t\r\n\t      if (parentState.exist) {\r\n\t        var temp = this._closest(node, function (el) {\r\n\t          return el.classList.contains('nodes');\r\n\t        });\r\n\t        var parent = temp.parentNode.firstChild.querySelector('.node');\r\n\t\r\n\t        if (parent.classList.contains('slide')) {\r\n\t          return;\r\n\t        }\r\n\t        // hide the ancestor nodes and sibling nodes of the specified node\r\n\t        if (parentState.visible) {\r\n\t          this.hideAncestorsSiblings(node);\r\n\t          this._one(parent, 'transitionend', function () {\r\n\t            if (this._isInAction(node)) {\r\n\t              this._switchVerticalArrow(topEdge);\r\n\t              this._switchHorizontalArrow(node);\r\n\t            }\r\n\t          }, this);\r\n\t        } else {\r\n\t          // show the ancestors and siblings\r\n\t          this.showParent(node);\r\n\t        }\r\n\t      } else {\r\n\t        // load the new parent node of the specified node by ajax request\r\n\t        var nodeId = topEdge.parentNode.id;\r\n\t\r\n\t        // start up loading status\r\n\t        if (this._startLoading(topEdge, node)) {\r\n\t          // load new nodes\r\n\t          this._getJSON(typeof opts.ajaxURL.parent === 'function' ? opts.ajaxURL.parent(node.dataset.source) : opts.ajaxURL.parent + nodeId).then(function (resp) {\r\n\t            if (that.chart.dataset.inAjax === 'true') {\r\n\t              if (Object.keys(resp).length) {\r\n\t                that.addParent(node, resp);\r\n\t              }\r\n\t            }\r\n\t          }).catch(function (err) {\r\n\t            console.error('Failed to get parent node data.', err);\r\n\t          }).finally(function () {\r\n\t            that._endLoading(topEdge, node);\r\n\t          });\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    // recursively hide the descendant nodes of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'hideDescendants',\r\n\t    value: function hideDescendants(node) {\r\n\t      var that = this,\r\n\t          temp = this._nextAll(node.parentNode.parentNode),\r\n\t          lines = [];\r\n\t\r\n\t      if (temp[2].querySelector('.spinner')) {\r\n\t        this.chart.dataset.inAjax = false;\r\n\t      }\r\n\t      var descendants = Array.from(temp[2].querySelectorAll('.node')).filter(function (el) {\r\n\t        return that._isVisible(el);\r\n\t      }),\r\n\t          isVerticalDesc = temp[2].classList.contains('verticalNodes');\r\n\t\r\n\t      if (!isVerticalDesc) {\r\n\t        descendants.forEach(function (desc) {\r\n\t          Array.prototype.push.apply(lines, that._prevAll(that._closest(desc, function (el) {\r\n\t            return el.classList.contains('nodes');\r\n\t          }), '.lines'));\r\n\t        });\r\n\t        lines = [].concat(_toConsumableArray(new Set(lines)));\r\n\t        this._css(lines, 'visibility', 'hidden');\r\n\t      }\r\n\t      this._one(descendants[0], 'transitionend', function (event) {\r\n\t        this._removeClass(descendants, 'slide');\r\n\t        if (isVerticalDesc) {\r\n\t          that._addClass(temp, 'hidden');\r\n\t        } else {\r\n\t          lines.forEach(function (el) {\r\n\t            el.removeAttribute('style');\r\n\t            el.classList.add('hidden');\r\n\t            el.parentNode.lastChild.classList.add('hidden');\r\n\t          });\r\n\t          this._addClass(Array.from(temp[2].querySelectorAll('.verticalNodes')), 'hidden');\r\n\t        }\r\n\t        if (this._isInAction(node)) {\r\n\t          this._switchVerticalArrow(node.querySelector('.bottomEdge'));\r\n\t        }\r\n\t      }, this);\r\n\t      this._addClass(descendants, 'slide slide-up');\r\n\t    }\r\n\t    // show the children nodes of the specified node\r\n\t\r\n\t  }, {\r\n\t    key: 'showDescendants',\r\n\t    value: function showDescendants(node) {\r\n\t      var _this7 = this;\r\n\t\r\n\t      var that = this,\r\n\t          temp = this._nextAll(node.parentNode.parentNode),\r\n\t          descendants = [];\r\n\t\r\n\t      this._removeClass(temp, 'hidden');\r\n\t      if (temp.some(function (el) {\r\n\t        return el.classList.contains('verticalNodes');\r\n\t      })) {\r\n\t        temp.forEach(function (el) {\r\n\t          Array.prototype.push.apply(descendants, Array.from(el.querySelectorAll('.node')).filter(function (el) {\r\n\t            return that._isVisible(el);\r\n\t          }));\r\n\t        });\r\n\t      } else {\r\n\t        Array.from(temp[2].children).forEach(function (el) {\r\n\t          Array.prototype.push.apply(descendants, Array.from(el.querySelector('tr').querySelectorAll('.node')).filter(function (el) {\r\n\t            return that._isVisible(el);\r\n\t          }));\r\n\t        });\r\n\t      }\r\n\t      // the two following statements are used to enforce browser to repaint\r\n\t      this._repaint(descendants[0]);\r\n\t      this._one(descendants[0], 'transitionend', function (event) {\r\n\t        _this7._removeClass(descendants, 'slide');\r\n\t        if (_this7._isInAction(node)) {\r\n\t          _this7._switchVerticalArrow(node.querySelector('.bottomEdge'));\r\n\t        }\r\n\t      }, this);\r\n\t      this._addClass(descendants, 'slide');\r\n\t      this._removeClass(descendants, 'slide-up');\r\n\t    }\r\n\t    // build the child nodes of specific node\r\n\t\r\n\t  }, {\r\n\t    key: '_buildChildNode',\r\n\t    value: function _buildChildNode(appendTo, nodeData, callback) {\r\n\t      var data = nodeData.children || nodeData.siblings;\r\n\t\r\n\t      appendTo.querySelector('td').setAttribute('colSpan', data.length * 2);\r\n\t      this.buildHierarchy(appendTo, { 'children': data }, 0, callback);\r\n\t    }\r\n\t    // exposed method\r\n\t\r\n\t  }, {\r\n\t    key: 'addChildren',\r\n\t    value: function addChildren(node, data) {\r\n\t      var that = this,\r\n\t          opts = this.options,\r\n\t          count = 0;\r\n\t\r\n\t      this.chart.dataset.inEdit = 'addChildren';\r\n\t      this._buildChildNode.call(this, this._closest(node, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }), data, function () {\r\n\t        if (++count === data.children.length) {\r\n\t          if (!node.querySelector('.bottomEdge')) {\r\n\t            var bottomEdge = document.createElement('i');\r\n\t\r\n\t            bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\r\n\t            node.appendChild(bottomEdge);\r\n\t          }\r\n\t          if (!node.querySelector('.symbol')) {\r\n\t            var symbol = document.createElement('i');\r\n\t\r\n\t            symbol.setAttribute('class', 'fa ' + opts.parentNodeSymbol + ' symbol');\r\n\t            node.querySelector(':scope > .title').appendChild(symbol);\r\n\t          }\r\n\t          that.showDescendants(node);\r\n\t          that.chart.dataset.inEdit = '';\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t    // bind click event handler for the bottom edge\r\n\t\r\n\t  }, {\r\n\t    key: '_clickBottomEdge',\r\n\t    value: function _clickBottomEdge(event) {\r\n\t      var _this8 = this;\r\n\t\r\n\t      event.stopPropagation();\r\n\t      var that = this,\r\n\t          opts = this.options,\r\n\t          bottomEdge = event.target,\r\n\t          node = bottomEdge.parentNode,\r\n\t          childrenState = this._getNodeState(node, 'children');\r\n\t\r\n\t      if (childrenState.exist) {\r\n\t        var temp = this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TR';\r\n\t        }).parentNode.children[3];\r\n\t\r\n\t        if (Array.from(temp.querySelectorAll('.node')).some(function (node) {\r\n\t          return _this8._isVisible(node) && node.classList.contains('slide');\r\n\t        })) {\r\n\t          return;\r\n\t        }\r\n\t        // hide the descendant nodes of the specified node\r\n\t        if (childrenState.visible) {\r\n\t          this.hideDescendants(node);\r\n\t        } else {\r\n\t          // show the descendants\r\n\t          this.showDescendants(node);\r\n\t        }\r\n\t      } else {\r\n\t        // load the new children nodes of the specified node by ajax request\r\n\t        var nodeId = bottomEdge.parentNode.id;\r\n\t\r\n\t        if (this._startLoading(bottomEdge, node)) {\r\n\t          this._getJSON(typeof opts.ajaxURL.children === 'function' ? opts.ajaxURL.children(node.dataset.source) : opts.ajaxURL.children + nodeId).then(function (resp) {\r\n\t            if (that.chart.dataset.inAjax === 'true') {\r\n\t              if (resp.children.length) {\r\n\t                that.addChildren(node, resp);\r\n\t              }\r\n\t            }\r\n\t          }).catch(function (err) {\r\n\t            console.error('Failed to get children nodes data', err);\r\n\t          }).finally(function () {\r\n\t            that._endLoading(bottomEdge, node);\r\n\t          });\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    // subsequent processing of build sibling nodes\r\n\t\r\n\t  }, {\r\n\t    key: '_complementLine',\r\n\t    value: function _complementLine(oneSibling, siblingCount, existingSibligCount) {\r\n\t      var temp = oneSibling.parentNode.parentNode.children;\r\n\t\r\n\t      temp[0].children[0].setAttribute('colspan', siblingCount * 2);\r\n\t      temp[1].children[0].setAttribute('colspan', siblingCount * 2);\r\n\t      for (var i = 0; i < existingSibligCount; i++) {\r\n\t        var rightLine = document.createElement('td'),\r\n\t            leftLine = document.createElement('td');\r\n\t\r\n\t        rightLine.setAttribute('class', 'rightLine topLine');\r\n\t        rightLine.innerHTML = '&nbsp;';\r\n\t        temp[2].insertBefore(rightLine, temp[2].children[1]);\r\n\t        leftLine.setAttribute('class', 'leftLine topLine');\r\n\t        leftLine.innerHTML = '&nbsp;';\r\n\t        temp[2].insertBefore(leftLine, temp[2].children[1]);\r\n\t      }\r\n\t    }\r\n\t    // build the sibling nodes of specific node\r\n\t\r\n\t  }, {\r\n\t    key: '_buildSiblingNode',\r\n\t    value: function _buildSiblingNode(nodeChart, nodeData, callback) {\r\n\t      var _this9 = this;\r\n\t\r\n\t      var that = this,\r\n\t          newSiblingCount = nodeData.siblings ? nodeData.siblings.length : nodeData.children.length,\r\n\t          existingSibligCount = nodeChart.parentNode.nodeName === 'TD' ? this._closest(nodeChart, function (el) {\r\n\t        return el.nodeName === 'TR';\r\n\t      }).children.length : 1,\r\n\t          siblingCount = existingSibligCount + newSiblingCount,\r\n\t          insertPostion = siblingCount > 1 ? Math.floor(siblingCount / 2 - 1) : 0;\r\n\t\r\n\t      // just build the sibling nodes for the specific node\r\n\t      if (nodeChart.parentNode.nodeName === 'TD') {\r\n\t        (function () {\r\n\t          var temp = _this9._prevAll(nodeChart.parentNode.parentNode);\r\n\t\r\n\t          temp[0].remove();\r\n\t          temp[1].remove();\r\n\t          var childCount = 0;\r\n\t\r\n\t          that._buildChildNode.call(that, that._closest(nodeChart.parentNode, function (el) {\r\n\t            return el.nodeName === 'TABLE';\r\n\t          }), nodeData, function () {\r\n\t            if (++childCount === newSiblingCount) {\r\n\t              (function () {\r\n\t                var siblingTds = Array.from(that._closest(nodeChart.parentNode, function (el) {\r\n\t                  return el.nodeName === 'TABLE';\r\n\t                }).lastChild.children);\r\n\t\r\n\t                if (existingSibligCount > 1) {\r\n\t                  Array.from(nodeChart.parentNode.children).forEach(function (el) {\r\n\t                    siblingTds[0].parentNode.insertBefore(el, siblingTds[0]);\r\n\t                  });\r\n\t                  nodeChart.parentNode.parentNode.remove();\r\n\t                  that._complementLine(siblingTds[0], siblingCount, existingSibligCount);\r\n\t                  that._addClass(siblingTds, 'hidden');\r\n\t                  siblingTds.forEach(function (el) {\r\n\t                    that._addClass(el.querySelectorAll('.node'), 'slide-left');\r\n\t                  });\r\n\t                } else {\r\n\t                  var _temp = nodeChart.parentNode.parentNode;\r\n\t\r\n\t                  siblingTds[insertPostion].parentNode.insertBefore(nodeChart.parentNode, siblingTds[insertPostion + 1]);\r\n\t                  _temp.remove();\r\n\t                  that._complementLine(siblingTds[insertPostion], siblingCount, 1);\r\n\t                  that._addClass(siblingTds, 'hidden');\r\n\t                  that._addClass(that._getDescElements(siblingTds.slice(0, insertPostion + 1), '.node'), 'slide-right');\r\n\t                  that._addClass(that._getDescElements(siblingTds.slice(insertPostion + 1), '.node'), 'slide-left');\r\n\t                }\r\n\t                callback();\r\n\t              })();\r\n\t            }\r\n\t          });\r\n\t        })();\r\n\t      } else {\r\n\t        (function () {\r\n\t          // build the sibling nodes and parent node for the specific ndoe\r\n\t          var nodeCount = 0;\r\n\t\r\n\t          that.buildHierarchy.call(that, that.chart, nodeData, 0, function () {\r\n\t            if (++nodeCount === siblingCount) {\r\n\t              var _temp2 = nodeChart.nextElementSibling.children[3].children[insertPostion],\r\n\t                  td = document.createElement('td');\r\n\t\r\n\t              td.setAttribute('colspan', 2);\r\n\t              td.appendChild(nodeChart);\r\n\t              _temp2.parentNode.insertBefore(td, _temp2.nextElementSibling);\r\n\t              that._complementLine(_temp2, siblingCount, 1);\r\n\t\r\n\t              var temp2 = that._closest(nodeChart, function (el) {\r\n\t                return el.classList && el.classList.contains('nodes');\r\n\t              }).parentNode.children[0];\r\n\t\r\n\t              temp2.classList.add('hidden');\r\n\t              that._addClass(Array.from(temp2.querySelectorAll('.node')), 'slide-down');\r\n\t\r\n\t              var temp3 = _this9._siblings(nodeChart.parentNode);\r\n\t\r\n\t              that._addClass(temp3, 'hidden');\r\n\t              that._addClass(that._getDescElements(temp3.slice(0, insertPostion), '.node'), 'slide-right');\r\n\t              that._addClass(that._getDescElements(temp3.slice(insertPostion), '.node'), 'slide-left');\r\n\t              callback();\r\n\t            }\r\n\t          });\r\n\t        })();\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'addSiblings',\r\n\t    value: function addSiblings(node, data) {\r\n\t      var that = this;\r\n\t\r\n\t      this.chart.dataset.inEdit = 'addSiblings';\r\n\t      this._buildSiblingNode.call(this, this._closest(node, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }), data, function () {\r\n\t        that._closest(node, function (el) {\r\n\t          return el.classList && el.classList.contains('nodes');\r\n\t        }).dataset.siblingsLoaded = true;\r\n\t        if (!node.querySelector('.leftEdge')) {\r\n\t          var rightEdge = document.createElement('i'),\r\n\t              leftEdge = document.createElement('i');\r\n\t\r\n\t          rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\r\n\t          node.appendChild(rightEdge);\r\n\t          leftEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\r\n\t          node.appendChild(leftEdge);\r\n\t        }\r\n\t        that.showSiblings(node);\r\n\t        that.chart.dataset.inEdit = '';\r\n\t      });\r\n\t    }\r\n\t    // bind click event handler for the left and right edges\r\n\t\r\n\t  }, {\r\n\t    key: '_clickHorizontalEdge',\r\n\t    value: function _clickHorizontalEdge(event) {\r\n\t      var _this10 = this;\r\n\t\r\n\t      event.stopPropagation();\r\n\t      var that = this,\r\n\t          opts = this.options,\r\n\t          hEdge = event.target,\r\n\t          node = hEdge.parentNode,\r\n\t          siblingsState = this._getNodeState(node, 'siblings');\r\n\t\r\n\t      if (siblingsState.exist) {\r\n\t        var temp = this._closest(node, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode,\r\n\t            siblings = this._siblings(temp);\r\n\t\r\n\t        if (siblings.some(function (el) {\r\n\t          var node = el.querySelector('.node');\r\n\t\r\n\t          return _this10._isVisible(node) && node.classList.contains('slide');\r\n\t        })) {\r\n\t          return;\r\n\t        }\r\n\t        if (opts.toggleSiblingsResp) {\r\n\t          var prevSib = this._closest(node, function (el) {\r\n\t            return el.nodeName === 'TABLE';\r\n\t          }).parentNode.previousElementSibling,\r\n\t              nextSib = this._closest(node, function (el) {\r\n\t            return el.nodeName === 'TABLE';\r\n\t          }).parentNode.nextElementSibling;\r\n\t\r\n\t          if (hEdge.classList.contains('leftEdge')) {\r\n\t            if (prevSib.classList.contains('hidden')) {\r\n\t              this.showSiblings(node, 'left');\r\n\t            } else {\r\n\t              this.hideSiblings(node, 'left');\r\n\t            }\r\n\t          } else {\r\n\t            if (nextSib.classList.contains('hidden')) {\r\n\t              this.showSiblings(node, 'right');\r\n\t            } else {\r\n\t              this.hideSiblings(node, 'right');\r\n\t            }\r\n\t          }\r\n\t        } else {\r\n\t          if (siblingsState.visible) {\r\n\t            this.hideSiblings(node);\r\n\t          } else {\r\n\t            this.showSiblings(node);\r\n\t          }\r\n\t        }\r\n\t      } else {\r\n\t        // load the new sibling nodes of the specified node by ajax request\r\n\t        var nodeId = hEdge.parentNode.id,\r\n\t            url = this._getNodeState(node, 'parent').exist ? typeof opts.ajaxURL.siblings === 'function' ? opts.ajaxURL.siblings(JSON.parse(node.dataset.source)) : opts.ajaxURL.siblings + nodeId : typeof opts.ajaxURL.families === 'function' ? opts.ajaxURL.families(JSON.parse(node.dataset.source)) : opts.ajaxURL.families + nodeId;\r\n\t\r\n\t        if (this._startLoading(hEdge, node)) {\r\n\t          this._getJSON(url).then(function (resp) {\r\n\t            if (that.chart.dataset.inAjax === 'true') {\r\n\t              if (resp.siblings || resp.children) {\r\n\t                that.addSiblings(node, resp);\r\n\t              }\r\n\t            }\r\n\t          }).catch(function (err) {\r\n\t            console.error('Failed to get sibling nodes data', err);\r\n\t          }).finally(function () {\r\n\t            that._endLoading(hEdge, node);\r\n\t          });\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t    // event handler for toggle buttons in Hybrid(horizontal + vertical) OrgChart\r\n\t\r\n\t  }, {\r\n\t    key: '_clickToggleButton',\r\n\t    value: function _clickToggleButton(event) {\r\n\t      var that = this,\r\n\t          toggleBtn = event.target,\r\n\t          descWrapper = toggleBtn.parentNode.nextElementSibling,\r\n\t          descendants = descWrapper.querySelectorAll('.node'),\r\n\t          children = descWrapper.children.map(function (item) {\r\n\t        return item.querySelector('.node');\r\n\t      });\r\n\t\r\n\t      if (children.some(function (item) {\r\n\t        return item.classList.contains('.slide');\r\n\t      })) {\r\n\t        return;\r\n\t      }\r\n\t      toggleBtn.classList.toggle('fa-plus-square');\r\n\t      toggleBtn.classList.toggle('fa-minus-square');\r\n\t      if (descendants[0].classList.contains('.slide-up')) {\r\n\t        descWrapper.classList.remove('hidden');\r\n\t        this._repaint(children[0]);\r\n\t        this._addClass(children, 'slide');\r\n\t        this._removeClass(children, 'slide-up');\r\n\t        children[0].addEventListener('transitionend', function () {\r\n\t          that._removeClass(children, 'slide');\r\n\t        }, { 'once': true });\r\n\t      } else {\r\n\t        this._addClass(descendants, 'slide slide-up');\r\n\t        descendants[0].addEventListener('transitionend', function () {\r\n\t          that._removeClass(descendants, 'slide');\r\n\t          var ul = this._closest(descendants[0], function (el) {\r\n\t            return el.nodeName === 'ul';\r\n\t          });\r\n\t\r\n\t          ul.classList.add('hidden');\r\n\t        }, { 'once': true });\r\n\t        var subToggleBtn = descendants[0].querySelector('.toggleBtn').classList.remove('fa-minus-square');\r\n\t\r\n\t        subToggleBtn.classList.add('fa-plus-square');\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_dispatchClickEvent',\r\n\t    value: function _dispatchClickEvent(event) {\r\n\t      var classList = event.target.classList;\r\n\t\r\n\t      if (classList.contains('topEdge')) {\r\n\t        this._clickTopEdge(event);\r\n\t      } else if (classList.contains('rightEdge') || classList.contains('leftEdge')) {\r\n\t        this._clickHorizontalEdge(event);\r\n\t      } else if (classList.contains('bottomEdge')) {\r\n\t        this._clickBottomEdge(event);\r\n\t      } else if (classList.contains('toggleBtn')) {\r\n\t        this._clickToggleButton(event);\r\n\t      } else {\r\n\t        this._clickNode(event);\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onDragStart',\r\n\t    value: function _onDragStart(event) {\r\n\t      var nodeDiv = event.target,\r\n\t          opts = this.options,\r\n\t          isFirefox = /firefox/.test(window.navigator.userAgent.toLowerCase());\r\n\t\r\n\t      if (isFirefox) {\r\n\t        event.dataTransfer.setData('text/html', 'hack for firefox');\r\n\t      }\r\n\t      // if users enable zoom or direction options\r\n\t      if (this.chart.style.transform) {\r\n\t        var ghostNode = void 0,\r\n\t            nodeCover = void 0;\r\n\t\r\n\t        if (!document.querySelector('.ghost-node')) {\r\n\t          ghostNode = document.createElementNS('http://www.w3.org/2000/svg', 'svg');\r\n\t          ghostNode.classList.add('ghost-node');\r\n\t          nodeCover = document.createElementNS('http://www.w3.org/2000/svg', 'rect');\r\n\t          ghostNode.appendChild(nodeCover);\r\n\t          this.chart.appendChild(ghostNode);\r\n\t        } else {\r\n\t          ghostNode = this.chart.querySelector(':scope > .ghost-node');\r\n\t          nodeCover = ghostNode.children[0];\r\n\t        }\r\n\t        var transValues = this.chart.style.transform.split(','),\r\n\t            scale = Math.abs(window.parseFloat(opts.direction === 't2b' || opts.direction === 'b2t' ? transValues[0].slice(transValues[0].indexOf('(') + 1) : transValues[1]));\r\n\t\r\n\t        ghostNode.setAttribute('width', nodeDiv.offsetWidth);\r\n\t        ghostNode.setAttribute('height', nodeDiv.offsetHeight);\r\n\t        nodeCover.setAttribute('x', 5 * scale);\r\n\t        nodeCover.setAttribute('y', 5 * scale);\r\n\t        nodeCover.setAttribute('width', 120 * scale);\r\n\t        nodeCover.setAttribute('height', 40 * scale);\r\n\t        nodeCover.setAttribute('rx', 4 * scale);\r\n\t        nodeCover.setAttribute('ry', 4 * scale);\r\n\t        nodeCover.setAttribute('stroke-width', 1 * scale);\r\n\t        var xOffset = event.offsetX * scale,\r\n\t            yOffset = event.offsetY * scale;\r\n\t\r\n\t        if (opts.direction === 'l2r') {\r\n\t          xOffset = event.offsetY * scale;\r\n\t          yOffset = event.offsetX * scale;\r\n\t        } else if (opts.direction === 'r2l') {\r\n\t          xOffset = nodeDiv.offsetWidth - event.offsetY * scale;\r\n\t          yOffset = event.offsetX * scale;\r\n\t        } else if (opts.direction === 'b2t') {\r\n\t          xOffset = nodeDiv.offsetWidth - event.offsetX * scale;\r\n\t          yOffset = nodeDiv.offsetHeight - event.offsetY * scale;\r\n\t        }\r\n\t        if (isFirefox) {\r\n\t          // hack for old version of Firefox(< 48.0)\r\n\t          var ghostNodeWrapper = document.createElement('img');\r\n\t\r\n\t          ghostNodeWrapper.src = 'data:image/svg+xml;utf8,' + new XMLSerializer().serializeToString(ghostNode);\r\n\t          event.dataTransfer.setDragImage(ghostNodeWrapper, xOffset, yOffset);\r\n\t          nodeCover.setAttribute('fill', 'rgb(255, 255, 255)');\r\n\t          nodeCover.setAttribute('stroke', 'rgb(191, 0, 0)');\r\n\t        } else {\r\n\t          event.dataTransfer.setDragImage(ghostNode, xOffset, yOffset);\r\n\t        }\r\n\t      }\r\n\t      var dragged = event.target,\r\n\t          dragZone = this._closest(dragged, function (el) {\r\n\t        return el.classList && el.classList.contains('nodes');\r\n\t      }).parentNode.children[0].querySelector('.node'),\r\n\t          dragHier = Array.from(this._closest(dragged, function (el) {\r\n\t        return el.nodeName === 'TABLE';\r\n\t      }).querySelectorAll('.node'));\r\n\t\r\n\t      this.dragged = dragged;\r\n\t      Array.from(this.chart.querySelectorAll('.node')).forEach(function (node) {\r\n\t        if (!dragHier.includes(node)) {\r\n\t          if (opts.dropCriteria) {\r\n\t            if (opts.dropCriteria(dragged, dragZone, node)) {\r\n\t              node.classList.add('allowedDrop');\r\n\t            }\r\n\t          } else {\r\n\t            node.classList.add('allowedDrop');\r\n\t          }\r\n\t        }\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onDragOver',\r\n\t    value: function _onDragOver(event) {\r\n\t      event.preventDefault();\r\n\t      var dropZone = event.currentTarget;\r\n\t\r\n\t      if (!dropZone.classList.contains('allowedDrop')) {\r\n\t        event.dataTransfer.dropEffect = 'none';\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onDragEnd',\r\n\t    value: function _onDragEnd(event) {\r\n\t      Array.from(this.chart.querySelectorAll('.allowedDrop')).forEach(function (el) {\r\n\t        el.classList.remove('allowedDrop');\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onDrop',\r\n\t    value: function _onDrop(event) {\r\n\t      var dropZone = event.currentTarget,\r\n\t          chart = this.chart,\r\n\t          dragged = this.dragged,\r\n\t          dragZone = this._closest(dragged, function (el) {\r\n\t        return el.classList && el.classList.contains('nodes');\r\n\t      }).parentNode.children[0].children[0];\r\n\t\r\n\t      this._removeClass(Array.from(chart.querySelectorAll('.allowedDrop')), 'allowedDrop');\r\n\t      // firstly, deal with the hierarchy of drop zone\r\n\t      if (!dropZone.parentNode.parentNode.nextElementSibling) {\r\n\t        // if the drop zone is a leaf node\r\n\t        var bottomEdge = document.createElement('i');\r\n\t\r\n\t        bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\r\n\t        dropZone.appendChild(bottomEdge);\r\n\t        dropZone.parentNode.setAttribute('colspan', 2);\r\n\t        var table = this._closest(dropZone, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }),\r\n\t            upperTr = document.createElement('tr'),\r\n\t            lowerTr = document.createElement('tr'),\r\n\t            nodeTr = document.createElement('tr');\r\n\t\r\n\t        upperTr.setAttribute('class', 'lines');\r\n\t        upperTr.innerHTML = '<td colspan=\"2\"><div class=\"downLine\"></div></td>';\r\n\t        table.appendChild(upperTr);\r\n\t        lowerTr.setAttribute('class', 'lines');\r\n\t        lowerTr.innerHTML = '<td class=\"rightLine\">&nbsp;</td><td class=\"leftLine\">&nbsp;</td>';\r\n\t        table.appendChild(lowerTr);\r\n\t        nodeTr.setAttribute('class', 'nodes');\r\n\t        table.appendChild(nodeTr);\r\n\t        Array.from(dragged.querySelectorAll('.horizontalEdge')).forEach(function (hEdge) {\r\n\t          dragged.removeChild(hEdge);\r\n\t        });\r\n\t        var draggedTd = this._closest(dragged, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode;\r\n\t\r\n\t        nodeTr.appendChild(draggedTd);\r\n\t      } else {\r\n\t        var dropColspan = window.parseInt(dropZone.parentNode.colSpan) + 2;\r\n\t\r\n\t        dropZone.parentNode.setAttribute('colspan', dropColspan);\r\n\t        dropZone.parentNode.parentNode.nextElementSibling.children[0].setAttribute('colspan', dropColspan);\r\n\t        if (!dragged.querySelector('.horizontalEdge')) {\r\n\t          var rightEdge = document.createElement('i'),\r\n\t              leftEdge = document.createElement('i');\r\n\t\r\n\t          rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\r\n\t          dragged.appendChild(rightEdge);\r\n\t          leftEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\r\n\t          dragged.appendChild(leftEdge);\r\n\t        }\r\n\t        var temp = dropZone.parentNode.parentNode.nextElementSibling.nextElementSibling,\r\n\t            leftline = document.createElement('td'),\r\n\t            rightline = document.createElement('td');\r\n\t\r\n\t        leftline.setAttribute('class', 'leftLine topLine');\r\n\t        leftline.innerHTML = '&nbsp;';\r\n\t        temp.insertBefore(leftline, temp.children[1]);\r\n\t        rightline.setAttribute('class', 'rightLine topLine');\r\n\t        rightline.innerHTML = '&nbsp;';\r\n\t        temp.insertBefore(rightline, temp.children[2]);\r\n\t        temp.nextElementSibling.appendChild(this._closest(dragged, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode);\r\n\t\r\n\t        var dropSibs = this._siblings(this._closest(dragged, function (el) {\r\n\t          return el.nodeName === 'TABLE';\r\n\t        }).parentNode).map(function (el) {\r\n\t          return el.querySelector('.node');\r\n\t        });\r\n\t\r\n\t        if (dropSibs.length === 1) {\r\n\t          var _rightEdge = document.createElement('i'),\r\n\t              _leftEdge = document.createElement('i');\r\n\t\r\n\t          _rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\r\n\t          dropSibs[0].appendChild(_rightEdge);\r\n\t          _leftEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\r\n\t          dropSibs[0].appendChild(_leftEdge);\r\n\t        }\r\n\t      }\r\n\t      // secondly, deal with the hierarchy of dragged node\r\n\t      var dragColSpan = window.parseInt(dragZone.colSpan);\r\n\t\r\n\t      if (dragColSpan > 2) {\r\n\t        dragZone.setAttribute('colspan', dragColSpan - 2);\r\n\t        dragZone.parentNode.nextElementSibling.children[0].setAttribute('colspan', dragColSpan - 2);\r\n\t        var _temp3 = dragZone.parentNode.nextElementSibling.nextElementSibling;\r\n\t\r\n\t        _temp3.children[1].remove();\r\n\t        _temp3.children[1].remove();\r\n\t\r\n\t        var dragSibs = Array.from(dragZone.parentNode.parentNode.children[3].children).map(function (td) {\r\n\t          return td.querySelector('.node');\r\n\t        });\r\n\t\r\n\t        if (dragSibs.length === 1) {\r\n\t          dragSibs[0].querySelector('.leftEdge').remove();\r\n\t          dragSibs[0].querySelector('.rightEdge').remove();\r\n\t        }\r\n\t      } else {\r\n\t        dragZone.removeAttribute('colspan');\r\n\t        dragZone.querySelector('.node').removeChild(dragZone.querySelector('.bottomEdge'));\r\n\t        Array.from(dragZone.parentNode.parentNode.children).slice(1).forEach(function (tr) {\r\n\t          return tr.remove();\r\n\t        });\r\n\t      }\r\n\t      var customE = new CustomEvent('nodedropped.orgchart', { 'detail': {\r\n\t          'draggedNode': dragged,\r\n\t          'dragZone': dragZone.children[0],\r\n\t          'dropZone': dropZone\r\n\t        } });\r\n\t\r\n\t      chart.dispatchEvent(customE);\r\n\t    }\r\n\t    // create node\r\n\t\r\n\t  }, {\r\n\t    key: '_createNode',\r\n\t    value: function _createNode(nodeData, level) {\r\n\t      var that = this,\r\n\t          opts = this.options;\r\n\t\r\n\t      return new Promise(function (resolve, reject) {\r\n\t        if (nodeData.children) {\r\n\t          var _iteratorNormalCompletion3 = true;\r\n\t          var _didIteratorError3 = false;\r\n\t          var _iteratorError3 = undefined;\r\n\t\r\n\t          try {\r\n\t            for (var _iterator3 = nodeData.children[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\r\n\t              var child = _step3.value;\r\n\t\r\n\t              child.parentId = nodeData.id;\r\n\t            }\r\n\t          } catch (err) {\r\n\t            _didIteratorError3 = true;\r\n\t            _iteratorError3 = err;\r\n\t          } finally {\r\n\t            try {\r\n\t              if (!_iteratorNormalCompletion3 && _iterator3.return) {\r\n\t                _iterator3.return();\r\n\t              }\r\n\t            } finally {\r\n\t              if (_didIteratorError3) {\r\n\t                throw _iteratorError3;\r\n\t              }\r\n\t            }\r\n\t          }\r\n\t        }\r\n\t\r\n\t        // construct the content of node\r\n\t        var nodeDiv = document.createElement('div');\r\n\t\r\n\t        delete nodeData.children;\r\n\t        nodeDiv.dataset.source = JSON.stringify(nodeData);\r\n\t        if (nodeData[opts.nodeId]) {\r\n\t          nodeDiv.id = nodeData[opts.nodeId];\r\n\t        }\r\n\t        var inEdit = that.chart.dataset.inEdit,\r\n\t            isHidden = void 0;\r\n\t\r\n\t        if (inEdit) {\r\n\t          isHidden = inEdit === 'addChildren' ? ' slide-up' : '';\r\n\t        } else {\r\n\t          isHidden = level >= opts.depth ? ' slide-up' : '';\r\n\t        }\r\n\t        nodeDiv.setAttribute('class', 'node ' + (nodeData.className || '') + isHidden);\r\n\t        if (opts.draggable) {\r\n\t          nodeDiv.setAttribute('draggable', true);\r\n\t        }\r\n\t        if (nodeData.parentId) {\r\n\t          nodeDiv.setAttribute('data-parent', nodeData.parentId);\r\n\t        }\r\n\t        nodeDiv.innerHTML = '\\n        <div class=\"title\">' + nodeData[opts.nodeTitle] + '</div>\\n        ' + (opts.nodeContent ? '<div class=\"content\">' + nodeData[opts.nodeContent] + '</div>' : '') + '\\n      ';\r\n\t        // append 4 direction arrows or expand/collapse buttons\r\n\t        var flags = nodeData.relationship || '';\r\n\t\r\n\t        if (opts.verticalDepth && level + 2 > opts.verticalDepth) {\r\n\t          if (level + 1 >= opts.verticalDepth && Number(flags.substr(2, 1))) {\r\n\t            var toggleBtn = document.createElement('i');\r\n\t\r\n\t            toggleBtn.setAttribute('class', 'toggleBtn fa fa-minus-square');\r\n\t            nodeDiv.appendChild(toggleBtn);\r\n\t          }\r\n\t        } else {\r\n\t          if (Number(flags.substr(0, 1))) {\r\n\t            var topEdge = document.createElement('i');\r\n\t\r\n\t            topEdge.setAttribute('class', 'edge verticalEdge topEdge fa');\r\n\t            nodeDiv.appendChild(topEdge);\r\n\t          }\r\n\t          if (Number(flags.substr(1, 1))) {\r\n\t            var rightEdge = document.createElement('i'),\r\n\t                leftEdge = document.createElement('i');\r\n\t\r\n\t            rightEdge.setAttribute('class', 'edge horizontalEdge rightEdge fa');\r\n\t            nodeDiv.appendChild(rightEdge);\r\n\t            leftEdge.setAttribute('class', 'edge horizontalEdge leftEdge fa');\r\n\t            nodeDiv.appendChild(leftEdge);\r\n\t          }\r\n\t          if (Number(flags.substr(2, 1))) {\r\n\t            var bottomEdge = document.createElement('i'),\r\n\t                symbol = document.createElement('i'),\r\n\t                title = nodeDiv.querySelector(':scope > .title');\r\n\t\r\n\t            bottomEdge.setAttribute('class', 'edge verticalEdge bottomEdge fa');\r\n\t            nodeDiv.appendChild(bottomEdge);\r\n\t            symbol.setAttribute('class', 'fa ' + opts.parentNodeSymbol + ' symbol');\r\n\t            title.insertBefore(symbol, title.children[0]);\r\n\t          }\r\n\t        }\r\n\t\r\n\t        nodeDiv.addEventListener('mouseenter', that._hoverNode.bind(that));\r\n\t        nodeDiv.addEventListener('mouseleave', that._hoverNode.bind(that));\r\n\t        nodeDiv.addEventListener('click', that._dispatchClickEvent.bind(that));\r\n\t        if (opts.draggable) {\r\n\t          nodeDiv.addEventListener('dragstart', that._onDragStart.bind(that));\r\n\t          nodeDiv.addEventListener('dragover', that._onDragOver.bind(that));\r\n\t          nodeDiv.addEventListener('dragend', that._onDragEnd.bind(that));\r\n\t          nodeDiv.addEventListener('drop', that._onDrop.bind(that));\r\n\t        }\r\n\t        // allow user to append dom modification after finishing node create of orgchart\r\n\t        if (opts.createNode) {\r\n\t          opts.createNode(nodeDiv, nodeData);\r\n\t        }\r\n\t\r\n\t        resolve(nodeDiv);\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: 'buildHierarchy',\r\n\t    value: function buildHierarchy(appendTo, nodeData, level, callback) {\r\n\t      // Construct the node\r\n\t      var that = this,\r\n\t          opts = this.options,\r\n\t          nodeWrapper = void 0,\r\n\t          childNodes = nodeData.children,\r\n\t          isVerticalNode = opts.verticalDepth && level + 1 >= opts.verticalDepth;\r\n\t\r\n\t      if (Object.keys(nodeData).length > 1) {\r\n\t        // if nodeData has nested structure\r\n\t        nodeWrapper = isVerticalNode ? appendTo : document.createElement('table');\r\n\t        if (!isVerticalNode) {\r\n\t          appendTo.appendChild(nodeWrapper);\r\n\t        }\r\n\t        this._createNode(nodeData, level).then(function (nodeDiv) {\r\n\t          if (isVerticalNode) {\r\n\t            nodeWrapper.appendChild(nodeDiv);\r\n\t          } else {\r\n\t            var tr = document.createElement('tr');\r\n\t\r\n\t            tr.innerHTML = '\\n            <td ' + (childNodes ? 'colspan=\"' + childNodes.length * 2 + '\"' : '') + '>\\n            </td>\\n          ';\r\n\t            tr.children[0].appendChild(nodeDiv);\r\n\t            nodeWrapper.insertBefore(tr, nodeWrapper.children[0] ? nodeWrapper.children[0] : null);\r\n\t          }\r\n\t          if (callback) {\r\n\t            callback();\r\n\t          }\r\n\t        }).catch(function (err) {\r\n\t          console.error('Failed to creat node', err);\r\n\t        });\r\n\t      }\r\n\t      // Construct the inferior nodes and connectiong lines\r\n\t      if (childNodes) {\r\n\t        (function () {\r\n\t          if (Object.keys(nodeData).length === 1) {\r\n\t            // if nodeData is just an array\r\n\t            nodeWrapper = appendTo;\r\n\t          }\r\n\t          var isHidden = void 0,\r\n\t              isVerticalLayer = opts.verticalDepth && level + 2 >= opts.verticalDepth,\r\n\t              inEdit = that.chart.dataset.inEdit;\r\n\t\r\n\t          if (inEdit) {\r\n\t            isHidden = inEdit === 'addSiblings' ? '' : ' hidden';\r\n\t          } else {\r\n\t            isHidden = level + 1 >= opts.depth ? ' hidden' : '';\r\n\t          }\r\n\t\r\n\t          // draw the line close to parent node\r\n\t          if (!isVerticalLayer) {\r\n\t            var tr = document.createElement('tr');\r\n\t\r\n\t            tr.setAttribute('class', 'lines' + isHidden);\r\n\t            tr.innerHTML = '\\n          <td colspan=\"' + childNodes.length * 2 + '\">\\n            <div class=\"downLine\"></div>\\n          </td>\\n        ';\r\n\t            nodeWrapper.appendChild(tr);\r\n\t          }\r\n\t          // draw the lines close to children nodes\r\n\t          var lineLayer = document.createElement('tr');\r\n\t\r\n\t          lineLayer.setAttribute('class', 'lines' + isHidden);\r\n\t          lineLayer.innerHTML = '\\n        <td class=\"rightLine\">&nbsp;</td>\\n        ' + childNodes.slice(1).map(function () {\r\n\t            return '\\n          <td class=\"leftLine topLine\">&nbsp;</td>\\n          <td class=\"rightLine topLine\">&nbsp;</td>\\n          ';\r\n\t          }).join('') + '\\n        <td class=\"leftLine\">&nbsp;</td>\\n      ';\r\n\t          var nodeLayer = void 0;\r\n\t\r\n\t          if (isVerticalLayer) {\r\n\t            nodeLayer = document.createElement('<ul>');\r\n\t            if (level + 2 === opts.verticalDepth) {\r\n\t              var _tr = document.createElement('tr');\r\n\t\r\n\t              _tr.setAttribute('class', 'verticalNodes');\r\n\t              _tr.innerHTML = '<td></td>';\r\n\t              _tr.firstChild.appendChild(nodeLayer);\r\n\t            } else {\r\n\t              nodeWrapper.appendChild(nodeLayer);\r\n\t            }\r\n\t          } else {\r\n\t            nodeLayer = document.createElement('tr');\r\n\t            nodeLayer.setAttribute('class', 'nodes' + isHidden);\r\n\t            nodeWrapper.appendChild(lineLayer);\r\n\t            nodeWrapper.appendChild(nodeLayer);\r\n\t          }\r\n\t          // recurse through children nodes\r\n\t          childNodes.forEach(function (child) {\r\n\t            var nodeCell = void 0;\r\n\t\r\n\t            if (isVerticalLayer) {\r\n\t              nodeCell = document.createElement('li');\r\n\t            } else {\r\n\t              nodeCell = document.createElement('td');\r\n\t              nodeCell.setAttribute('colspan', 2);\r\n\t            }\r\n\t            nodeLayer.appendChild(nodeCell);\r\n\t            that.buildHierarchy(nodeCell, child, level + 1, callback);\r\n\t          });\r\n\t        })();\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_clickChart',\r\n\t    value: function _clickChart(event) {\r\n\t      var closestNode = this._closest(event.target, function (el) {\r\n\t        return el.classList && el.classList.contains('node');\r\n\t      });\r\n\t\r\n\t      if (!closestNode && this.chart.querySelector('.node.focused')) {\r\n\t        this.chart.querySelector('.node.focused').classList.remove('focused');\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_clickExportButton',\r\n\t    value: function _clickExportButton() {\r\n\t      var opts = this.options,\r\n\t          chartContainer = this.chartContainer,\r\n\t          mask = chartContainer.querySelector(':scope > .mask'),\r\n\t          sourceChart = chartContainer.querySelector('.orgchart:not(.hidden)'),\r\n\t          flag = opts.direction === 'l2r' || opts.direction === 'r2l';\r\n\t\r\n\t      if (!mask) {\r\n\t        mask = document.createElement('div');\r\n\t        mask.setAttribute('class', 'mask');\r\n\t        mask.innerHTML = '<i class=\"fa fa-circle-o-notch fa-spin spinner\"></i>';\r\n\t        chartContainer.appendChild(mask);\r\n\t      } else {\r\n\t        mask.classList.remove('hidden');\r\n\t      }\r\n\t      chartContainer.classList.add('canvasContainer');\r\n\t      window.html2canvas(sourceChart, {\r\n\t        'width': flag ? sourceChart.clientHeight : sourceChart.clientWidth,\r\n\t        'height': flag ? sourceChart.clientWidth : sourceChart.clientHeight,\r\n\t        'onclone': function onclone(cloneDoc) {\r\n\t          var canvasContainer = cloneDoc.querySelector('.canvasContainer');\r\n\t\r\n\t          canvasContainer.style.overflow = 'visible';\r\n\t          canvasContainer.querySelector('.orgchart:not(.hidden)').transform = '';\r\n\t        }\r\n\t      }).then(function (canvas) {\r\n\t        var downloadBtn = chartContainer.querySelector('.oc-download-btn');\r\n                \r\n                if (!downloadBtn) {\r\n                    downloadBtn = document.createElement('a');\r\n                    downloadBtn.setAttribute('class', 'oc-download-btn' + (opts.chartClass !== '' ? ' ' + opts.chartClass : ''));\r\n                    downloadBtn.setAttribute('download', opts.exportFilename + '.png');\r\n                    chartContainer.appendChild(downloadBtn);\r\n                }\r\n                \r\n\t        chartContainer.querySelector('.mask').classList.add('hidden');\r\n\t        downloadBtn.setAttribute('href', canvas.toDataURL());\r\n\t        downloadBtn.click();\r\n\t      }).catch(function (err) {\r\n\t        console.error('Failed to export the curent orgchart!', err);\r\n\t      }).finally(function () {\r\n\t        chartContainer.classList.remove('canvasContainer');\r\n\t      });\r\n\t    }\r\n\t  }, {\r\n\t    key: '_loopChart',\r\n\t    value: function _loopChart(chart) {\r\n\t      var _this11 = this;\r\n\t\r\n\t      var subObj = { 'id': chart.querySelector('.node').id };\r\n\t\r\n\t      if (chart.children[3]) {\r\n\t        Array.from(chart.children[3].children).forEach(function (el) {\r\n\t          if (!subObj.children) {\r\n\t            subObj.children = [];\r\n\t          }\r\n\t          subObj.children.push(_this11._loopChart(el.firstChild));\r\n\t        });\r\n\t      }\r\n\t      return subObj;\r\n\t    }\r\n\t  }, {\r\n\t    key: 'getHierarchy',\r\n\t    value: function getHierarchy() {\r\n\t      if (!this.chart.querySelector('.node').id) {\r\n\t        return 'Error: Nodes of orghcart to be exported must have id attribute!';\r\n\t      }\r\n\t      return this._loopChart(this.chart.querySelector('table'));\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onPanStart',\r\n\t    value: function _onPanStart(event) {\r\n\t      var chart = event.currentTarget;\r\n\t\r\n\t      if (this._closest(event.target, function (el) {\r\n\t        return el.classList && el.classList.contains('node');\r\n\t      }) || event.touches && event.touches.length > 1) {\r\n\t        chart.dataset.panning = false;\r\n\t        return;\r\n\t      }\r\n\t      chart.style.cursor = 'move';\r\n\t      chart.dataset.panning = true;\r\n\t\r\n\t      var lastX = 0,\r\n\t          lastY = 0,\r\n\t          lastTf = window.getComputedStyle(chart).transform;\r\n\t\r\n\t      if (lastTf !== 'none') {\r\n\t        var temp = lastTf.split(',');\r\n\t\r\n\t        if (!lastTf.includes('3d')) {\r\n\t          lastX = Number.parseInt(temp[4], 10);\r\n\t          lastY = Number.parseInt(temp[5], 10);\r\n\t        } else {\r\n\t          lastX = Number.parseInt(temp[12], 10);\r\n\t          lastY = Number.parseInt(temp[13], 10);\r\n\t        }\r\n\t      }\r\n\t      var startX = 0,\r\n\t          startY = 0;\r\n\t\r\n\t      if (!event.targetTouches) {\r\n\t        // pan on desktop\r\n\t        startX = event.pageX - lastX;\r\n\t        startY = event.pageY - lastY;\r\n\t      } else if (event.targetTouches.length === 1) {\r\n\t        // pan on mobile device\r\n\t        startX = event.targetTouches[0].pageX - lastX;\r\n\t        startY = event.targetTouches[0].pageY - lastY;\r\n\t      } else if (event.targetTouches.length > 1) {\r\n\t        return;\r\n\t      }\r\n\t      chart.dataset.panStart = JSON.stringify({ 'startX': startX, 'startY': startY });\r\n\t      chart.addEventListener('mousemove', this._onPanning.bind(this));\r\n\t      chart.addEventListener('touchmove', this._onPanning.bind(this));\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onPanning',\r\n\t    value: function _onPanning(event) {\r\n\t      var chart = event.currentTarget;\r\n\t\r\n\t      if (chart.dataset.panning === 'false') {\r\n\t        return;\r\n\t      }\r\n\t      var newX = 0,\r\n\t          newY = 0,\r\n\t          panStart = JSON.parse(chart.dataset.panStart),\r\n\t          startX = panStart.startX,\r\n\t          startY = panStart.startY;\r\n\t\r\n\t      if (!event.targetTouches) {\r\n\t        // pand on desktop\r\n\t        newX = event.pageX - startX;\r\n\t        newY = event.pageY - startY;\r\n\t      } else if (event.targetTouches.length === 1) {\r\n\t        // pan on mobile device\r\n\t        newX = event.targetTouches[0].pageX - startX;\r\n\t        newY = event.targetTouches[0].pageY - startY;\r\n\t      } else if (event.targetTouches.length > 1) {\r\n\t        return;\r\n\t      }\r\n\t      var lastTf = window.getComputedStyle(chart).transform;\r\n\t\r\n\t      if (lastTf === 'none') {\r\n\t        if (!lastTf.includes('3d')) {\r\n\t          chart.style.transform = 'matrix(1, 0, 0, 1, ' + newX + ', ' + newY + ')';\r\n\t        } else {\r\n\t          chart.style.transform = 'matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, ' + newX + ', ' + newY + ', 0, 1)';\r\n\t        }\r\n\t      } else {\r\n\t        var matrix = lastTf.split(',');\r\n\t\r\n\t        if (!lastTf.includes('3d')) {\r\n\t          matrix[4] = newX;\r\n\t          matrix[5] = newY + ')';\r\n\t        } else {\r\n\t          matrix[12] = newX;\r\n\t          matrix[13] = newY;\r\n\t        }\r\n\t        chart.style.transform = matrix.join(',');\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onPanEnd',\r\n\t    value: function _onPanEnd(event) {\r\n\t      var chart = this.chart;\r\n\t\r\n\t      if (chart.dataset.panning === 'true') {\r\n\t        chart.dataset.panning = false;\r\n\t        chart.style.cursor = 'default';\r\n\t        document.body.removeEventListener('mousemove', this._onPanning);\r\n\t        document.body.removeEventListener('touchmove', this._onPanning);\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_setChartScale',\r\n\t    value: function _setChartScale(chart, newScale) {\r\n\t      var lastTf = window.getComputedStyle(chart).transform;\r\n\t\r\n\t      if (lastTf === 'none') {\r\n\t        chart.style.transform = 'scale(' + newScale + ',' + newScale + ')';\r\n\t      } else {\r\n\t        var matrix = lastTf.split(',');\r\n\t\r\n\t        if (!lastTf.includes('3d')) {\r\n\t          matrix[0] = 'matrix(' + newScale;\r\n\t          matrix[3] = newScale;\r\n\t          chart.style.transform = lastTf + ' scale(' + newScale + ',' + newScale + ')';\r\n\t        } else {\r\n\t          chart.style.transform = lastTf + ' scale3d(' + newScale + ',' + newScale + ', 1)';\r\n\t        }\r\n\t      }\r\n\t      chart.dataset.scale = newScale;\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onWheeling',\r\n\t    value: function _onWheeling(event) {\r\n\t      event.preventDefault();\r\n\t\r\n\t      var newScale = event.deltaY > 0 ? 0.8 : 1.2;\r\n\t\r\n\t      this._setChartScale(this.chart, newScale);\r\n\t    }\r\n\t  },{\r\n\t    key: 'set_zoom',\r\n\t    value: function set_zoom(delta) {\r\n\t\r\n\t      var newScale = delta > 0 ? 0.8 : 1.2;\r\n\t\r\n\t      this._setChartScale(this.chart, newScale);\r\n\t    }\r\n\t  },{\r\n\t    key: '_getPinchDist',\r\n\t    value: function _getPinchDist(event) {\r\n\t      return Math.sqrt((event.touches[0].clientX - event.touches[1].clientX) * (event.touches[0].clientX - event.touches[1].clientX) + (event.touches[0].clientY - event.touches[1].clientY) * (event.touches[0].clientY - event.touches[1].clientY));\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onTouchStart',\r\n\t    value: function _onTouchStart(event) {\r\n\t      var chart = this.chart;\r\n\t\r\n\t      if (event.touches && event.touches.length === 2) {\r\n\t        var dist = this._getPinchDist(event);\r\n\t\r\n\t        chart.dataset.pinching = true;\r\n\t        chart.dataset.pinchDistStart = dist;\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onTouchMove',\r\n\t    value: function _onTouchMove(event) {\r\n\t      var chart = this.chart;\r\n\t\r\n\t      if (chart.dataset.pinching) {\r\n\t        var dist = this._getPinchDist(event);\r\n\t\r\n\t        chart.dataset.pinchDistEnd = dist;\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: '_onTouchEnd',\r\n\t    value: function _onTouchEnd(event) {\r\n\t      var chart = this.chart;\r\n\t\r\n\t      if (chart.dataset.pinching) {\r\n\t        chart.dataset.pinching = false;\r\n\t        var diff = chart.dataset.pinchDistEnd - chart.dataset.pinchDistStart;\r\n\t\r\n\t        if (diff > 0) {\r\n\t          this._setChartScale(chart, 1);\r\n\t        } else if (diff < 0) {\r\n\t          this._setChartScale(chart, -1);\r\n\t        }\r\n\t      }\r\n\t    }\r\n\t  }, {\r\n\t    key: 'name',\r\n\t    get: function get() {\r\n\t      return this._name;\r\n\t    }\r\n\t  }]);\r\n\t\r\n\t  return OrgChart;\r\n\t}();\r\n\t\r\n\texports.default = OrgChart;\r\n\tmodule.exports = exports['default'];\r\n\r\n/***/ }\r\n/******/ ])\r\n});\r\n;\r\n//# sourceMappingURL=OrgChart.js.map","/*\r\nCopyright 2014 Igor Vaynberg\r\n\r\nVersion: 3.5.2 Timestamp: Sat Nov  1 14:43:36 EDT 2014\r\n\r\nThis software is licensed under the Apache License, Version 2.0 (the \"Apache License\") or the GNU\r\nGeneral Public License version 2 (the \"GPL License\"). You may choose either license to govern your\r\nuse of this software only upon the condition that you accept all of the terms of either the Apache\r\nLicense or the GPL License.\r\n\r\nYou may obtain a copy of the Apache License and the GPL License at:\r\n\r\nhttp://www.apache.org/licenses/LICENSE-2.0\r\nhttp://www.gnu.org/licenses/gpl-2.0.html\r\n\r\nUnless required by applicable law or agreed to in writing, software distributed under the Apache License\r\nor the GPL Licesnse is distributed on an \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND,\r\neither express or implied. See the Apache License and the GPL License for the specific language governing\r\npermissions and limitations under the Apache License and the GPL License.\r\n*/\r\n!function(a){\"undefined\"==typeof a.fn.each2&&a.extend(a.fn,{each2:function(b){for(var c=a([0]),d=-1,e=this.length;++d<e&&(c.context=c[0]=this[d])&&b.call(c[0],d,c)!==!1;);return this}})}(jQuery),function(a,b){\"use strict\";function n(b){var c=a(document.createTextNode(\"\"));b.before(c),c.before(b),c.remove()}function o(a){function b(a){return m[a]||a}return a.replace(/[^\\u0000-\\u007E]/g,b)}function p(a,b){for(var c=0,d=b.length;d>c;c+=1)if(r(a,b[c]))return c;return-1}function q(){var b=a(l);b.appendTo(document.body);var c={width:b.width()-b[0].clientWidth,height:b.height()-b[0].clientHeight};return b.remove(),c}function r(a,c){return a===c?!0:a===b||c===b?!1:null===a||null===c?!1:a.constructor===String?a+\"\"==c+\"\":c.constructor===String?c+\"\"==a+\"\":!1}function s(a,b,c){var d,e,f;if(null===a||a.length<1)return[];for(d=a.split(b),e=0,f=d.length;f>e;e+=1)d[e]=c(d[e]);return d}function t(a){return a.outerWidth(!1)-a.width()}function u(c){var d=\"keyup-change-value\";c.on(\"keydown\",function(){a.data(c,d)===b&&a.data(c,d,c.val())}),c.on(\"keyup\",function(){var e=a.data(c,d);e!==b&&c.val()!==e&&(a.removeData(c,d),c.trigger(\"keyup-change\"))})}function v(c){c.on(\"mousemove\",function(c){var d=h;(d===b||d.x!==c.pageX||d.y!==c.pageY)&&a(c.target).trigger(\"mousemove-filtered\",c)})}function w(a,c,d){d=d||b;var e;return function(){var b=arguments;window.clearTimeout(e),e=window.setTimeout(function(){c.apply(d,b)},a)}}function x(a,b){var c=w(a,function(a){b.trigger(\"scroll-debounced\",a)});b.on(\"scroll\",function(a){p(a.target,b.get())>=0&&c(a)})}function y(a){a[0]!==document.activeElement&&window.setTimeout(function(){var d,b=a[0],c=a.val().length;a.focus();var e=b.offsetWidth>0||b.offsetHeight>0;e&&b===document.activeElement&&(b.setSelectionRange?b.setSelectionRange(c,c):b.createTextRange&&(d=b.createTextRange(),d.collapse(!1),d.select()))},0)}function z(b){b=a(b)[0];var c=0,d=0;if(\"selectionStart\"in b)c=b.selectionStart,d=b.selectionEnd-c;else if(\"selection\"in document){b.focus();var e=document.selection.createRange();d=document.selection.createRange().text.length,e.moveStart(\"character\",-b.value.length),c=e.text.length-d}return{offset:c,length:d}}function A(a){a.preventDefault(),a.stopPropagation()}function B(a){a.preventDefault(),a.stopImmediatePropagation()}function C(b){if(!g){var c=b[0].currentStyle||window.getComputedStyle(b[0],null);g=a(document.createElement(\"div\")).css({position:\"absolute\",left:\"-10000px\",top:\"-10000px\",display:\"none\",fontSize:c.fontSize,fontFamily:c.fontFamily,fontStyle:c.fontStyle,fontWeight:c.fontWeight,letterSpacing:c.letterSpacing,textTransform:c.textTransform,whiteSpace:\"nowrap\"}),g.attr(\"class\",\"select2-sizer\"),a(document.body).append(g)}return g.text(b.val()),g.width()}function D(b,c,d){var e,g,f=[];e=a.trim(b.attr(\"class\")),e&&(e=\"\"+e,a(e.split(/\\s+/)).each2(function(){0===this.indexOf(\"select2-\")&&f.push(this)})),e=a.trim(c.attr(\"class\")),e&&(e=\"\"+e,a(e.split(/\\s+/)).each2(function(){0!==this.indexOf(\"select2-\")&&(g=d(this),g&&f.push(g))})),b.attr(\"class\",f.join(\" \"))}function E(a,b,c,d){var e=o(a.toUpperCase()).indexOf(o(b.toUpperCase())),f=b.length;return 0>e?(c.push(d(a)),void 0):(c.push(d(a.substring(0,e))),c.push(\"<span class='select2-match'>\"),c.push(d(a.substring(e,e+f))),c.push(\"</span>\"),c.push(d(a.substring(e+f,a.length))),void 0)}function F(a){var b={\"\\\\\":\"&#92;\",\"&\":\"&amp;\",\"<\":\"&lt;\",\">\":\"&gt;\",'\"':\"&quot;\",\"'\":\"&#39;\",\"/\":\"&#47;\"};return String(a).replace(/[&<>\"'\\/\\\\]/g,function(a){return b[a]})}function G(c){var d,e=null,f=c.quietMillis||100,g=c.url,h=this;return function(i){window.clearTimeout(d),d=window.setTimeout(function(){var d=c.data,f=g,j=c.transport||a.fn.select2.ajaxDefaults.transport,k={type:c.type||\"GET\",cache:c.cache||!1,jsonpCallback:c.jsonpCallback||b,dataType:c.dataType||\"json\"},l=a.extend({},a.fn.select2.ajaxDefaults.params,k);d=d?d.call(h,i.term,i.page,i.context):null,f=\"function\"==typeof f?f.call(h,i.term,i.page,i.context):f,e&&\"function\"==typeof e.abort&&e.abort(),c.params&&(a.isFunction(c.params)?a.extend(l,c.params.call(h)):a.extend(l,c.params)),a.extend(l,{url:f,dataType:c.dataType,data:d,success:function(a){var b=c.results(a,i.page,i);i.callback(b)},error:function(a,b,c){var d={hasError:!0,jqXHR:a,textStatus:b,errorThrown:c};i.callback(d)}}),e=j.call(h,l)},f)}}function H(b){var d,e,c=b,f=function(a){return\"\"+a.text};a.isArray(c)&&(e=c,c={results:e}),a.isFunction(c)===!1&&(e=c,c=function(){return e});var g=c();return g.text&&(f=g.text,a.isFunction(f)||(d=g.text,f=function(a){return a[d]})),function(b){var g,d=b.term,e={results:[]};return\"\"===d?(b.callback(c()),void 0):(g=function(c,e){var h,i;if(c=c[0],c.children){h={};for(i in c)c.hasOwnProperty(i)&&(h[i]=c[i]);h.children=[],a(c.children).each2(function(a,b){g(b,h.children)}),(h.children.length||b.matcher(d,f(h),c))&&e.push(h)}else b.matcher(d,f(c),c)&&e.push(c)},a(c().results).each2(function(a,b){g(b,e.results)}),b.callback(e),void 0)}}function I(c){var d=a.isFunction(c);return function(e){var f=e.term,g={results:[]},h=d?c(e):c;a.isArray(h)&&(a(h).each(function(){var a=this.text!==b,c=a?this.text:this;(\"\"===f||e.matcher(f,c))&&g.results.push(a?this:{id:this,text:this})}),e.callback(g))}}function J(b,c){if(a.isFunction(b))return!0;if(!b)return!1;if(\"string\"==typeof b)return!0;throw new Error(c+\" must be a string, function, or falsy value\")}function K(b,c){if(a.isFunction(b)){var d=Array.prototype.slice.call(arguments,2);return b.apply(c,d)}return b}function L(b){var c=0;return a.each(b,function(a,b){b.children?c+=L(b.children):c++}),c}function M(a,c,d,e){var h,i,j,k,l,f=a,g=!1;if(!e.createSearchChoice||!e.tokenSeparators||e.tokenSeparators.length<1)return b;for(;;){for(i=-1,j=0,k=e.tokenSeparators.length;k>j&&(l=e.tokenSeparators[j],i=a.indexOf(l),!(i>=0));j++);if(0>i)break;if(h=a.substring(0,i),a=a.substring(i+l.length),h.length>0&&(h=e.createSearchChoice.call(this,h,c),h!==b&&null!==h&&e.id(h)!==b&&null!==e.id(h))){for(g=!1,j=0,k=c.length;k>j;j++)if(r(e.id(h),e.id(c[j]))){g=!0;break}g||d(h)}}return f!==a?a:void 0}function N(){var b=this;a.each(arguments,function(a,c){b[c].remove(),b[c]=null})}function O(b,c){var d=function(){};return d.prototype=new b,d.prototype.constructor=d,d.prototype.parent=b.prototype,d.prototype=a.extend(d.prototype,c),d}if(window.Select2===b){var c,d,e,f,g,i,j,h={x:0,y:0},k={TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isArrow:function(a){switch(a=a.which?a.which:a){case k.LEFT:case k.RIGHT:case k.UP:case k.DOWN:return!0}return!1},isControl:function(a){var b=a.which;switch(b){case k.SHIFT:case k.CTRL:case k.ALT:return!0}return a.metaKey?!0:!1},isFunctionKey:function(a){return a=a.which?a.which:a,a>=112&&123>=a}},l=\"<div class='select2-measure-scrollbar'></div>\",m={\"\\u24b6\":\"A\",\"\\uff21\":\"A\",\"\\xc0\":\"A\",\"\\xc1\":\"A\",\"\\xc2\":\"A\",\"\\u1ea6\":\"A\",\"\\u1ea4\":\"A\",\"\\u1eaa\":\"A\",\"\\u1ea8\":\"A\",\"\\xc3\":\"A\",\"\\u0100\":\"A\",\"\\u0102\":\"A\",\"\\u1eb0\":\"A\",\"\\u1eae\":\"A\",\"\\u1eb4\":\"A\",\"\\u1eb2\":\"A\",\"\\u0226\":\"A\",\"\\u01e0\":\"A\",\"\\xc4\":\"A\",\"\\u01de\":\"A\",\"\\u1ea2\":\"A\",\"\\xc5\":\"A\",\"\\u01fa\":\"A\",\"\\u01cd\":\"A\",\"\\u0200\":\"A\",\"\\u0202\":\"A\",\"\\u1ea0\":\"A\",\"\\u1eac\":\"A\",\"\\u1eb6\":\"A\",\"\\u1e00\":\"A\",\"\\u0104\":\"A\",\"\\u023a\":\"A\",\"\\u2c6f\":\"A\",\"\\ua732\":\"AA\",\"\\xc6\":\"AE\",\"\\u01fc\":\"AE\",\"\\u01e2\":\"AE\",\"\\ua734\":\"AO\",\"\\ua736\":\"AU\",\"\\ua738\":\"AV\",\"\\ua73a\":\"AV\",\"\\ua73c\":\"AY\",\"\\u24b7\":\"B\",\"\\uff22\":\"B\",\"\\u1e02\":\"B\",\"\\u1e04\":\"B\",\"\\u1e06\":\"B\",\"\\u0243\":\"B\",\"\\u0182\":\"B\",\"\\u0181\":\"B\",\"\\u24b8\":\"C\",\"\\uff23\":\"C\",\"\\u0106\":\"C\",\"\\u0108\":\"C\",\"\\u010a\":\"C\",\"\\u010c\":\"C\",\"\\xc7\":\"C\",\"\\u1e08\":\"C\",\"\\u0187\":\"C\",\"\\u023b\":\"C\",\"\\ua73e\":\"C\",\"\\u24b9\":\"D\",\"\\uff24\":\"D\",\"\\u1e0a\":\"D\",\"\\u010e\":\"D\",\"\\u1e0c\":\"D\",\"\\u1e10\":\"D\",\"\\u1e12\":\"D\",\"\\u1e0e\":\"D\",\"\\u0110\":\"D\",\"\\u018b\":\"D\",\"\\u018a\":\"D\",\"\\u0189\":\"D\",\"\\ua779\":\"D\",\"\\u01f1\":\"DZ\",\"\\u01c4\":\"DZ\",\"\\u01f2\":\"Dz\",\"\\u01c5\":\"Dz\",\"\\u24ba\":\"E\",\"\\uff25\":\"E\",\"\\xc8\":\"E\",\"\\xc9\":\"E\",\"\\xca\":\"E\",\"\\u1ec0\":\"E\",\"\\u1ebe\":\"E\",\"\\u1ec4\":\"E\",\"\\u1ec2\":\"E\",\"\\u1ebc\":\"E\",\"\\u0112\":\"E\",\"\\u1e14\":\"E\",\"\\u1e16\":\"E\",\"\\u0114\":\"E\",\"\\u0116\":\"E\",\"\\xcb\":\"E\",\"\\u1eba\":\"E\",\"\\u011a\":\"E\",\"\\u0204\":\"E\",\"\\u0206\":\"E\",\"\\u1eb8\":\"E\",\"\\u1ec6\":\"E\",\"\\u0228\":\"E\",\"\\u1e1c\":\"E\",\"\\u0118\":\"E\",\"\\u1e18\":\"E\",\"\\u1e1a\":\"E\",\"\\u0190\":\"E\",\"\\u018e\":\"E\",\"\\u24bb\":\"F\",\"\\uff26\":\"F\",\"\\u1e1e\":\"F\",\"\\u0191\":\"F\",\"\\ua77b\":\"F\",\"\\u24bc\":\"G\",\"\\uff27\":\"G\",\"\\u01f4\":\"G\",\"\\u011c\":\"G\",\"\\u1e20\":\"G\",\"\\u011e\":\"G\",\"\\u0120\":\"G\",\"\\u01e6\":\"G\",\"\\u0122\":\"G\",\"\\u01e4\":\"G\",\"\\u0193\":\"G\",\"\\ua7a0\":\"G\",\"\\ua77d\":\"G\",\"\\ua77e\":\"G\",\"\\u24bd\":\"H\",\"\\uff28\":\"H\",\"\\u0124\":\"H\",\"\\u1e22\":\"H\",\"\\u1e26\":\"H\",\"\\u021e\":\"H\",\"\\u1e24\":\"H\",\"\\u1e28\":\"H\",\"\\u1e2a\":\"H\",\"\\u0126\":\"H\",\"\\u2c67\":\"H\",\"\\u2c75\":\"H\",\"\\ua78d\":\"H\",\"\\u24be\":\"I\",\"\\uff29\":\"I\",\"\\xcc\":\"I\",\"\\xcd\":\"I\",\"\\xce\":\"I\",\"\\u0128\":\"I\",\"\\u012a\":\"I\",\"\\u012c\":\"I\",\"\\u0130\":\"I\",\"\\xcf\":\"I\",\"\\u1e2e\":\"I\",\"\\u1ec8\":\"I\",\"\\u01cf\":\"I\",\"\\u0208\":\"I\",\"\\u020a\":\"I\",\"\\u1eca\":\"I\",\"\\u012e\":\"I\",\"\\u1e2c\":\"I\",\"\\u0197\":\"I\",\"\\u24bf\":\"J\",\"\\uff2a\":\"J\",\"\\u0134\":\"J\",\"\\u0248\":\"J\",\"\\u24c0\":\"K\",\"\\uff2b\":\"K\",\"\\u1e30\":\"K\",\"\\u01e8\":\"K\",\"\\u1e32\":\"K\",\"\\u0136\":\"K\",\"\\u1e34\":\"K\",\"\\u0198\":\"K\",\"\\u2c69\":\"K\",\"\\ua740\":\"K\",\"\\ua742\":\"K\",\"\\ua744\":\"K\",\"\\ua7a2\":\"K\",\"\\u24c1\":\"L\",\"\\uff2c\":\"L\",\"\\u013f\":\"L\",\"\\u0139\":\"L\",\"\\u013d\":\"L\",\"\\u1e36\":\"L\",\"\\u1e38\":\"L\",\"\\u013b\":\"L\",\"\\u1e3c\":\"L\",\"\\u1e3a\":\"L\",\"\\u0141\":\"L\",\"\\u023d\":\"L\",\"\\u2c62\":\"L\",\"\\u2c60\":\"L\",\"\\ua748\":\"L\",\"\\ua746\":\"L\",\"\\ua780\":\"L\",\"\\u01c7\":\"LJ\",\"\\u01c8\":\"Lj\",\"\\u24c2\":\"M\",\"\\uff2d\":\"M\",\"\\u1e3e\":\"M\",\"\\u1e40\":\"M\",\"\\u1e42\":\"M\",\"\\u2c6e\":\"M\",\"\\u019c\":\"M\",\"\\u24c3\":\"N\",\"\\uff2e\":\"N\",\"\\u01f8\":\"N\",\"\\u0143\":\"N\",\"\\xd1\":\"N\",\"\\u1e44\":\"N\",\"\\u0147\":\"N\",\"\\u1e46\":\"N\",\"\\u0145\":\"N\",\"\\u1e4a\":\"N\",\"\\u1e48\":\"N\",\"\\u0220\":\"N\",\"\\u019d\":\"N\",\"\\ua790\":\"N\",\"\\ua7a4\":\"N\",\"\\u01ca\":\"NJ\",\"\\u01cb\":\"Nj\",\"\\u24c4\":\"O\",\"\\uff2f\":\"O\",\"\\xd2\":\"O\",\"\\xd3\":\"O\",\"\\xd4\":\"O\",\"\\u1ed2\":\"O\",\"\\u1ed0\":\"O\",\"\\u1ed6\":\"O\",\"\\u1ed4\":\"O\",\"\\xd5\":\"O\",\"\\u1e4c\":\"O\",\"\\u022c\":\"O\",\"\\u1e4e\":\"O\",\"\\u014c\":\"O\",\"\\u1e50\":\"O\",\"\\u1e52\":\"O\",\"\\u014e\":\"O\",\"\\u022e\":\"O\",\"\\u0230\":\"O\",\"\\xd6\":\"O\",\"\\u022a\":\"O\",\"\\u1ece\":\"O\",\"\\u0150\":\"O\",\"\\u01d1\":\"O\",\"\\u020c\":\"O\",\"\\u020e\":\"O\",\"\\u01a0\":\"O\",\"\\u1edc\":\"O\",\"\\u1eda\":\"O\",\"\\u1ee0\":\"O\",\"\\u1ede\":\"O\",\"\\u1ee2\":\"O\",\"\\u1ecc\":\"O\",\"\\u1ed8\":\"O\",\"\\u01ea\":\"O\",\"\\u01ec\":\"O\",\"\\xd8\":\"O\",\"\\u01fe\":\"O\",\"\\u0186\":\"O\",\"\\u019f\":\"O\",\"\\ua74a\":\"O\",\"\\ua74c\":\"O\",\"\\u01a2\":\"OI\",\"\\ua74e\":\"OO\",\"\\u0222\":\"OU\",\"\\u24c5\":\"P\",\"\\uff30\":\"P\",\"\\u1e54\":\"P\",\"\\u1e56\":\"P\",\"\\u01a4\":\"P\",\"\\u2c63\":\"P\",\"\\ua750\":\"P\",\"\\ua752\":\"P\",\"\\ua754\":\"P\",\"\\u24c6\":\"Q\",\"\\uff31\":\"Q\",\"\\ua756\":\"Q\",\"\\ua758\":\"Q\",\"\\u024a\":\"Q\",\"\\u24c7\":\"R\",\"\\uff32\":\"R\",\"\\u0154\":\"R\",\"\\u1e58\":\"R\",\"\\u0158\":\"R\",\"\\u0210\":\"R\",\"\\u0212\":\"R\",\"\\u1e5a\":\"R\",\"\\u1e5c\":\"R\",\"\\u0156\":\"R\",\"\\u1e5e\":\"R\",\"\\u024c\":\"R\",\"\\u2c64\":\"R\",\"\\ua75a\":\"R\",\"\\ua7a6\":\"R\",\"\\ua782\":\"R\",\"\\u24c8\":\"S\",\"\\uff33\":\"S\",\"\\u1e9e\":\"S\",\"\\u015a\":\"S\",\"\\u1e64\":\"S\",\"\\u015c\":\"S\",\"\\u1e60\":\"S\",\"\\u0160\":\"S\",\"\\u1e66\":\"S\",\"\\u1e62\":\"S\",\"\\u1e68\":\"S\",\"\\u0218\":\"S\",\"\\u015e\":\"S\",\"\\u2c7e\":\"S\",\"\\ua7a8\":\"S\",\"\\ua784\":\"S\",\"\\u24c9\":\"T\",\"\\uff34\":\"T\",\"\\u1e6a\":\"T\",\"\\u0164\":\"T\",\"\\u1e6c\":\"T\",\"\\u021a\":\"T\",\"\\u0162\":\"T\",\"\\u1e70\":\"T\",\"\\u1e6e\":\"T\",\"\\u0166\":\"T\",\"\\u01ac\":\"T\",\"\\u01ae\":\"T\",\"\\u023e\":\"T\",\"\\ua786\":\"T\",\"\\ua728\":\"TZ\",\"\\u24ca\":\"U\",\"\\uff35\":\"U\",\"\\xd9\":\"U\",\"\\xda\":\"U\",\"\\xdb\":\"U\",\"\\u0168\":\"U\",\"\\u1e78\":\"U\",\"\\u016a\":\"U\",\"\\u1e7a\":\"U\",\"\\u016c\":\"U\",\"\\xdc\":\"U\",\"\\u01db\":\"U\",\"\\u01d7\":\"U\",\"\\u01d5\":\"U\",\"\\u01d9\":\"U\",\"\\u1ee6\":\"U\",\"\\u016e\":\"U\",\"\\u0170\":\"U\",\"\\u01d3\":\"U\",\"\\u0214\":\"U\",\"\\u0216\":\"U\",\"\\u01af\":\"U\",\"\\u1eea\":\"U\",\"\\u1ee8\":\"U\",\"\\u1eee\":\"U\",\"\\u1eec\":\"U\",\"\\u1ef0\":\"U\",\"\\u1ee4\":\"U\",\"\\u1e72\":\"U\",\"\\u0172\":\"U\",\"\\u1e76\":\"U\",\"\\u1e74\":\"U\",\"\\u0244\":\"U\",\"\\u24cb\":\"V\",\"\\uff36\":\"V\",\"\\u1e7c\":\"V\",\"\\u1e7e\":\"V\",\"\\u01b2\":\"V\",\"\\ua75e\":\"V\",\"\\u0245\":\"V\",\"\\ua760\":\"VY\",\"\\u24cc\":\"W\",\"\\uff37\":\"W\",\"\\u1e80\":\"W\",\"\\u1e82\":\"W\",\"\\u0174\":\"W\",\"\\u1e86\":\"W\",\"\\u1e84\":\"W\",\"\\u1e88\":\"W\",\"\\u2c72\":\"W\",\"\\u24cd\":\"X\",\"\\uff38\":\"X\",\"\\u1e8a\":\"X\",\"\\u1e8c\":\"X\",\"\\u24ce\":\"Y\",\"\\uff39\":\"Y\",\"\\u1ef2\":\"Y\",\"\\xdd\":\"Y\",\"\\u0176\":\"Y\",\"\\u1ef8\":\"Y\",\"\\u0232\":\"Y\",\"\\u1e8e\":\"Y\",\"\\u0178\":\"Y\",\"\\u1ef6\":\"Y\",\"\\u1ef4\":\"Y\",\"\\u01b3\":\"Y\",\"\\u024e\":\"Y\",\"\\u1efe\":\"Y\",\"\\u24cf\":\"Z\",\"\\uff3a\":\"Z\",\"\\u0179\":\"Z\",\"\\u1e90\":\"Z\",\"\\u017b\":\"Z\",\"\\u017d\":\"Z\",\"\\u1e92\":\"Z\",\"\\u1e94\":\"Z\",\"\\u01b5\":\"Z\",\"\\u0224\":\"Z\",\"\\u2c7f\":\"Z\",\"\\u2c6b\":\"Z\",\"\\ua762\":\"Z\",\"\\u24d0\":\"a\",\"\\uff41\":\"a\",\"\\u1e9a\":\"a\",\"\\xe0\":\"a\",\"\\xe1\":\"a\",\"\\xe2\":\"a\",\"\\u1ea7\":\"a\",\"\\u1ea5\":\"a\",\"\\u1eab\":\"a\",\"\\u1ea9\":\"a\",\"\\xe3\":\"a\",\"\\u0101\":\"a\",\"\\u0103\":\"a\",\"\\u1eb1\":\"a\",\"\\u1eaf\":\"a\",\"\\u1eb5\":\"a\",\"\\u1eb3\":\"a\",\"\\u0227\":\"a\",\"\\u01e1\":\"a\",\"\\xe4\":\"a\",\"\\u01df\":\"a\",\"\\u1ea3\":\"a\",\"\\xe5\":\"a\",\"\\u01fb\":\"a\",\"\\u01ce\":\"a\",\"\\u0201\":\"a\",\"\\u0203\":\"a\",\"\\u1ea1\":\"a\",\"\\u1ead\":\"a\",\"\\u1eb7\":\"a\",\"\\u1e01\":\"a\",\"\\u0105\":\"a\",\"\\u2c65\":\"a\",\"\\u0250\":\"a\",\"\\ua733\":\"aa\",\"\\xe6\":\"ae\",\"\\u01fd\":\"ae\",\"\\u01e3\":\"ae\",\"\\ua735\":\"ao\",\"\\ua737\":\"au\",\"\\ua739\":\"av\",\"\\ua73b\":\"av\",\"\\ua73d\":\"ay\",\"\\u24d1\":\"b\",\"\\uff42\":\"b\",\"\\u1e03\":\"b\",\"\\u1e05\":\"b\",\"\\u1e07\":\"b\",\"\\u0180\":\"b\",\"\\u0183\":\"b\",\"\\u0253\":\"b\",\"\\u24d2\":\"c\",\"\\uff43\":\"c\",\"\\u0107\":\"c\",\"\\u0109\":\"c\",\"\\u010b\":\"c\",\"\\u010d\":\"c\",\"\\xe7\":\"c\",\"\\u1e09\":\"c\",\"\\u0188\":\"c\",\"\\u023c\":\"c\",\"\\ua73f\":\"c\",\"\\u2184\":\"c\",\"\\u24d3\":\"d\",\"\\uff44\":\"d\",\"\\u1e0b\":\"d\",\"\\u010f\":\"d\",\"\\u1e0d\":\"d\",\"\\u1e11\":\"d\",\"\\u1e13\":\"d\",\"\\u1e0f\":\"d\",\"\\u0111\":\"d\",\"\\u018c\":\"d\",\"\\u0256\":\"d\",\"\\u0257\":\"d\",\"\\ua77a\":\"d\",\"\\u01f3\":\"dz\",\"\\u01c6\":\"dz\",\"\\u24d4\":\"e\",\"\\uff45\":\"e\",\"\\xe8\":\"e\",\"\\xe9\":\"e\",\"\\xea\":\"e\",\"\\u1ec1\":\"e\",\"\\u1ebf\":\"e\",\"\\u1ec5\":\"e\",\"\\u1ec3\":\"e\",\"\\u1ebd\":\"e\",\"\\u0113\":\"e\",\"\\u1e15\":\"e\",\"\\u1e17\":\"e\",\"\\u0115\":\"e\",\"\\u0117\":\"e\",\"\\xeb\":\"e\",\"\\u1ebb\":\"e\",\"\\u011b\":\"e\",\"\\u0205\":\"e\",\"\\u0207\":\"e\",\"\\u1eb9\":\"e\",\"\\u1ec7\":\"e\",\"\\u0229\":\"e\",\"\\u1e1d\":\"e\",\"\\u0119\":\"e\",\"\\u1e19\":\"e\",\"\\u1e1b\":\"e\",\"\\u0247\":\"e\",\"\\u025b\":\"e\",\"\\u01dd\":\"e\",\"\\u24d5\":\"f\",\"\\uff46\":\"f\",\"\\u1e1f\":\"f\",\"\\u0192\":\"f\",\"\\ua77c\":\"f\",\"\\u24d6\":\"g\",\"\\uff47\":\"g\",\"\\u01f5\":\"g\",\"\\u011d\":\"g\",\"\\u1e21\":\"g\",\"\\u011f\":\"g\",\"\\u0121\":\"g\",\"\\u01e7\":\"g\",\"\\u0123\":\"g\",\"\\u01e5\":\"g\",\"\\u0260\":\"g\",\"\\ua7a1\":\"g\",\"\\u1d79\":\"g\",\"\\ua77f\":\"g\",\"\\u24d7\":\"h\",\"\\uff48\":\"h\",\"\\u0125\":\"h\",\"\\u1e23\":\"h\",\"\\u1e27\":\"h\",\"\\u021f\":\"h\",\"\\u1e25\":\"h\",\"\\u1e29\":\"h\",\"\\u1e2b\":\"h\",\"\\u1e96\":\"h\",\"\\u0127\":\"h\",\"\\u2c68\":\"h\",\"\\u2c76\":\"h\",\"\\u0265\":\"h\",\"\\u0195\":\"hv\",\"\\u24d8\":\"i\",\"\\uff49\":\"i\",\"\\xec\":\"i\",\"\\xed\":\"i\",\"\\xee\":\"i\",\"\\u0129\":\"i\",\"\\u012b\":\"i\",\"\\u012d\":\"i\",\"\\xef\":\"i\",\"\\u1e2f\":\"i\",\"\\u1ec9\":\"i\",\"\\u01d0\":\"i\",\"\\u0209\":\"i\",\"\\u020b\":\"i\",\"\\u1ecb\":\"i\",\"\\u012f\":\"i\",\"\\u1e2d\":\"i\",\"\\u0268\":\"i\",\"\\u0131\":\"i\",\"\\u24d9\":\"j\",\"\\uff4a\":\"j\",\"\\u0135\":\"j\",\"\\u01f0\":\"j\",\"\\u0249\":\"j\",\"\\u24da\":\"k\",\"\\uff4b\":\"k\",\"\\u1e31\":\"k\",\"\\u01e9\":\"k\",\"\\u1e33\":\"k\",\"\\u0137\":\"k\",\"\\u1e35\":\"k\",\"\\u0199\":\"k\",\"\\u2c6a\":\"k\",\"\\ua741\":\"k\",\"\\ua743\":\"k\",\"\\ua745\":\"k\",\"\\ua7a3\":\"k\",\"\\u24db\":\"l\",\"\\uff4c\":\"l\",\"\\u0140\":\"l\",\"\\u013a\":\"l\",\"\\u013e\":\"l\",\"\\u1e37\":\"l\",\"\\u1e39\":\"l\",\"\\u013c\":\"l\",\"\\u1e3d\":\"l\",\"\\u1e3b\":\"l\",\"\\u017f\":\"l\",\"\\u0142\":\"l\",\"\\u019a\":\"l\",\"\\u026b\":\"l\",\"\\u2c61\":\"l\",\"\\ua749\":\"l\",\"\\ua781\":\"l\",\"\\ua747\":\"l\",\"\\u01c9\":\"lj\",\"\\u24dc\":\"m\",\"\\uff4d\":\"m\",\"\\u1e3f\":\"m\",\"\\u1e41\":\"m\",\"\\u1e43\":\"m\",\"\\u0271\":\"m\",\"\\u026f\":\"m\",\"\\u24dd\":\"n\",\"\\uff4e\":\"n\",\"\\u01f9\":\"n\",\"\\u0144\":\"n\",\"\\xf1\":\"n\",\"\\u1e45\":\"n\",\"\\u0148\":\"n\",\"\\u1e47\":\"n\",\"\\u0146\":\"n\",\"\\u1e4b\":\"n\",\"\\u1e49\":\"n\",\"\\u019e\":\"n\",\"\\u0272\":\"n\",\"\\u0149\":\"n\",\"\\ua791\":\"n\",\"\\ua7a5\":\"n\",\"\\u01cc\":\"nj\",\"\\u24de\":\"o\",\"\\uff4f\":\"o\",\"\\xf2\":\"o\",\"\\xf3\":\"o\",\"\\xf4\":\"o\",\"\\u1ed3\":\"o\",\"\\u1ed1\":\"o\",\"\\u1ed7\":\"o\",\"\\u1ed5\":\"o\",\"\\xf5\":\"o\",\"\\u1e4d\":\"o\",\"\\u022d\":\"o\",\"\\u1e4f\":\"o\",\"\\u014d\":\"o\",\"\\u1e51\":\"o\",\"\\u1e53\":\"o\",\"\\u014f\":\"o\",\"\\u022f\":\"o\",\"\\u0231\":\"o\",\"\\xf6\":\"o\",\"\\u022b\":\"o\",\"\\u1ecf\":\"o\",\"\\u0151\":\"o\",\"\\u01d2\":\"o\",\"\\u020d\":\"o\",\"\\u020f\":\"o\",\"\\u01a1\":\"o\",\"\\u1edd\":\"o\",\"\\u1edb\":\"o\",\"\\u1ee1\":\"o\",\"\\u1edf\":\"o\",\"\\u1ee3\":\"o\",\"\\u1ecd\":\"o\",\"\\u1ed9\":\"o\",\"\\u01eb\":\"o\",\"\\u01ed\":\"o\",\"\\xf8\":\"o\",\"\\u01ff\":\"o\",\"\\u0254\":\"o\",\"\\ua74b\":\"o\",\"\\ua74d\":\"o\",\"\\u0275\":\"o\",\"\\u01a3\":\"oi\",\"\\u0223\":\"ou\",\"\\ua74f\":\"oo\",\"\\u24df\":\"p\",\"\\uff50\":\"p\",\"\\u1e55\":\"p\",\"\\u1e57\":\"p\",\"\\u01a5\":\"p\",\"\\u1d7d\":\"p\",\"\\ua751\":\"p\",\"\\ua753\":\"p\",\"\\ua755\":\"p\",\"\\u24e0\":\"q\",\"\\uff51\":\"q\",\"\\u024b\":\"q\",\"\\ua757\":\"q\",\"\\ua759\":\"q\",\"\\u24e1\":\"r\",\"\\uff52\":\"r\",\"\\u0155\":\"r\",\"\\u1e59\":\"r\",\"\\u0159\":\"r\",\"\\u0211\":\"r\",\"\\u0213\":\"r\",\"\\u1e5b\":\"r\",\"\\u1e5d\":\"r\",\"\\u0157\":\"r\",\"\\u1e5f\":\"r\",\"\\u024d\":\"r\",\"\\u027d\":\"r\",\"\\ua75b\":\"r\",\"\\ua7a7\":\"r\",\"\\ua783\":\"r\",\"\\u24e2\":\"s\",\"\\uff53\":\"s\",\"\\xdf\":\"s\",\"\\u015b\":\"s\",\"\\u1e65\":\"s\",\"\\u015d\":\"s\",\"\\u1e61\":\"s\",\"\\u0161\":\"s\",\"\\u1e67\":\"s\",\"\\u1e63\":\"s\",\"\\u1e69\":\"s\",\"\\u0219\":\"s\",\"\\u015f\":\"s\",\"\\u023f\":\"s\",\"\\ua7a9\":\"s\",\"\\ua785\":\"s\",\"\\u1e9b\":\"s\",\"\\u24e3\":\"t\",\"\\uff54\":\"t\",\"\\u1e6b\":\"t\",\"\\u1e97\":\"t\",\"\\u0165\":\"t\",\"\\u1e6d\":\"t\",\"\\u021b\":\"t\",\"\\u0163\":\"t\",\"\\u1e71\":\"t\",\"\\u1e6f\":\"t\",\"\\u0167\":\"t\",\"\\u01ad\":\"t\",\"\\u0288\":\"t\",\"\\u2c66\":\"t\",\"\\ua787\":\"t\",\"\\ua729\":\"tz\",\"\\u24e4\":\"u\",\"\\uff55\":\"u\",\"\\xf9\":\"u\",\"\\xfa\":\"u\",\"\\xfb\":\"u\",\"\\u0169\":\"u\",\"\\u1e79\":\"u\",\"\\u016b\":\"u\",\"\\u1e7b\":\"u\",\"\\u016d\":\"u\",\"\\xfc\":\"u\",\"\\u01dc\":\"u\",\"\\u01d8\":\"u\",\"\\u01d6\":\"u\",\"\\u01da\":\"u\",\"\\u1ee7\":\"u\",\"\\u016f\":\"u\",\"\\u0171\":\"u\",\"\\u01d4\":\"u\",\"\\u0215\":\"u\",\"\\u0217\":\"u\",\"\\u01b0\":\"u\",\"\\u1eeb\":\"u\",\"\\u1ee9\":\"u\",\"\\u1eef\":\"u\",\"\\u1eed\":\"u\",\"\\u1ef1\":\"u\",\"\\u1ee5\":\"u\",\"\\u1e73\":\"u\",\"\\u0173\":\"u\",\"\\u1e77\":\"u\",\"\\u1e75\":\"u\",\"\\u0289\":\"u\",\"\\u24e5\":\"v\",\"\\uff56\":\"v\",\"\\u1e7d\":\"v\",\"\\u1e7f\":\"v\",\"\\u028b\":\"v\",\"\\ua75f\":\"v\",\"\\u028c\":\"v\",\"\\ua761\":\"vy\",\"\\u24e6\":\"w\",\"\\uff57\":\"w\",\"\\u1e81\":\"w\",\"\\u1e83\":\"w\",\"\\u0175\":\"w\",\"\\u1e87\":\"w\",\"\\u1e85\":\"w\",\"\\u1e98\":\"w\",\"\\u1e89\":\"w\",\"\\u2c73\":\"w\",\"\\u24e7\":\"x\",\"\\uff58\":\"x\",\"\\u1e8b\":\"x\",\"\\u1e8d\":\"x\",\"\\u24e8\":\"y\",\"\\uff59\":\"y\",\"\\u1ef3\":\"y\",\"\\xfd\":\"y\",\"\\u0177\":\"y\",\"\\u1ef9\":\"y\",\"\\u0233\":\"y\",\"\\u1e8f\":\"y\",\"\\xff\":\"y\",\"\\u1ef7\":\"y\",\"\\u1e99\":\"y\",\"\\u1ef5\":\"y\",\"\\u01b4\":\"y\",\"\\u024f\":\"y\",\"\\u1eff\":\"y\",\"\\u24e9\":\"z\",\"\\uff5a\":\"z\",\"\\u017a\":\"z\",\"\\u1e91\":\"z\",\"\\u017c\":\"z\",\"\\u017e\":\"z\",\"\\u1e93\":\"z\",\"\\u1e95\":\"z\",\"\\u01b6\":\"z\",\"\\u0225\":\"z\",\"\\u0240\":\"z\",\"\\u2c6c\":\"z\",\"\\ua763\":\"z\",\"\\u0386\":\"\\u0391\",\"\\u0388\":\"\\u0395\",\"\\u0389\":\"\\u0397\",\"\\u038a\":\"\\u0399\",\"\\u03aa\":\"\\u0399\",\"\\u038c\":\"\\u039f\",\"\\u038e\":\"\\u03a5\",\"\\u03ab\":\"\\u03a5\",\"\\u038f\":\"\\u03a9\",\"\\u03ac\":\"\\u03b1\",\"\\u03ad\":\"\\u03b5\",\"\\u03ae\":\"\\u03b7\",\"\\u03af\":\"\\u03b9\",\"\\u03ca\":\"\\u03b9\",\"\\u0390\":\"\\u03b9\",\"\\u03cc\":\"\\u03bf\",\"\\u03cd\":\"\\u03c5\",\"\\u03cb\":\"\\u03c5\",\"\\u03b0\":\"\\u03c5\",\"\\u03c9\":\"\\u03c9\",\"\\u03c2\":\"\\u03c3\"};i=a(document),f=function(){var a=1;return function(){return a++}}(),c=O(Object,{bind:function(a){var b=this;return function(){a.apply(b,arguments)}},init:function(c){var d,e,g=\".select2-results\";this.opts=c=this.prepareOpts(c),this.id=c.id,c.element.data(\"select2\")!==b&&null!==c.element.data(\"select2\")&&c.element.data(\"select2\").destroy(),this.container=this.createContainer(),this.liveRegion=a(\".select2-hidden-accessible\"),0==this.liveRegion.length&&(this.liveRegion=a(\"<span>\",{role:\"status\",\"aria-live\":\"polite\"}).addClass(\"select2-hidden-accessible\").appendTo(document.body)),this.containerId=\"s2id_\"+(c.element.attr(\"id\")||\"autogen\"+f()),this.containerEventName=this.containerId.replace(/([.])/g,\"_\").replace(/([;&,\\-\\.\\+\\*\\~':\"\\!\\^#$%@\\[\\]\\(\\)=>\\|])/g,\"\\\\$1\"),this.container.attr(\"id\",this.containerId),this.container.attr(\"title\",c.element.attr(\"title\")),this.body=a(document.body),D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.attr(\"style\",c.element.attr(\"style\")),this.container.css(K(c.containerCss,this.opts.element)),this.container.addClass(K(c.containerCssClass,this.opts.element)),this.elementTabIndex=this.opts.element.attr(\"tabindex\"),this.opts.element.data(\"select2\",this).attr(\"tabindex\",\"-1\").before(this.container).on(\"click.select2\",A),this.container.data(\"select2\",this),this.dropdown=this.container.find(\".select2-drop\"),D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(c.dropdownCssClass,this.opts.element)),this.dropdown.data(\"select2\",this),this.dropdown.on(\"click\",A),this.results=d=this.container.find(g),this.search=e=this.container.find(\"input.select2-input\"),this.queryCount=0,this.resultsPage=0,this.context=null,this.initContainer(),this.container.on(\"click\",A),v(this.results),this.dropdown.on(\"mousemove-filtered\",g,this.bind(this.highlightUnderEvent)),this.dropdown.on(\"touchstart touchmove touchend\",g,this.bind(function(a){this._touchEvent=!0,this.highlightUnderEvent(a)})),this.dropdown.on(\"touchmove\",g,this.bind(this.touchMoved)),this.dropdown.on(\"touchstart touchend\",g,this.bind(this.clearTouchMoved)),this.dropdown.on(\"click\",this.bind(function(){this._touchEvent&&(this._touchEvent=!1,this.selectHighlighted())})),x(80,this.results),this.dropdown.on(\"scroll-debounced\",g,this.bind(this.loadMoreIfNeeded)),a(this.container).on(\"change\",\".select2-input\",function(a){a.stopPropagation()}),a(this.dropdown).on(\"change\",\".select2-input\",function(a){a.stopPropagation()}),a.fn.mousewheel&&d.mousewheel(function(a,b,c,e){var f=d.scrollTop();e>0&&0>=f-e?(d.scrollTop(0),A(a)):0>e&&d.get(0).scrollHeight-d.scrollTop()+e<=d.height()&&(d.scrollTop(d.get(0).scrollHeight-d.height()),A(a))}),u(e),e.on(\"keyup-change input paste\",this.bind(this.updateResults)),e.on(\"focus\",function(){e.addClass(\"select2-focused\")}),e.on(\"blur\",function(){e.removeClass(\"select2-focused\")}),this.dropdown.on(\"mouseup\",g,this.bind(function(b){a(b.target).closest(\".select2-result-selectable\").length>0&&(this.highlightUnderEvent(b),this.selectHighlighted(b))})),this.dropdown.on(\"click mouseup mousedown touchstart touchend focusin\",function(a){a.stopPropagation()}),this.nextSearchTerm=b,a.isFunction(this.opts.initSelection)&&(this.initSelection(),this.monitorSource()),null!==c.maximumInputLength&&this.search.attr(\"maxlength\",c.maximumInputLength);var h=c.element.prop(\"disabled\");h===b&&(h=!1),this.enable(!h);var i=c.element.prop(\"readonly\");i===b&&(i=!1),this.readonly(i),j=j||q(),this.autofocus=c.element.prop(\"autofocus\"),c.element.prop(\"autofocus\",!1),this.autofocus&&this.focus(),this.search.attr(\"placeholder\",c.searchInputPlaceholder)},destroy:function(){var a=this.opts.element,c=a.data(\"select2\"),d=this;this.close(),a.length&&a[0].detachEvent&&d._sync&&a.each(function(){d._sync&&this.detachEvent(\"onpropertychange\",d._sync)}),this.propertyObserver&&(this.propertyObserver.disconnect(),this.propertyObserver=null),this._sync=null,c!==b&&(c.container.remove(),c.liveRegion.remove(),c.dropdown.remove(),a.show().removeData(\"select2\").off(\".select2\").prop(\"autofocus\",this.autofocus||!1),this.elementTabIndex?a.attr({tabindex:this.elementTabIndex}):a.removeAttr(\"tabindex\"),a.show()),N.call(this,\"container\",\"liveRegion\",\"dropdown\",\"results\",\"search\")},optionToData:function(a){return a.is(\"option\")?{id:a.prop(\"value\"),text:a.text(),element:a.get(),css:a.attr(\"class\"),disabled:a.prop(\"disabled\"),locked:r(a.attr(\"locked\"),\"locked\")||r(a.data(\"locked\"),!0)}:a.is(\"optgroup\")?{text:a.attr(\"label\"),children:[],element:a.get(),css:a.attr(\"class\")}:void 0},prepareOpts:function(c){var d,e,g,h,i=this;if(d=c.element,\"select\"===d.get(0).tagName.toLowerCase()&&(this.select=e=c.element),e&&a.each([\"id\",\"multiple\",\"ajax\",\"query\",\"createSearchChoice\",\"initSelection\",\"data\",\"tags\"],function(){if(this in c)throw new Error(\"Option '\"+this+\"' is not allowed for Select2 when attached to a <select> element.\")}),c=a.extend({},{populateResults:function(d,e,g){var h,j=this.opts.id,k=this.liveRegion;h=function(d,e,l){var m,n,o,p,q,r,s,t,u,v;d=c.sortResults(d,e,g);var w=[];for(m=0,n=d.length;n>m;m+=1)o=d[m],q=o.disabled===!0,p=!q&&j(o)!==b,r=o.children&&o.children.length>0,s=a(\"<li></li>\"),s.addClass(\"select2-results-dept-\"+l),s.addClass(\"select2-result\"),s.addClass(p?\"select2-result-selectable\":\"select2-result-unselectable\"),q&&s.addClass(\"select2-disabled\"),r&&s.addClass(\"select2-result-with-children\"),s.addClass(i.opts.formatResultCssClass(o)),s.attr(\"role\",\"presentation\"),t=a(document.createElement(\"div\")),t.addClass(\"select2-result-label\"),t.attr(\"id\",\"select2-result-label-\"+f()),t.attr(\"role\",\"option\"),v=c.formatResult(o,t,g,i.opts.escapeMarkup),v!==b&&(t.html(v),s.append(t)),r&&(u=a(\"<ul></ul>\"),u.addClass(\"select2-result-sub\"),h(o.children,u,l+1),s.append(u)),s.data(\"select2-data\",o),w.push(s[0]);e.append(w),k.text(c.formatMatches(d.length))},h(e,d,0)}},a.fn.select2.defaults,c),\"function\"!=typeof c.id&&(g=c.id,c.id=function(a){return a[g]}),a.isArray(c.element.data(\"select2Tags\"))){if(\"tags\"in c)throw\"tags specified as both an attribute 'data-select2-tags' and in options of Select2 \"+c.element.attr(\"id\");c.tags=c.element.data(\"select2Tags\")}if(e?(c.query=this.bind(function(a){var f,g,h,c={results:[],more:!1},e=a.term;h=function(b,c){var d;b.is(\"option\")?a.matcher(e,b.text(),b)&&c.push(i.optionToData(b)):b.is(\"optgroup\")&&(d=i.optionToData(b),b.children().each2(function(a,b){h(b,d.children)}),d.children.length>0&&c.push(d))},f=d.children(),this.getPlaceholder()!==b&&f.length>0&&(g=this.getPlaceholderOption(),g&&(f=f.not(g))),f.each2(function(a,b){h(b,c.results)}),a.callback(c)}),c.id=function(a){return a.id}):\"query\"in c||(\"ajax\"in c?(h=c.element.data(\"ajax-url\"),h&&h.length>0&&(c.ajax.url=h),c.query=G.call(c.element,c.ajax)):\"data\"in c?c.query=H(c.data):\"tags\"in c&&(c.query=I(c.tags),c.createSearchChoice===b&&(c.createSearchChoice=function(b){return{id:a.trim(b),text:a.trim(b)}}),c.initSelection===b&&(c.initSelection=function(b,d){var e=[];a(s(b.val(),c.separator,c.transformVal)).each(function(){var b={id:this,text:this},d=c.tags;a.isFunction(d)&&(d=d()),a(d).each(function(){return r(this.id,b.id)?(b=this,!1):void 0}),e.push(b)}),d(e)}))),\"function\"!=typeof c.query)throw\"query function not defined for Select2 \"+c.element.attr(\"id\");if(\"top\"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.unshift(b)};else if(\"bottom\"===c.createSearchChoicePosition)c.createSearchChoicePosition=function(a,b){a.push(b)};else if(\"function\"!=typeof c.createSearchChoicePosition)throw\"invalid createSearchChoicePosition option must be 'top', 'bottom' or a custom function\";return c},monitorSource:function(){var d,c=this.opts.element,e=this;c.on(\"change.select2\",this.bind(function(){this.opts.element.data(\"select2-change-triggered\")!==!0&&this.initSelection()})),this._sync=this.bind(function(){var a=c.prop(\"disabled\");a===b&&(a=!1),this.enable(!a);var d=c.prop(\"readonly\");d===b&&(d=!1),this.readonly(d),this.container&&(D(this.container,this.opts.element,this.opts.adaptContainerCssClass),this.container.addClass(K(this.opts.containerCssClass,this.opts.element))),this.dropdown&&(D(this.dropdown,this.opts.element,this.opts.adaptDropdownCssClass),this.dropdown.addClass(K(this.opts.dropdownCssClass,this.opts.element)))}),c.length&&c[0].attachEvent&&c.each(function(){this.attachEvent(\"onpropertychange\",e._sync)}),d=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver,d!==b&&(this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.propertyObserver=new d(function(b){a.each(b,e._sync)}),this.propertyObserver.observe(c.get(0),{attributes:!0,subtree:!1}))},triggerSelect:function(b){var c=a.Event(\"select2-selecting\",{val:this.id(b),object:b,choice:b});return this.opts.element.trigger(c),!c.isDefaultPrevented()},triggerChange:function(b){b=b||{},b=a.extend({},b,{type:\"change\",val:this.val()}),this.opts.element.data(\"select2-change-triggered\",!0),this.opts.element.trigger(b),this.opts.element.data(\"select2-change-triggered\",!1),this.opts.element.click(),this.opts.blurOnChange&&this.opts.element.blur()},isInterfaceEnabled:function(){return this.enabledInterface===!0},enableInterface:function(){var a=this._enabled&&!this._readonly,b=!a;return a===this.enabledInterface?!1:(this.container.toggleClass(\"select2-container-disabled\",b),this.close(),this.enabledInterface=a,!0)},enable:function(a){a===b&&(a=!0),this._enabled!==a&&(this._enabled=a,this.opts.element.prop(\"disabled\",!a),this.enableInterface())},disable:function(){this.enable(!1)},readonly:function(a){a===b&&(a=!1),this._readonly!==a&&(this._readonly=a,this.opts.element.prop(\"readonly\",a),this.enableInterface())},opened:function(){return this.container?this.container.hasClass(\"select2-dropdown-open\"):!1},positionDropdown:function(){var v,w,x,y,z,b=this.dropdown,c=this.container,d=c.offset(),e=c.outerHeight(!1),f=c.outerWidth(!1),g=b.outerHeight(!1),h=a(window),i=h.width(),k=h.height(),l=h.scrollLeft()+i,m=h.scrollTop()+k,n=d.top+e,o=d.left,p=m>=n+g,q=d.top-g>=h.scrollTop(),r=b.outerWidth(!1),s=function(){return l>=o+r},t=function(){return d.left+l+c.outerWidth(!1)>r},u=b.hasClass(\"select2-drop-above\");u?(w=!0,!q&&p&&(x=!0,w=!1)):(w=!1,!p&&q&&(x=!0,w=!0)),x&&(b.hide(),d=this.container.offset(),e=this.container.outerHeight(!1),f=this.container.outerWidth(!1),g=b.outerHeight(!1),l=h.scrollLeft()+i,m=h.scrollTop()+k,n=d.top+e,o=d.left,r=b.outerWidth(!1),b.show(),this.focusSearch()),this.opts.dropdownAutoWidth?(z=a(\".select2-results\",b)[0],b.addClass(\"select2-drop-auto-width\"),b.css(\"width\",\"\"),r=b.outerWidth(!1)+(z.scrollHeight===z.clientHeight?0:j.width),r>f?f=r:r=f,g=b.outerHeight(!1)):this.container.removeClass(\"select2-drop-auto-width\"),\"static\"!==this.body.css(\"position\")&&(v=this.body.offset(),n-=v.top,o-=v.left),!s()&&t()&&(o=d.left+this.container.outerWidth(!1)-r),y={left:o,width:f},w?(y.top=d.top-g,y.bottom=\"auto\",this.container.addClass(\"select2-drop-above\"),b.addClass(\"select2-drop-above\")):(y.top=n,y.bottom=\"auto\",this.container.removeClass(\"select2-drop-above\"),b.removeClass(\"select2-drop-above\")),y=a.extend(y,K(this.opts.dropdownCss,this.opts.element)),b.css(y)},shouldOpen:function(){var b;return this.opened()?!1:this._enabled===!1||this._readonly===!0?!1:(b=a.Event(\"select2-opening\"),this.opts.element.trigger(b),!b.isDefaultPrevented())},clearDropdownAlignmentPreference:function(){this.container.removeClass(\"select2-drop-above\"),this.dropdown.removeClass(\"select2-drop-above\")},open:function(){return this.shouldOpen()?(this.opening(),i.on(\"mousemove.select2Event\",function(a){h.x=a.pageX,h.y=a.pageY}),!0):!1},opening:function(){var f,b=this.containerEventName,c=\"scroll.\"+b,d=\"resize.\"+b,e=\"orientationchange.\"+b;this.container.addClass(\"select2-dropdown-open\").addClass(\"select2-container-active\"),this.clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body.children().last()[0]&&this.dropdown.detach().appendTo(this.body),f=a(\"#select2-drop-mask\"),0===f.length&&(f=a(document.createElement(\"div\")),f.attr(\"id\",\"select2-drop-mask\").attr(\"class\",\"select2-drop-mask\"),f.hide(),f.appendTo(this.body),f.on(\"mousedown touchstart click\",function(b){n(f);var d,c=a(\"#select2-drop\");c.length>0&&(d=c.data(\"select2\"),d.opts.selectOnBlur&&d.selectHighlighted({noFocus:!0}),d.close(),b.preventDefault(),b.stopPropagation())})),this.dropdown.prev()[0]!==f[0]&&this.dropdown.before(f),a(\"#select2-drop\").removeAttr(\"id\"),this.dropdown.attr(\"id\",\"select2-drop\"),f.show(),this.positionDropdown(),this.dropdown.show(),this.positionDropdown(),this.dropdown.addClass(\"select2-drop-active\");var g=this;this.container.parents().add(window).each(function(){a(this).on(d+\" \"+c+\" \"+e,function(){g.opened()&&g.positionDropdown()})})},close:function(){if(this.opened()){var b=this.containerEventName,c=\"scroll.\"+b,d=\"resize.\"+b,e=\"orientationchange.\"+b;this.container.parents().add(window).each(function(){a(this).off(c).off(d).off(e)}),this.clearDropdownAlignmentPreference(),a(\"#select2-drop-mask\").hide(),this.dropdown.removeAttr(\"id\"),this.dropdown.hide(),this.container.removeClass(\"select2-dropdown-open\").removeClass(\"select2-container-active\"),this.results.empty(),i.off(\"mousemove.select2Event\"),this.clearSearch(),this.search.removeClass(\"select2-active\"),this.opts.element.trigger(a.Event(\"select2-close\"))}},externalSearch:function(a){this.open(),this.search.val(a),this.updateResults(!1)},clearSearch:function(){},getMaximumSelectionSize:function(){return K(this.opts.maximumSelectionSize,this.opts.element)},ensureHighlightVisible:function(){var c,d,e,f,g,h,i,j,b=this.results;if(d=this.highlight(),!(0>d)){if(0==d)return b.scrollTop(0),void 0;c=this.findHighlightableChoices().find(\".select2-result-label\"),e=a(c[d]),j=(e.offset()||{}).top||0,f=j+e.outerHeight(!0),d===c.length-1&&(i=b.find(\"li.select2-more-results\"),i.length>0&&(f=i.offset().top+i.outerHeight(!0))),g=b.offset().top+b.outerHeight(!1),f>g&&b.scrollTop(b.scrollTop()+(f-g)),h=j-b.offset().top,0>h&&\"none\"!=e.css(\"display\")&&b.scrollTop(b.scrollTop()+h)}},findHighlightableChoices:function(){return this.results.find(\".select2-result-selectable:not(.select2-disabled):not(.select2-selected)\")},moveHighlight:function(b){for(var c=this.findHighlightableChoices(),d=this.highlight();d>-1&&d<c.length;){d+=b;\r\nvar e=a(c[d]);if(e.hasClass(\"select2-result-selectable\")&&!e.hasClass(\"select2-disabled\")&&!e.hasClass(\"select2-selected\")){this.highlight(d);break}}},highlight:function(b){var d,e,c=this.findHighlightableChoices();return 0===arguments.length?p(c.filter(\".select2-highlighted\")[0],c.get()):(b>=c.length&&(b=c.length-1),0>b&&(b=0),this.removeHighlight(),d=a(c[b]),d.addClass(\"select2-highlighted\"),this.search.attr(\"aria-activedescendant\",d.find(\".select2-result-label\").attr(\"id\")),this.ensureHighlightVisible(),this.liveRegion.text(d.text()),e=d.data(\"select2-data\"),e&&this.opts.element.trigger({type:\"select2-highlight\",val:this.id(e),choice:e}),void 0)},removeHighlight:function(){this.results.find(\".select2-highlighted\").removeClass(\"select2-highlighted\")},touchMoved:function(){this._touchMoved=!0},clearTouchMoved:function(){this._touchMoved=!1},countSelectableResults:function(){return this.findHighlightableChoices().length},highlightUnderEvent:function(b){var c=a(b.target).closest(\".select2-result-selectable\");if(c.length>0&&!c.is(\".select2-highlighted\")){var d=this.findHighlightableChoices();this.highlight(d.index(c))}else 0==c.length&&this.removeHighlight()},loadMoreIfNeeded:function(){var c,a=this.results,b=a.find(\"li.select2-more-results\"),d=this.resultsPage+1,e=this,f=this.search.val(),g=this.context;0!==b.length&&(c=b.offset().top-a.offset().top-a.height(),c<=this.opts.loadMorePadding&&(b.addClass(\"select2-active\"),this.opts.query({element:this.opts.element,term:f,page:d,context:g,matcher:this.opts.matcher,callback:this.bind(function(c){e.opened()&&(e.opts.populateResults.call(this,a,c.results,{term:f,page:d,context:g}),e.postprocessResults(c,!1,!1),c.more===!0?(b.detach().appendTo(a).html(e.opts.escapeMarkup(K(e.opts.formatLoadMore,e.opts.element,d+1))),window.setTimeout(function(){e.loadMoreIfNeeded()},10)):b.remove(),e.positionDropdown(),e.resultsPage=d,e.context=c.context,this.opts.element.trigger({type:\"select2-loaded\",items:c}))})})))},tokenize:function(){},updateResults:function(c){function m(){d.removeClass(\"select2-active\"),h.positionDropdown(),e.find(\".select2-no-results,.select2-selection-limit,.select2-searching\").length?h.liveRegion.text(e.text()):h.liveRegion.text(h.opts.formatMatches(e.find('.select2-result-selectable:not(\".select2-selected\")').length))}function n(a){e.html(a),m()}var g,i,l,d=this.search,e=this.results,f=this.opts,h=this,j=d.val(),k=a.data(this.container,\"select2-last-term\");if((c===!0||!k||!r(j,k))&&(a.data(this.container,\"select2-last-term\",j),c===!0||this.showSearchInput!==!1&&this.opened())){l=++this.queryCount;var o=this.getMaximumSelectionSize();if(o>=1&&(g=this.data(),a.isArray(g)&&g.length>=o&&J(f.formatSelectionTooBig,\"formatSelectionTooBig\")))return n(\"<li class='select2-selection-limit'>\"+K(f.formatSelectionTooBig,f.element,o)+\"</li>\"),void 0;if(d.val().length<f.minimumInputLength)return J(f.formatInputTooShort,\"formatInputTooShort\")?n(\"<li class='select2-no-results'>\"+K(f.formatInputTooShort,f.element,d.val(),f.minimumInputLength)+\"</li>\"):n(\"\"),c&&this.showSearch&&this.showSearch(!0),void 0;if(f.maximumInputLength&&d.val().length>f.maximumInputLength)return J(f.formatInputTooLong,\"formatInputTooLong\")?n(\"<li class='select2-no-results'>\"+K(f.formatInputTooLong,f.element,d.val(),f.maximumInputLength)+\"</li>\"):n(\"\"),void 0;f.formatSearching&&0===this.findHighlightableChoices().length&&n(\"<li class='select2-searching'>\"+K(f.formatSearching,f.element)+\"</li>\"),d.addClass(\"select2-active\"),this.removeHighlight(),i=this.tokenize(),i!=b&&null!=i&&d.val(i),this.resultsPage=1,f.query({element:f.element,term:d.val(),page:this.resultsPage,context:null,matcher:f.matcher,callback:this.bind(function(g){var i;if(l==this.queryCount){if(!this.opened())return this.search.removeClass(\"select2-active\"),void 0;if(g.hasError!==b&&J(f.formatAjaxError,\"formatAjaxError\"))return n(\"<li class='select2-ajax-error'>\"+K(f.formatAjaxError,f.element,g.jqXHR,g.textStatus,g.errorThrown)+\"</li>\"),void 0;if(this.context=g.context===b?null:g.context,this.opts.createSearchChoice&&\"\"!==d.val()&&(i=this.opts.createSearchChoice.call(h,d.val(),g.results),i!==b&&null!==i&&h.id(i)!==b&&null!==h.id(i)&&0===a(g.results).filter(function(){return r(h.id(this),h.id(i))}).length&&this.opts.createSearchChoicePosition(g.results,i)),0===g.results.length&&J(f.formatNoMatches,\"formatNoMatches\"))return n(\"<li class='select2-no-results'>\"+K(f.formatNoMatches,f.element,d.val())+\"</li>\"),void 0;e.empty(),h.opts.populateResults.call(this,e,g.results,{term:d.val(),page:this.resultsPage,context:null}),g.more===!0&&J(f.formatLoadMore,\"formatLoadMore\")&&(e.append(\"<li class='select2-more-results'>\"+f.escapeMarkup(K(f.formatLoadMore,f.element,this.resultsPage))+\"</li>\"),window.setTimeout(function(){h.loadMoreIfNeeded()},10)),this.postprocessResults(g,c),m(),this.opts.element.trigger({type:\"select2-loaded\",items:g})}})})}},cancel:function(){this.close()},blur:function(){this.opts.selectOnBlur&&this.selectHighlighted({noFocus:!0}),this.close(),this.container.removeClass(\"select2-container-active\"),this.search[0]===document.activeElement&&this.search.blur(),this.clearSearch(),this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\")},focusSearch:function(){y(this.search)},selectHighlighted:function(a){if(this._touchMoved)return this.clearTouchMoved(),void 0;var b=this.highlight(),c=this.results.find(\".select2-highlighted\"),d=c.closest(\".select2-result\").data(\"select2-data\");d?(this.highlight(b),this.onSelect(d,a)):a&&a.noFocus&&this.close()},getPlaceholder:function(){var a;return this.opts.element.attr(\"placeholder\")||this.opts.element.attr(\"data-placeholder\")||this.opts.element.data(\"placeholder\")||this.opts.placeholder||((a=this.getPlaceholderOption())!==b?a.text():b)},getPlaceholderOption:function(){if(this.select){var c=this.select.children(\"option\").first();if(this.opts.placeholderOption!==b)return\"first\"===this.opts.placeholderOption&&c||\"function\"==typeof this.opts.placeholderOption&&this.opts.placeholderOption(this.select);if(\"\"===a.trim(c.text())&&\"\"===c.val())return c}},initContainerWidth:function(){function c(){var c,d,e,f,g,h;if(\"off\"===this.opts.width)return null;if(\"element\"===this.opts.width)return 0===this.opts.element.outerWidth(!1)?\"auto\":this.opts.element.outerWidth(!1)+\"px\";if(\"copy\"===this.opts.width||\"resolve\"===this.opts.width){if(c=this.opts.element.attr(\"style\"),c!==b)for(d=c.split(\";\"),f=0,g=d.length;g>f;f+=1)if(h=d[f].replace(/\\s/g,\"\"),e=h.match(/^width:(([-+]?([0-9]*\\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==e&&e.length>=1)return e[1];return\"resolve\"===this.opts.width?(c=this.opts.element.css(\"width\"),c.indexOf(\"%\")>0?c:0===this.opts.element.outerWidth(!1)?\"auto\":this.opts.element.outerWidth(!1)+\"px\"):null}return a.isFunction(this.opts.width)?this.opts.width():this.opts.width}var d=c.call(this);null!==d&&this.container.css(\"width\",d)}}),d=O(c,{createContainer:function(){var b=a(document.createElement(\"div\")).attr({\"class\":\"select2-container\"}).html([\"<a href='javascript:void(0)' class='select2-choice' tabindex='-1'>\",\"   <span class='select2-chosen'>&#160;</span><abbr class='select2-search-choice-close'></abbr>\",\"   <span class='select2-arrow' role='presentation'><b role='presentation'></b></span>\",\"</a>\",\"<label for='' class='select2-offscreen'></label>\",\"<input class='select2-focusser select2-offscreen' type='text' aria-haspopup='true' role='button' />\",\"<div class='select2-drop select2-display-none'>\",\"   <div class='select2-search'>\",\"       <label for='' class='select2-offscreen'></label>\",\"       <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input' role='combobox' aria-expanded='true'\",\"       aria-autocomplete='list' />\",\"   </div>\",\"   <ul class='select2-results' role='listbox'>\",\"   </ul>\",\"</div>\"].join(\"\"));return b},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.focusser.prop(\"disabled\",!this.isInterfaceEnabled())},opening:function(){var c,d,e;this.opts.minimumResultsForSearch>=0&&this.showSearch(!0),this.parent.opening.apply(this,arguments),this.showSearchInput!==!1&&this.search.val(this.focusser.val()),this.opts.shouldFocusInput(this)&&(this.search.focus(),c=this.search.get(0),c.createTextRange?(d=c.createTextRange(),d.collapse(!1),d.select()):c.setSelectionRange&&(e=this.search.val().length,c.setSelectionRange(e,e))),\"\"===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.focusser.prop(\"disabled\",!0).val(\"\"),this.updateResults(!0),this.opts.element.trigger(a.Event(\"select2-open\"))},close:function(){this.opened()&&(this.parent.close.apply(this,arguments),this.focusser.prop(\"disabled\",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},focus:function(){this.opened()?this.close():(this.focusser.prop(\"disabled\",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus())},isFocused:function(){return this.container.hasClass(\"select2-container-active\")},cancel:function(){this.parent.cancel.apply(this,arguments),this.focusser.prop(\"disabled\",!1),this.opts.shouldFocusInput(this)&&this.focusser.focus()},destroy:function(){a(\"label[for='\"+this.focusser.attr(\"id\")+\"']\").attr(\"for\",this.opts.element.attr(\"id\")),this.parent.destroy.apply(this,arguments),N.call(this,\"selection\",\"focusser\")},initContainer:function(){var b,g,c=this.container,d=this.dropdown,e=f();this.opts.minimumResultsForSearch<0?this.showSearch(!1):this.showSearch(!0),this.selection=b=c.find(\".select2-choice\"),this.focusser=c.find(\".select2-focusser\"),b.find(\".select2-chosen\").attr(\"id\",\"select2-chosen-\"+e),this.focusser.attr(\"aria-labelledby\",\"select2-chosen-\"+e),this.results.attr(\"id\",\"select2-results-\"+e),this.search.attr(\"aria-owns\",\"select2-results-\"+e),this.focusser.attr(\"id\",\"s2id_autogen\"+e),g=a(\"label[for='\"+this.opts.element.attr(\"id\")+\"']\"),this.opts.element.focus(this.bind(function(){this.focus()})),this.focusser.prev().text(g.text()).attr(\"for\",this.focusser.attr(\"id\"));var h=this.opts.element.attr(\"title\");this.opts.element.attr(\"title\",h||g.text()),this.focusser.attr(\"tabindex\",this.elementTabIndex),this.search.attr(\"id\",this.focusser.attr(\"id\")+\"_search\"),this.search.prev().text(a(\"label[for='\"+this.focusser.attr(\"id\")+\"']\").text()).attr(\"for\",this.search.attr(\"id\")),this.search.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()&&229!=a.keyCode){if(a.which===k.PAGE_UP||a.which===k.PAGE_DOWN)return A(a),void 0;switch(a.which){case k.UP:case k.DOWN:return this.moveHighlight(a.which===k.UP?-1:1),A(a),void 0;case k.ENTER:return this.selectHighlighted(),A(a),void 0;case k.TAB:return this.selectHighlighted({noFocus:!0}),void 0;case k.ESC:return this.cancel(a),A(a),void 0}}})),this.search.on(\"blur\",this.bind(function(){document.activeElement===this.body.get(0)&&window.setTimeout(this.bind(function(){this.opened()&&this.search.focus()}),0)})),this.focusser.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()&&a.which!==k.TAB&&!k.isControl(a)&&!k.isFunctionKey(a)&&a.which!==k.ESC){if(this.opts.openOnEnter===!1&&a.which===k.ENTER)return A(a),void 0;if(a.which==k.DOWN||a.which==k.UP||a.which==k.ENTER&&this.opts.openOnEnter){if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return;return this.open(),A(a),void 0}return a.which==k.DELETE||a.which==k.BACKSPACE?(this.opts.allowClear&&this.clear(),A(a),void 0):void 0}})),u(this.focusser),this.focusser.on(\"keyup-change input\",this.bind(function(a){if(this.opts.minimumResultsForSearch>=0){if(a.stopPropagation(),this.opened())return;this.open()}})),b.on(\"mousedown touchstart\",\"abbr\",this.bind(function(a){this.isInterfaceEnabled()&&(this.clear(),B(a),this.close(),this.selection&&this.selection.focus())})),b.on(\"mousedown touchstart\",this.bind(function(c){n(b),this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.opened()?this.close():this.isInterfaceEnabled()&&this.open(),A(c)})),d.on(\"mousedown touchstart\",this.bind(function(){this.opts.shouldFocusInput(this)&&this.search.focus()})),b.on(\"focus\",this.bind(function(a){A(a)})),this.focusser.on(\"focus\",this.bind(function(){this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\")})).on(\"blur\",this.bind(function(){this.opened()||(this.container.removeClass(\"select2-container-active\"),this.opts.element.trigger(a.Event(\"select2-blur\")))})),this.search.on(\"focus\",this.bind(function(){this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\")})),this.initContainerWidth(),this.opts.element.hide(),this.setPlaceholder()},clear:function(b){var c=this.selection.data(\"select2-data\");if(c){var d=a.Event(\"select2-clearing\");if(this.opts.element.trigger(d),d.isDefaultPrevented())return;var e=this.getPlaceholderOption();this.opts.element.val(e?e.val():\"\"),this.selection.find(\".select2-chosen\").empty(),this.selection.removeData(\"select2-data\"),this.setPlaceholder(),b!==!1&&(this.opts.element.trigger({type:\"select2-removed\",val:this.id(c),choice:c}),this.triggerChange({removed:c}))}},initSelection:function(){if(this.isPlaceholderOptionSelected())this.updateSelection(null),this.close(),this.setPlaceholder();else{var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.setPlaceholder(),c.nextSearchTerm=c.opts.nextSearchTerm(a,c.search.val()))})}},isPlaceholderOptionSelected:function(){var a;return this.getPlaceholder()===b?!1:(a=this.getPlaceholderOption())!==b&&a.prop(\"selected\")||\"\"===this.opts.element.val()||this.opts.element.val()===b||null===this.opts.element.val()},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return\"select\"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=a.find(\"option\").filter(function(){return this.selected&&!this.disabled});b(c.optionToData(d))}:\"data\"in b&&(b.initSelection=b.initSelection||function(c,d){var e=c.val(),f=null;b.query({matcher:function(a,c,d){var g=r(e,b.id(d));return g&&(f=d),g},callback:a.isFunction(d)?function(){d(f)}:a.noop})}),b},getPlaceholder:function(){return this.select&&this.getPlaceholderOption()===b?b:this.parent.getPlaceholder.apply(this,arguments)},setPlaceholder:function(){var a=this.getPlaceholder();if(this.isPlaceholderOptionSelected()&&a!==b){if(this.select&&this.getPlaceholderOption()===b)return;this.selection.find(\".select2-chosen\").html(this.opts.escapeMarkup(a)),this.selection.addClass(\"select2-default\"),this.container.removeClass(\"select2-allowclear\")}},postprocessResults:function(a,b,c){var d=0,e=this;if(this.findHighlightableChoices().each2(function(a,b){return r(e.id(b.data(\"select2-data\")),e.opts.element.val())?(d=a,!1):void 0}),c!==!1&&(b===!0&&d>=0?this.highlight(d):this.highlight(0)),b===!0){var g=this.opts.minimumResultsForSearch;g>=0&&this.showSearch(L(a.results)>=g)}},showSearch:function(b){this.showSearchInput!==b&&(this.showSearchInput=b,this.dropdown.find(\".select2-search\").toggleClass(\"select2-search-hidden\",!b),this.dropdown.find(\".select2-search\").toggleClass(\"select2-offscreen\",!b),a(this.dropdown,this.container).toggleClass(\"select2-with-searchbox\",b))},onSelect:function(a,b){if(this.triggerSelect(a)){var c=this.opts.element.val(),d=this.data();this.opts.element.val(this.id(a)),this.updateSelection(a),this.opts.element.trigger({type:\"select2-selected\",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.close(),b&&b.noFocus||!this.opts.shouldFocusInput(this)||this.focusser.focus(),r(c,this.id(a))||this.triggerChange({added:a,removed:d})}},updateSelection:function(a){var d,e,c=this.selection.find(\".select2-chosen\");this.selection.data(\"select2-data\",a),c.empty(),null!==a&&(d=this.opts.formatSelection(a,c,this.opts.escapeMarkup)),d!==b&&c.append(d),e=this.opts.formatSelectionCssClass(a,c),e!==b&&c.addClass(e),this.selection.removeClass(\"select2-default\"),this.opts.allowClear&&this.getPlaceholder()!==b&&this.container.addClass(\"select2-allowclear\")},val:function(){var a,c=!1,d=null,e=this,f=this.data();if(0===arguments.length)return this.opts.element.val();if(a=arguments[0],arguments.length>1&&(c=arguments[1]),this.select)this.select.val(a).find(\"option\").filter(function(){return this.selected}).each2(function(a,b){return d=e.optionToData(b),!1}),this.updateSelection(d),this.setPlaceholder(),c&&this.triggerChange({added:d,removed:f});else{if(!a&&0!==a)return this.clear(c),void 0;if(this.opts.initSelection===b)throw new Error(\"cannot call val() if initSelection() is not defined\");this.opts.element.val(a),this.opts.initSelection(this.opts.element,function(a){e.opts.element.val(a?e.id(a):\"\"),e.updateSelection(a),e.setPlaceholder(),c&&e.triggerChange({added:a,removed:f})})}},clearSearch:function(){this.search.val(\"\"),this.focusser.val(\"\")},data:function(a){var c,d=!1;return 0===arguments.length?(c=this.selection.data(\"select2-data\"),c==b&&(c=null),c):(arguments.length>1&&(d=arguments[1]),a?(c=this.data(),this.opts.element.val(a?this.id(a):\"\"),this.updateSelection(a),d&&this.triggerChange({added:a,removed:c})):this.clear(d),void 0)}}),e=O(c,{createContainer:function(){var b=a(document.createElement(\"div\")).attr({\"class\":\"select2-container select2-container-multi\"}).html([\"<ul class='select2-choices'>\",\"  <li class='select2-search-field'>\",\"    <label for='' class='select2-offscreen'></label>\",\"    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='select2-input'>\",\"  </li>\",\"</ul>\",\"<div class='select2-drop select2-drop-multi select2-display-none'>\",\"   <ul class='select2-results'>\",\"   </ul>\",\"</div>\"].join(\"\"));return b},prepareOpts:function(){var b=this.parent.prepareOpts.apply(this,arguments),c=this;return\"select\"===b.element.get(0).tagName.toLowerCase()?b.initSelection=function(a,b){var d=[];a.find(\"option\").filter(function(){return this.selected&&!this.disabled}).each2(function(a,b){d.push(c.optionToData(b))}),b(d)}:\"data\"in b&&(b.initSelection=b.initSelection||function(c,d){var e=s(c.val(),b.separator,b.transformVal),f=[];b.query({matcher:function(c,d,g){var h=a.grep(e,function(a){return r(a,b.id(g))}).length;return h&&f.push(g),h},callback:a.isFunction(d)?function(){for(var a=[],c=0;c<e.length;c++)for(var g=e[c],h=0;h<f.length;h++){var i=f[h];if(r(g,b.id(i))){a.push(i),f.splice(h,1);break}}d(a)}:a.noop})}),b},selectChoice:function(a){var b=this.container.find(\".select2-search-choice-focus\");b.length&&a&&a[0]==b[0]||(b.length&&this.opts.element.trigger(\"choice-deselected\",b),b.removeClass(\"select2-search-choice-focus\"),a&&a.length&&(this.close(),a.addClass(\"select2-search-choice-focus\"),this.opts.element.trigger(\"choice-selected\",a)))},destroy:function(){a(\"label[for='\"+this.search.attr(\"id\")+\"']\").attr(\"for\",this.opts.element.attr(\"id\")),this.parent.destroy.apply(this,arguments),N.call(this,\"searchContainer\",\"selection\")},initContainer:function(){var c,b=\".select2-choices\";this.searchContainer=this.container.find(\".select2-search-field\"),this.selection=c=this.container.find(b);var d=this;this.selection.on(\"click\",\".select2-container:not(.select2-container-disabled) .select2-search-choice:not(.select2-locked)\",function(){d.search[0].focus(),d.selectChoice(a(this))}),this.search.attr(\"id\",\"s2id_autogen\"+f()),this.search.prev().text(a(\"label[for='\"+this.opts.element.attr(\"id\")+\"']\").text()).attr(\"for\",this.search.attr(\"id\")),this.opts.element.focus(this.bind(function(){this.focus()})),this.search.on(\"input paste\",this.bind(function(){this.search.attr(\"placeholder\")&&0==this.search.val().length||this.isInterfaceEnabled()&&(this.opened()||this.open())})),this.search.attr(\"tabindex\",this.elementTabIndex),this.keydowns=0,this.search.on(\"keydown\",this.bind(function(a){if(this.isInterfaceEnabled()){++this.keydowns;var b=c.find(\".select2-search-choice-focus\"),d=b.prev(\".select2-search-choice:not(.select2-locked)\"),e=b.next(\".select2-search-choice:not(.select2-locked)\"),f=z(this.search);if(b.length&&(a.which==k.LEFT||a.which==k.RIGHT||a.which==k.BACKSPACE||a.which==k.DELETE||a.which==k.ENTER)){var g=b;return a.which==k.LEFT&&d.length?g=d:a.which==k.RIGHT?g=e.length?e:null:a.which===k.BACKSPACE?this.unselect(b.first())&&(this.search.width(10),g=d.length?d:e):a.which==k.DELETE?this.unselect(b.first())&&(this.search.width(10),g=e.length?e:null):a.which==k.ENTER&&(g=null),this.selectChoice(g),A(a),g&&g.length||this.open(),void 0}if((a.which===k.BACKSPACE&&1==this.keydowns||a.which==k.LEFT)&&0==f.offset&&!f.length)return this.selectChoice(c.find(\".select2-search-choice:not(.select2-locked)\").last()),A(a),void 0;if(this.selectChoice(null),this.opened())switch(a.which){case k.UP:case k.DOWN:return this.moveHighlight(a.which===k.UP?-1:1),A(a),void 0;case k.ENTER:return this.selectHighlighted(),A(a),void 0;case k.TAB:return this.selectHighlighted({noFocus:!0}),this.close(),void 0;case k.ESC:return this.cancel(a),A(a),void 0}if(a.which!==k.TAB&&!k.isControl(a)&&!k.isFunctionKey(a)&&a.which!==k.BACKSPACE&&a.which!==k.ESC){if(a.which===k.ENTER){if(this.opts.openOnEnter===!1)return;if(a.altKey||a.ctrlKey||a.shiftKey||a.metaKey)return}this.open(),(a.which===k.PAGE_UP||a.which===k.PAGE_DOWN)&&A(a),a.which===k.ENTER&&A(a)}}})),this.search.on(\"keyup\",this.bind(function(){this.keydowns=0,this.resizeSearch()})),this.search.on(\"blur\",this.bind(function(b){this.container.removeClass(\"select2-container-active\"),this.search.removeClass(\"select2-focused\"),this.selectChoice(null),this.opened()||this.clearSearch(),b.stopImmediatePropagation(),this.opts.element.trigger(a.Event(\"select2-blur\"))})),this.container.on(\"click\",b,this.bind(function(b){this.isInterfaceEnabled()&&(a(b.target).closest(\".select2-search-choice\").length>0||(this.selectChoice(null),this.clearPlaceholder(),this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.open(),this.focusSearch(),b.preventDefault()))})),this.container.on(\"focus\",b,this.bind(function(){this.isInterfaceEnabled()&&(this.container.hasClass(\"select2-container-active\")||this.opts.element.trigger(a.Event(\"select2-focus\")),this.container.addClass(\"select2-container-active\"),this.dropdown.addClass(\"select2-drop-active\"),this.clearPlaceholder())})),this.initContainerWidth(),this.opts.element.hide(),this.clearSearch()},enableInterface:function(){this.parent.enableInterface.apply(this,arguments)&&this.search.prop(\"disabled\",!this.isInterfaceEnabled())},initSelection:function(){if(\"\"===this.opts.element.val()&&\"\"===this.opts.element.text()&&(this.updateSelection([]),this.close(),this.clearSearch()),this.select||\"\"!==this.opts.element.val()){var c=this;this.opts.initSelection.call(null,this.opts.element,function(a){a!==b&&null!==a&&(c.updateSelection(a),c.close(),c.clearSearch())})}},clearSearch:function(){var a=this.getPlaceholder(),c=this.getMaxSearchWidth();a!==b&&0===this.getVal().length&&this.search.hasClass(\"select2-focused\")===!1?(this.search.val(a).addClass(\"select2-default\"),this.search.width(c>0?c:this.container.css(\"width\"))):this.search.val(\"\").width(10)},clearPlaceholder:function(){this.search.hasClass(\"select2-default\")&&this.search.val(\"\").removeClass(\"select2-default\")},opening:function(){this.clearPlaceholder(),this.resizeSearch(),this.parent.opening.apply(this,arguments),this.focusSearch(),\"\"===this.search.val()&&this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.search.select()),this.updateResults(!0),this.opts.shouldFocusInput(this)&&this.search.focus(),this.opts.element.trigger(a.Event(\"select2-open\"))},close:function(){this.opened()&&this.parent.close.apply(this,arguments)},focus:function(){this.close(),this.search.focus()},isFocused:function(){return this.search.hasClass(\"select2-focused\")},updateSelection:function(b){var c=[],d=[],e=this;a(b).each(function(){p(e.id(this),c)<0&&(c.push(e.id(this)),d.push(this))}),b=d,this.selection.find(\".select2-search-choice\").remove(),a(b).each(function(){e.addSelectedChoice(this)}),e.postprocessResults()},tokenize:function(){var a=this.search.val();a=this.opts.tokenizer.call(this,a,this.data(),this.bind(this.onSelect),this.opts),null!=a&&a!=b&&(this.search.val(a),a.length>0&&this.open())},onSelect:function(a,c){this.triggerSelect(a)&&\"\"!==a.text&&(this.addSelectedChoice(a),this.opts.element.trigger({type:\"selected\",val:this.id(a),choice:a}),this.nextSearchTerm=this.opts.nextSearchTerm(a,this.search.val()),this.clearSearch(),this.updateResults(),(this.select||!this.opts.closeOnSelect)&&this.postprocessResults(a,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect?(this.close(),this.search.width(10)):this.countSelectableResults()>0?(this.search.width(10),this.resizeSearch(),this.getMaximumSelectionSize()>0&&this.val().length>=this.getMaximumSelectionSize()?this.updateResults(!0):this.nextSearchTerm!=b&&(this.search.val(this.nextSearchTerm),this.updateResults(),this.search.select()),this.positionDropdown()):(this.close(),this.search.width(10)),this.triggerChange({added:a}),c&&c.noFocus||this.focusSearch())},cancel:function(){this.close(),this.focusSearch()},addSelectedChoice:function(c){var j,k,d=!c.locked,e=a(\"<li class='select2-search-choice'>    <div></div>    <a href='#' class='select2-search-choice-close' tabindex='-1'></a></li>\"),f=a(\"<li class='select2-search-choice select2-locked'><div></div></li>\"),g=d?e:f,h=this.id(c),i=this.getVal();j=this.opts.formatSelection(c,g.find(\"div\"),this.opts.escapeMarkup),j!=b&&g.find(\"div\").replaceWith(a(\"<div></div>\").html(j)),k=this.opts.formatSelectionCssClass(c,g.find(\"div\")),k!=b&&g.addClass(k),d&&g.find(\".select2-search-choice-close\").on(\"mousedown\",A).on(\"click dblclick\",this.bind(function(b){this.isInterfaceEnabled()&&(this.unselect(a(b.target)),this.selection.find(\".select2-search-choice-focus\").removeClass(\"select2-search-choice-focus\"),A(b),this.close(),this.focusSearch())})).on(\"focus\",this.bind(function(){this.isInterfaceEnabled()&&(this.container.addClass(\"select2-container-active\"),this.dropdown.addClass(\"select2-drop-active\"))})),g.data(\"select2-data\",c),g.insertBefore(this.searchContainer),i.push(h),this.setVal(i)},unselect:function(b){var d,e,c=this.getVal();if(b=b.closest(\".select2-search-choice\"),0===b.length)throw\"Invalid argument: \"+b+\". Must be .select2-search-choice\";if(d=b.data(\"select2-data\")){var f=a.Event(\"select2-removing\");if(f.val=this.id(d),f.choice=d,this.opts.element.trigger(f),f.isDefaultPrevented())return!1;for(;(e=p(this.id(d),c))>=0;)c.splice(e,1),this.setVal(c),this.select&&this.postprocessResults();return b.remove(),this.opts.element.trigger({type:\"select2-removed\",val:this.id(d),choice:d}),this.triggerChange({removed:d}),!0}},postprocessResults:function(a,b,c){var d=this.getVal(),e=this.results.find(\".select2-result\"),f=this.results.find(\".select2-result-with-children\"),g=this;e.each2(function(a,b){var c=g.id(b.data(\"select2-data\"));p(c,d)>=0&&(b.addClass(\"select2-selected\"),b.find(\".select2-result-selectable\").addClass(\"select2-selected\"))}),f.each2(function(a,b){b.is(\".select2-result-selectable\")||0!==b.find(\".select2-result-selectable:not(.select2-selected)\").length||b.addClass(\"select2-selected\")}),-1==this.highlight()&&c!==!1&&this.opts.closeOnSelect===!0&&g.highlight(0),!this.opts.createSearchChoice&&!e.filter(\".select2-result:not(.select2-selected)\").length>0&&(!a||a&&!a.more&&0===this.results.find(\".select2-no-results\").length)&&J(g.opts.formatNoMatches,\"formatNoMatches\")&&this.results.append(\"<li class='select2-no-results'>\"+K(g.opts.formatNoMatches,g.opts.element,g.search.val())+\"</li>\")},getMaxSearchWidth:function(){return this.selection.width()-t(this.search)},resizeSearch:function(){var a,b,c,d,e,f=t(this.search);a=C(this.search)+10,b=this.search.offset().left,c=this.selection.width(),d=this.selection.offset().left,e=c-(b-d)-f,a>e&&(e=c-f),40>e&&(e=c-f),0>=e&&(e=a),this.search.width(Math.floor(e))},getVal:function(){var a;return this.select?(a=this.select.val(),null===a?[]:a):(a=this.opts.element.val(),s(a,this.opts.separator,this.opts.transformVal))},setVal:function(b){var c;this.select?this.select.val(b):(c=[],a(b).each(function(){p(this,c)<0&&c.push(this)}),this.opts.element.val(0===c.length?\"\":c.join(this.opts.separator)))},buildChangeDetails:function(a,b){for(var b=b.slice(0),a=a.slice(0),c=0;c<b.length;c++)for(var d=0;d<a.length;d++)r(this.opts.id(b[c]),this.opts.id(a[d]))&&(b.splice(c,1),c>0&&c--,a.splice(d,1),d--);return{added:b,removed:a}},val:function(c,d){var e,f=this;if(0===arguments.length)return this.getVal();if(e=this.data(),e.length||(e=[]),!c&&0!==c)return this.opts.element.val(\"\"),this.updateSelection([]),this.clearSearch(),d&&this.triggerChange({added:this.data(),removed:e}),void 0;if(this.setVal(c),this.select)this.opts.initSelection(this.select,this.bind(this.updateSelection)),d&&this.triggerChange(this.buildChangeDetails(e,this.data()));else{if(this.opts.initSelection===b)throw new Error(\"val() cannot be called if initSelection() is not defined\");this.opts.initSelection(this.opts.element,function(b){var c=a.map(b,f.id);f.setVal(c),f.updateSelection(b),f.clearSearch(),d&&f.triggerChange(f.buildChangeDetails(e,f.data()))})}this.clearSearch()},onSortStart:function(){if(this.select)throw new Error(\"Sorting of elements is not supported when attached to <select>. Attach to <input type='hidden'/> instead.\");this.search.width(0),this.searchContainer.hide()},onSortEnd:function(){var b=[],c=this;this.searchContainer.show(),this.searchContainer.appendTo(this.searchContainer.parent()),this.resizeSearch(),this.selection.find(\".select2-search-choice\").each(function(){b.push(c.opts.id(a(this).data(\"select2-data\")))}),this.setVal(b),this.triggerChange()},data:function(b,c){var e,f,d=this;return 0===arguments.length?this.selection.children(\".select2-search-choice\").map(function(){return a(this).data(\"select2-data\")}).get():(f=this.data(),b||(b=[]),e=a.map(b,function(a){return d.opts.id(a)}),this.setVal(e),this.updateSelection(b),this.clearSearch(),c&&this.triggerChange(this.buildChangeDetails(f,this.data())),void 0)}}),a.fn.select2=function(){var d,e,f,g,h,c=Array.prototype.slice.call(arguments,0),i=[\"val\",\"destroy\",\"opened\",\"open\",\"close\",\"focus\",\"isFocused\",\"container\",\"dropdown\",\"onSortStart\",\"onSortEnd\",\"enable\",\"disable\",\"readonly\",\"positionDropdown\",\"data\",\"search\"],j=[\"opened\",\"isFocused\",\"container\",\"dropdown\"],k=[\"val\",\"data\"],l={search:\"externalSearch\"};return this.each(function(){if(0===c.length||\"object\"==typeof c[0])d=0===c.length?{}:a.extend({},c[0]),d.element=a(this),\"select\"===d.element.get(0).tagName.toLowerCase()?h=d.element.prop(\"multiple\"):(h=d.multiple||!1,\"tags\"in d&&(d.multiple=h=!0)),e=h?new window.Select2[\"class\"].multi:new window.Select2[\"class\"].single,e.init(d);else{if(\"string\"!=typeof c[0])throw\"Invalid arguments to select2 plugin: \"+c;if(p(c[0],i)<0)throw\"Unknown method: \"+c[0];if(g=b,e=a(this).data(\"select2\"),e===b)return;if(f=c[0],\"container\"===f?g=e.container:\"dropdown\"===f?g=e.dropdown:(l[f]&&(f=l[f]),g=e[f].apply(e,c.slice(1))),p(c[0],j)>=0||p(c[0],k)>=0&&1==c.length)return!1}}),g===b?this:g},a.fn.select2.defaults={width:\"copy\",loadMorePadding:0,closeOnSelect:!0,openOnEnter:!0,containerCss:{},dropdownCss:{},containerCssClass:\"\",dropdownCssClass:\"\",formatResult:function(a,b,c,d){var e=[];return E(this.text(a),c.term,e,d),e.join(\"\")},transformVal:function(b){return a.trim(b)},formatSelection:function(a,c,d){return a?d(this.text(a)):b},sortResults:function(a){return a},formatResultCssClass:function(a){return a.css},formatSelectionCssClass:function(){return b},minimumResultsForSearch:0,minimumInputLength:0,maximumInputLength:null,maximumSelectionSize:0,id:function(a){return a==b?null:a.id},text:function(b){return b&&this.data&&this.data.text?a.isFunction(this.data.text)?this.data.text(b):b[this.data.text]:b.text\r\n},matcher:function(a,b){return o(\"\"+b).toUpperCase().indexOf(o(\"\"+a).toUpperCase())>=0},separator:\",\",tokenSeparators:[],tokenizer:M,escapeMarkup:F,blurOnChange:!1,selectOnBlur:!1,adaptContainerCssClass:function(a){return a},adaptDropdownCssClass:function(){return null},nextSearchTerm:function(){return b},searchInputPlaceholder:\"\",createSearchChoicePosition:\"top\",shouldFocusInput:function(a){var b=\"ontouchstart\"in window||navigator.msMaxTouchPoints>0;return b?a.opts.minimumResultsForSearch<0?!1:!0:!0}},a.fn.select2.locales=[],a.fn.select2.locales.en={formatMatches:function(a){return 1===a?\"One result is available, press enter to select it.\":a+\" results are available, use up and down arrow keys to navigate.\"},formatNoMatches:function(){return\"No matches found\"},formatAjaxError:function(){return\"Loading failed\"},formatInputTooShort:function(a,b){var c=b-a.length;return\"Please enter \"+c+\" or more character\"+(1==c?\"\":\"s\")},formatInputTooLong:function(a,b){var c=a.length-b;return\"Please delete \"+c+\" character\"+(1==c?\"\":\"s\")},formatSelectionTooBig:function(a){return\"You can only select \"+a+\" item\"+(1==a?\"\":\"s\")},formatLoadMore:function(){return\"Loading more results\\u2026\"},formatSearching:function(){return\"Searching\\u2026\"}},a.extend(a.fn.select2.defaults,a.fn.select2.locales.en),a.fn.select2.ajaxDefaults={transport:a.ajax,params:{type:\"GET\",cache:!1,dataType:\"json\"}},window.Select2={query:{ajax:G,local:H,tags:I},util:{debounce:w,markMatch:E,escapeMarkup:F,stripDiacritics:o},\"class\":{\"abstract\":c,single:d,multi:e}}}}(jQuery);","/**\r\n * Select2 Latvian and English translation.\r\n */\r\n(function ($) {\r\n    \"use strict\";\r\n\r\n    $.fn.select2.locales['lv'] = {\r\n        formatNoMatches: function () { return \"Sakritību nav\"; },\r\n        formatInputTooShort: function (input, min) { var n = min - input.length; return \"Lūdzu ievadiet vēl \" + n + \" simbol\" + (n == 11 ? \"us\" : n%10 == 1 ? \"u\" : \"us\"); },\r\n        formatInputTooLong: function (input, max) { var n = input.length - max; return \"Lūdzu ievadiet par \" + n + \" simbol\" + (n == 11 ? \"iem\" : n%10 == 1 ? \"u\" : \"iem\") + \" mazāk\"; },\r\n        formatSelectionTooBig: function (limit) { return \"Jūs varat izvēlēties ne vairāk kā \" + limit + \" element\" + (limit == 11 ? \"us\" : limit%10 == 1 ? \"u\" : \"us\"); },\r\n        formatLoadMore: function (pageNumber) { return \"Datu ielāde…\"; },\r\n        formatSearching: function () { return \"Meklēšana…\"; }\r\n    };\r\n    \r\n    $.fn.select2.locales['en'] = {\r\n        formatMatches: function (matches) { if (matches === 1) { return \"One result is available, press enter to select it.\"; } return matches + \" results are available, use up and down arrow keys to navigate.\"; },\r\n        formatNoMatches: function () { return \"No matches found\"; },\r\n        formatInputTooShort: function (input, min) { var n = min - input.length; return \"Please enter \" + n + \" or more character\" + (n == 1 ? \"\" : \"s\"); },\r\n        formatInputTooLong: function (input, max) { var n = input.length - max; return \"Please delete \" + n + \" character\" + (n == 1 ? \"\" : \"s\"); },\r\n        formatSelectionTooBig: function (limit) { return \"You can only select \" + limit + \" item\" + (limit == 1 ? \"\" : \"s\"); },\r\n        formatLoadMore: function (pageNumber) { return \"Loading more results…\"; },\r\n        formatSearching: function () { return \"Searching…\"; }\r\n    };\r\n    \r\n\r\n    $.extend($.fn.select2.defaults, $.fn.select2.locales[Lang.getLocale()]);\r\n})(jQuery);\r\n"]}